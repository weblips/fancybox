/*
 * Fancy Product Designer - jQuery plugin 4.0.3 
 * Copyright 2013, Rafael Dery
 *
 * Only for the sale at the envato marketplaces
 */
function Tree() {
    var a = this;
    a.build_tree = function(b) {
        var c, d, e = a.dyn_tree,
            f = a.stat_desc.static_tree,
            g = a.stat_desc.elems,
            h = -1;
        for (b.heap_len = 0, b.heap_max = HEAP_SIZE, c = 0; g > c; c++) 0 !== e[2 * c] ? (b.heap[++b.heap_len] = h = c, b.depth[c] = 0) : e[2 * c + 1] = 0;
        for (; 2 > b.heap_len;) d = b.heap[++b.heap_len] = 2 > h ? ++h : 0, e[2 * d] = 1, b.depth[d] = 0, b.opt_len--, f && (b.static_len -= f[2 * d + 1]);
        for (a.max_code = h, c = Math.floor(b.heap_len / 2); c >= 1; c--) b.pqdownheap(e, c);
        d = g;
        do c = b.heap[1], b.heap[1] = b.heap[b.heap_len--], b.pqdownheap(e, 1), f = b.heap[1], b.heap[--b.heap_max] = c, b.heap[--b.heap_max] = f, e[2 * d] = e[2 * c] + e[2 * f], b.depth[d] = Math.max(b.depth[c], b.depth[f]) + 1, e[2 * c + 1] = e[2 * f + 1] = d, b.heap[1] = d++, b.pqdownheap(e, 1); while (2 <= b.heap_len);
        b.heap[--b.heap_max] = b.heap[1], c = a.dyn_tree;
        for (var i, j, h = a.stat_desc.static_tree, k = a.stat_desc.extra_bits, l = a.stat_desc.extra_base, m = a.stat_desc.max_length, n = 0, g = 0; MAX_BITS >= g; g++) b.bl_count[g] = 0;
        for (c[2 * b.heap[b.heap_max] + 1] = 0, d = b.heap_max + 1; HEAP_SIZE > d; d++) f = b.heap[d], g = c[2 * c[2 * f + 1] + 1] + 1, g > m && (g = m, n++), c[2 * f + 1] = g, f > a.max_code || (b.bl_count[g]++, i = 0, f >= l && (i = k[f - l]), j = c[2 * f], b.opt_len += j * (g + i), h && (b.static_len += j * (h[2 * f + 1] + i)));
        if (0 !== n) {
            do {
                for (g = m - 1; 0 === b.bl_count[g];) g--;
                b.bl_count[g]--, b.bl_count[g + 1] += 2, b.bl_count[m]--, n -= 2
            } while (n > 0);
            for (g = m; 0 !== g; g--)
                for (f = b.bl_count[g]; 0 !== f;) h = b.heap[--d], h > a.max_code || (c[2 * h + 1] != g && (b.opt_len += (g - c[2 * h + 1]) * c[2 * h], c[2 * h + 1] = g), f--)
        }
        for (c = a.max_code, d = b.bl_count, b = [], f = 0, g = 1; MAX_BITS >= g; g++) b[g] = f = f + d[g - 1] << 1;
        for (d = 0; c >= d; d++)
            if (k = e[2 * d + 1], 0 !== k) {
                f = e, g = 2 * d, h = b[k]++, l = 0;
                do l |= 1 & h, h >>>= 1, l <<= 1; while (0 < --k);
                f[g] = l >>> 1
            }
    }
}

function StaticTree(a, b, c, d, e) {
    this.static_tree = a, this.extra_bits = b, this.extra_base = c, this.elems = d, this.max_length = e
}

function Config(a, b, c, d, e) {
    this.good_length = a, this.max_lazy = b, this.nice_length = c, this.max_chain = d, this.func = e
}

function smaller(a, b, c, d) {
    var e = a[2 * b];
    return a = a[2 * c], a > e || e == a && d[b] <= d[c]
}

function Deflate() {
    function a() {
        var a;
        for (a = 0; L_CODES > a; a++) V[2 * a] = 0;
        for (a = 0; D_CODES > a; a++) W[2 * a] = 0;
        for (a = 0; BL_CODES > a; a++) X[2 * a] = 0;
        V[2 * END_BLOCK] = 1, ca = ea = Y.opt_len = Y.static_len = 0
    }

    function b(a, b) {
        var c, d, e = -1,
            f = a[1],
            g = 0,
            h = 7,
            i = 4;
        for (0 === f && (h = 138, i = 3), a[2 * (b + 1) + 1] = 65535, c = 0; b >= c; c++) d = f, f = a[2 * (c + 1) + 1], ++g < h && d == f || (i > g ? X[2 * d] += g : 0 !== d ? (d != e && X[2 * d]++, X[2 * REP_3_6]++) : 10 >= g ? X[2 * REPZ_3_10]++ : X[2 * REPZ_11_138]++, g = 0, e = d, 0 === f ? (h = 138, i = 3) : d == f ? (h = 6, i = 3) : (h = 7, i = 4))
    }

    function c(a) {
        Y.pending_buf[Y.pending++] = a
    }

    function d(a) {
        c(255 & a), c(a >>> 8 & 255)
    }

    function e(a, b) {
        ha > Buf_size - b ? (ga |= a << ha & 65535, d(ga), ga = a >>> Buf_size - ha, ha += b - Buf_size) : (ga |= a << ha & 65535, ha += b)
    }

    function f(a, b) {
        var c = 2 * a;
        e(65535 & b[c], 65535 & b[c + 1])
    }

    function g(a, b) {
        var c, d, g = -1,
            h = a[1],
            i = 0,
            j = 7,
            k = 4;
        for (0 === h && (j = 138, k = 3), c = 0; b >= c; c++)
            if (d = h, h = a[2 * (c + 1) + 1], !(++i < j && d == h)) {
                if (k > i) {
                    do f(d, X); while (0 !== --i)
                } else 0 !== d ? (d != g && (f(d, X), i--), f(REP_3_6, X), e(i - 3, 2)) : 10 >= i ? (f(REPZ_3_10, X), e(i - 3, 3)) : (f(REPZ_11_138, X), e(i - 11, 7));
                i = 0, g = d, 0 === h ? (j = 138, k = 3) : d == h ? (j = 6, k = 3) : (j = 7, k = 4)
            }
    }

    function h() {
        16 == ha ? (d(ga), ha = ga = 0) : ha >= 8 && (c(255 & ga), ga >>>= 8, ha -= 8)
    }

    function i(a, b) {
        var c, d, e;
        if (Y.pending_buf[da + 2 * ca] = a >>> 8 & 255, Y.pending_buf[da + 2 * ca + 1] = 255 & a, Y.pending_buf[aa + ca] = 255 & b, ca++, 0 === a ? V[2 * b]++ : (ea++, a--, V[2 * (Tree._length_code[b] + LITERALS + 1)]++, W[2 * Tree.d_code(a)]++), 0 === (8191 & ca) && R > 2) {
            for (c = 8 * ca, d = L - H, e = 0; D_CODES > e; e++) c += W[2 * e] * (5 + Tree.extra_dbits[e]);
            if (ea < Math.floor(ca / 2) && c >>> 3 < Math.floor(d / 2)) return !0
        }
        return ca == ba - 1
    }

    function j(a, b) {
        var c, d, g, h, i = 0;
        if (0 !== ca)
            do c = Y.pending_buf[da + 2 * i] << 8 & 65280 | 255 & Y.pending_buf[da + 2 * i + 1], d = 255 & Y.pending_buf[aa + i], i++, 0 === c ? f(d, a) : (g = Tree._length_code[d], f(g + LITERALS + 1, a), h = Tree.extra_lbits[g], 0 !== h && (d -= Tree.base_length[g], e(d, h)), c--, g = Tree.d_code(c), f(g, b), h = Tree.extra_dbits[g], 0 !== h && (c -= Tree.base_dist[g], e(c, h))); while (ca > i);
        f(END_BLOCK, a), fa = a[2 * END_BLOCK + 1]
    }

    function k() {
        ha > 8 ? d(ga) : ha > 0 && c(255 & ga), ha = ga = 0
    }

    function l(a, b, c) {
        e((STORED_BLOCK << 1) + (c ? 1 : 0), 3), k(), fa = 8, d(b), d(~b), Y.pending_buf.set(y.subarray(a, a + b), Y.pending), Y.pending += b
    }

    function m(c) {
        var d, f, h = H >= 0 ? H : -1,
            i = L - H,
            m = 0;
        if (R > 0) {
            for (Z.build_tree(Y), $.build_tree(Y), b(V, Z.max_code), b(W, $.max_code), _.build_tree(Y), m = BL_CODES - 1; m >= 3 && 0 === X[2 * Tree.bl_order[m] + 1]; m--);
            Y.opt_len += 3 * (m + 1) + 14, d = Y.opt_len + 3 + 7 >>> 3, f = Y.static_len + 3 + 7 >>> 3, d >= f && (d = f)
        } else d = f = i + 5;
        if (d >= i + 4 && -1 != h) l(h, i, c);
        else if (f == d) e((STATIC_TREES << 1) + (c ? 1 : 0), 3), j(StaticTree.static_ltree, StaticTree.static_dtree);
        else {
            for (e((DYN_TREES << 1) + (c ? 1 : 0), 3), h = Z.max_code + 1, i = $.max_code + 1, m += 1, e(h - 257, 5), e(i - 1, 5), e(m - 4, 4), d = 0; m > d; d++) e(X[2 * Tree.bl_order[d] + 1], 3);
            g(V, h - 1), g(W, i - 1), j(V, W)
        }
        a(), c && k(), H = L, r.flush_pending()
    }

    function n() {
        var a, b, c, d;
        do {
            if (d = z - N - L, 0 === d && 0 === L && 0 === N) d = v;
            else if (-1 == d) d--;
            else if (L >= v + v - MIN_LOOKAHEAD) {
                y.set(y.subarray(v, v + v), 0), M -= v, L -= v, H -= v, c = a = D;
                do b = 65535 & B[--c], B[c] = b >= v ? b - v : 0; while (0 !== --a);
                c = a = v;
                do b = 65535 & A[--c], A[c] = b >= v ? b - v : 0; while (0 !== --a);
                d += v
            }
            if (0 === r.avail_in) break;
            a = r.read_buf(y, L + N, d), N += a, N >= MIN_MATCH && (C = 255 & y[L], C = (C << G ^ 255 & y[L + 1]) & F)
        } while (MIN_LOOKAHEAD > N && 0 !== r.avail_in)
    }

    function o(a) {
        var b, c = 65535;
        for (c > t - 5 && (c = t - 5);;) {
            if (1 >= N) {
                if (n(), 0 === N && a == Z_NO_FLUSH) return NeedMore;
                if (0 === N) break
            }
            if (L += N, N = 0, b = H + c, (0 === L || L >= b) && (N = L - b, L = b, m(!1), 0 === r.avail_out)) return NeedMore;
            if (L - H >= v - MIN_LOOKAHEAD && (m(!1), 0 === r.avail_out)) return NeedMore
        }
        return m(a == Z_FINISH), 0 === r.avail_out ? a == Z_FINISH ? FinishStarted : NeedMore : a == Z_FINISH ? FinishDone : BlockDone
    }

    function p(a) {
        var b, c = P,
            d = L,
            e = O,
            f = L > v - MIN_LOOKAHEAD ? L - (v - MIN_LOOKAHEAD) : 0,
            g = U,
            h = x,
            i = L + MAX_MATCH,
            j = y[d + e - 1],
            k = y[d + e];
        O >= T && (c >>= 2), g > N && (g = N);
        do
            if (b = a, y[b + e] == k && y[b + e - 1] == j && y[b] == y[d] && y[++b] == y[d + 1]) {
                d += 2, b++;
                do; while (y[++d] == y[++b] && y[++d] == y[++b] && y[++d] == y[++b] && y[++d] == y[++b] && y[++d] == y[++b] && y[++d] == y[++b] && y[++d] == y[++b] && y[++d] == y[++b] && i > d);
                if (b = MAX_MATCH - (i - d), d = i - MAX_MATCH, b > e) {
                    if (M = a, e = b, b >= g) break;
                    j = y[d + e - 1], k = y[d + e]
                }
            }
        while ((a = 65535 & A[a & h]) > f && 0 !== --c);
        return N >= e ? e : N
    }

    function q(a) {
        for (var b, c, d = 0;;) {
            if (MIN_LOOKAHEAD > N) {
                if (n(), MIN_LOOKAHEAD > N && a == Z_NO_FLUSH) return NeedMore;
                if (0 === N) break
            }
            if (N >= MIN_MATCH && (C = (C << G ^ 255 & y[L + (MIN_MATCH - 1)]) & F, d = 65535 & B[C], A[L & x] = B[C], B[C] = L), O = I, J = M, I = MIN_MATCH - 1, 0 !== d && Q > O && v - MIN_LOOKAHEAD >= (L - d & 65535) && (S != Z_HUFFMAN_ONLY && (I = p(d)), 5 >= I && (S == Z_FILTERED || I == MIN_MATCH && L - M > 4096) && (I = MIN_MATCH - 1)), O >= MIN_MATCH && O >= I) {
                c = L + N - MIN_MATCH, b = i(L - 1 - J, O - MIN_MATCH), N -= O - 1, O -= 2;
                do ++L <= c && (C = (C << G ^ 255 & y[L + (MIN_MATCH - 1)]) & F, d = 65535 & B[C], A[L & x] = B[C], B[C] = L); while (0 !== --O);
                if (K = 0, I = MIN_MATCH - 1, L++, b && (m(!1), 0 === r.avail_out)) return NeedMore
            } else if (0 !== K) {
                if ((b = i(0, 255 & y[L - 1])) && m(!1), L++, N--, 0 === r.avail_out) return NeedMore
            } else K = 1, L++, N--
        }
        return 0 !== K && (i(0, 255 & y[L - 1]), K = 0), m(a == Z_FINISH), 0 === r.avail_out ? a == Z_FINISH ? FinishStarted : NeedMore : a == Z_FINISH ? FinishDone : BlockDone
    }
    var r, s, t, u, v, w, x, y, z, A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y = this,
        Z = new Tree,
        $ = new Tree,
        _ = new Tree;
    Y.depth = [];
    var aa, ba, ca, da, ea, fa, ga, ha;
    Y.bl_count = [], Y.heap = [], V = [], W = [], X = [], Y.pqdownheap = function(a, b) {
        for (var c = Y.heap, d = c[b], e = b << 1; e <= Y.heap_len && (e < Y.heap_len && smaller(a, c[e + 1], c[e], Y.depth) && e++, !smaller(a, d, c[e], Y.depth));) c[b] = c[e], b = e, e <<= 1;
        c[b] = d
    }, Y.deflateInit = function(b, c, d, e, f, g) {
        if (e || (e = Z_DEFLATED), f || (f = DEF_MEM_LEVEL), g || (g = Z_DEFAULT_STRATEGY), b.msg = null, c == Z_DEFAULT_COMPRESSION && (c = 6), 1 > f || f > MAX_MEM_LEVEL || e != Z_DEFLATED || 9 > d || d > 15 || 0 > c || c > 9 || 0 > g || g > Z_HUFFMAN_ONLY) return Z_STREAM_ERROR;
        for (b.dstate = Y, w = d, v = 1 << w, x = v - 1, E = f + 7, D = 1 << E, F = D - 1, G = Math.floor((E + MIN_MATCH - 1) / MIN_MATCH), y = new Uint8Array(2 * v), A = [], B = [], ba = 1 << f + 6, Y.pending_buf = new Uint8Array(4 * ba), t = 4 * ba, da = Math.floor(ba / 2), aa = 3 * ba, R = c, S = g, b.total_in = b.total_out = 0, b.msg = null, Y.pending = 0, Y.pending_out = 0, s = BUSY_STATE, u = Z_NO_FLUSH, Z.dyn_tree = V, Z.stat_desc = StaticTree.static_l_desc, $.dyn_tree = W, $.stat_desc = StaticTree.static_d_desc, _.dyn_tree = X, _.stat_desc = StaticTree.static_bl_desc, ha = ga = 0, fa = 8, a(), z = 2 * v, b = B[D - 1] = 0; D - 1 > b; b++) B[b] = 0;
        return Q = config_table[R].max_lazy, T = config_table[R].good_length, U = config_table[R].nice_length, P = config_table[R].max_chain, N = H = L = 0, I = O = MIN_MATCH - 1, C = K = 0, Z_OK
    }, Y.deflateEnd = function() {
        return s != INIT_STATE && s != BUSY_STATE && s != FINISH_STATE ? Z_STREAM_ERROR : (y = A = B = Y.pending_buf = null, Y.dstate = null, s == BUSY_STATE ? Z_DATA_ERROR : Z_OK)
    }, Y.deflateParams = function(a, b, c) {
        var d = Z_OK;
        return b == Z_DEFAULT_COMPRESSION && (b = 6), 0 > b || b > 9 || 0 > c || c > Z_HUFFMAN_ONLY ? Z_STREAM_ERROR : (config_table[R].func != config_table[b].func && 0 !== a.total_in && (d = a.deflate(Z_PARTIAL_FLUSH)), R != b && (R = b, Q = config_table[R].max_lazy, T = config_table[R].good_length, U = config_table[R].nice_length, P = config_table[R].max_chain), S = c, d)
    }, Y.deflateSetDictionary = function(a, b, c) {
        a = c;
        var d = 0;
        if (!b || s != INIT_STATE) return Z_STREAM_ERROR;
        if (MIN_MATCH > a) return Z_OK;
        for (a > v - MIN_LOOKAHEAD && (a = v - MIN_LOOKAHEAD, d = c - a), y.set(b.subarray(d, d + a), 0), H = L = a, C = 255 & y[0], C = (C << G ^ 255 & y[1]) & F, b = 0; a - MIN_MATCH >= b; b++) C = (C << G ^ 255 & y[b + (MIN_MATCH - 1)]) & F, A[b & x] = B[C], B[C] = b;
        return Z_OK
    }, Y.deflate = function(a, b) {
        var d, g, j;
        if (b > Z_FINISH || 0 > b) return Z_STREAM_ERROR;
        if (!a.next_out || !a.next_in && 0 !== a.avail_in || s == FINISH_STATE && b != Z_FINISH) return a.msg = z_errmsg[Z_NEED_DICT - Z_STREAM_ERROR], Z_STREAM_ERROR;
        if (0 === a.avail_out) return a.msg = z_errmsg[Z_NEED_DICT - Z_BUF_ERROR], Z_BUF_ERROR;
        if (r = a, d = u, u = b, s == INIT_STATE && (g = Z_DEFLATED + (w - 8 << 4) << 8, j = (R - 1 & 255) >> 1, j > 3 && (j = 3), g |= j << 6, 0 !== L && (g |= PRESET_DICT), s = BUSY_STATE, g += 31 - g % 31, c(g >> 8 & 255), c(255 & g)), 0 !== Y.pending) {
            if (r.flush_pending(), 0 === r.avail_out) return u = -1, Z_OK
        } else if (0 === r.avail_in && d >= b && b != Z_FINISH) return r.msg = z_errmsg[Z_NEED_DICT - Z_BUF_ERROR], Z_BUF_ERROR;
        if (s == FINISH_STATE && 0 !== r.avail_in) return a.msg = z_errmsg[Z_NEED_DICT - Z_BUF_ERROR], Z_BUF_ERROR;
        if (0 !== r.avail_in || 0 !== N || b != Z_NO_FLUSH && s != FINISH_STATE) {
            switch (d = -1, config_table[R].func) {
                case STORED:
                    d = o(b);
                    break;
                case FAST:
                    a: {
                        for (d = 0;;) {
                            if (MIN_LOOKAHEAD > N) {
                                if (n(), MIN_LOOKAHEAD > N && b == Z_NO_FLUSH) {
                                    d = NeedMore;
                                    break a
                                }
                                if (0 === N) break
                            }
                            if (N >= MIN_MATCH && (C = (C << G ^ 255 & y[L + (MIN_MATCH - 1)]) & F, d = 65535 & B[C], A[L & x] = B[C], B[C] = L), 0 !== d && v - MIN_LOOKAHEAD >= (L - d & 65535) && S != Z_HUFFMAN_ONLY && (I = p(d)), I >= MIN_MATCH)
                                if (g = i(L - M, I - MIN_MATCH), N -= I, Q >= I && N >= MIN_MATCH) {
                                    I--;
                                    do L++, C = (C << G ^ 255 & y[L + (MIN_MATCH - 1)]) & F, d = 65535 & B[C], A[L & x] = B[C], B[C] = L; while (0 !== --I);
                                    L++
                                } else L += I, I = 0, C = 255 & y[L], C = (C << G ^ 255 & y[L + 1]) & F;
                            else g = i(0, 255 & y[L]), N--, L++;
                            if (g && (m(!1), 0 === r.avail_out)) {
                                d = NeedMore;
                                break a
                            }
                        }
                        m(b == Z_FINISH), d = 0 === r.avail_out ? b == Z_FINISH ? FinishStarted : NeedMore : b == Z_FINISH ? FinishDone : BlockDone
                    }
                    break;
                case SLOW:
                    d = q(b)
            }
            if ((d == FinishStarted || d == FinishDone) && (s = FINISH_STATE), d == NeedMore || d == FinishStarted) return 0 === r.avail_out && (u = -1), Z_OK;
            if (d == BlockDone) {
                if (b == Z_PARTIAL_FLUSH) e(STATIC_TREES << 1, 3), f(END_BLOCK, StaticTree.static_ltree), h(), 9 > 1 + fa + 10 - ha && (e(STATIC_TREES << 1, 3), f(END_BLOCK, StaticTree.static_ltree), h()), fa = 7;
                else if (l(0, 0, !1), b == Z_FULL_FLUSH)
                    for (d = 0; D > d; d++) B[d] = 0;
                if (r.flush_pending(), 0 === r.avail_out) return u = -1, Z_OK
            }
        }
        return b != Z_FINISH ? Z_OK : Z_STREAM_END
    }
}

function ZStream() {
    this.total_out = this.avail_out = this.total_in = this.avail_in = this.next_out_index = this.next_in_index = 0
}

function Deflater(a) {
    var b = new ZStream,
        c = Z_NO_FLUSH,
        d = new Uint8Array(512);
    "undefined" == typeof a && (a = Z_DEFAULT_COMPRESSION), b.deflateInit(a), b.next_out = d, this.append = function(a, e) {
        var f, g, h = [],
            i = 0,
            j = 0,
            k = 0;
        if (a.length) {
            b.next_in_index = 0, b.next_in = a, b.avail_in = a.length;
            do {
                if (b.next_out_index = 0, b.avail_out = 512, f = b.deflate(c), f != Z_OK) throw "deflating: " + b.msg;
                b.next_out_index && h.push(512 == b.next_out_index ? new Uint8Array(d) : new Uint8Array(d.subarray(0, b.next_out_index))), k += b.next_out_index, e && 0 < b.next_in_index && b.next_in_index != i && (e(b.next_in_index), i = b.next_in_index)
            } while (0 < b.avail_in || 0 === b.avail_out);
            return g = new Uint8Array(k), h.forEach(function(a) {
                g.set(a, j), j += a.length
            }), g
        }
    }, this.flush = function() {
        var a, c, e = [],
            f = 0,
            g = 0;
        do {
            if (b.next_out_index = 0, b.avail_out = 512, a = b.deflate(Z_FINISH), a != Z_STREAM_END && a != Z_OK) throw "deflating: " + b.msg;
            0 < 512 - b.avail_out && e.push(new Uint8Array(d.subarray(0, b.next_out_index))), g += b.next_out_index
        } while (0 < b.avail_in || 0 === b.avail_out);
        return b.deflateEnd(), c = new Uint8Array(g), e.forEach(function(a) {
            c.set(a, f), f += a.length
        }), c
    }
}! function(a) {
    "use strict";
    var b = a.fabric || (a.fabric = {}),
        c = b.util.object.extend,
        d = b.util.object.clone;
    if (b.CurvedText) return void b.warn("fabric.CurvedText is already defined");
    var e = b.Text.prototype.stateProperties.concat();
    e.push("radius", "spacing", "reverse", "effect", "range", "largeFont", "smallFont");
    var f = b.Text.prototype._dimensionAffectingProps;
    f.radius = !0, f.spacing = !0, f.reverse = !0, f.fill = !0, f.effect = !0, f.width = !0, f.height = !0, f.range = !0, f.fontSize = !0, f.shadow = !0, f.largeFont = !0, f.smallFont = !0;
    var g = b.Group.prototype.delegatedProperties;
    g.backgroundColor = !0, g.textBackgroundColor = !0, g.textDecoration = !0, g.stroke = !0, g.strokeWidth = !0, g.shadow = !0, g.fontWeight = !0, g.fontStyle = !0, g.strokeWidth = !0, g.textAlign = !0, b.CurvedText = b.util.createClass(b.Text, b.Collection, {
        type: "curvedText",
        radius: 50,
        range: 5,
        smallFont: 10,
        largeFont: 30,
        effect: "curved",
        spacing: 20,
        reverse: !1,
        stateProperties: e,
        delegatedProperties: g,
        _dimensionAffectingProps: f,
        _isRendering: 0,
        complexity: function() {
            this.callSuper("complexity")
        },
        initialize: function(a, c) {
            c || (c = {}), this.letters = new b.Group([], {
                selectable: !1,
                padding: 0
            }), this.__skipDimension = !0, this.setOptions(c), this.__skipDimension = !1, this.setText(a)
        },
        setText: function(a) {
            if (this.letters) {
                for (; 0 !== a.length && this.letters.size() >= a.length;) this.letters.remove(this.letters.item(this.letters.size() - 1));
                for (var c = 0; c < a.length; c++) void 0 === this.letters.item(c) ? this.letters.add(new b.Text(a[c])) : this.letters.item(c).setText(a[c])
            }
            this.callSuper("setText", a)
        },
        _initDimensions: function(a) {
            if (!this.__skipDimension) {
                a || (a = b.util.createCanvasElement().getContext("2d"), this._setTextStyles(a)), this._textLines = this.text.split(this._reNewline), this._clearCache();
                var c = this.textAlign;
                this.textAlign = "left", this.width = this._getTextWidth(a), this.textAlign = c, this.height = this._getTextHeight(a), this._render(a)
            }
        },
        _render: function() {
            var a = b.util.getRandomInt(100, 999);
            if (this._isRendering = a, this.letters) {
                var c = 0,
                    d = 0,
                    e = 0,
                    f = 0,
                    g = parseInt(this.spacing),
                    h = 0;
                if ("curved" === this.effect) {
                    for (var i = 0, j = this.text.length; j > i; i++) f += this.letters.item(i).width + g;
                    f -= g
                } else "arc" === this.effect && (h = (this.letters.item(0).fontSize + g) / this.radius / (Math.PI / 180), f = (this.text.length + 1) * (this.letters.item(0).fontSize + g));
                c = "right" === this.get("textAlign") ? 90 - f / 2 / this.radius / (Math.PI / 180) : "left" === this.get("textAlign") ? -90 - f / 2 / this.radius / (Math.PI / 180) : -(f / 2 / this.radius / (Math.PI / 180)), this.reverse && (c = -c);
                for (var k = 0, l = this.reverse ? -1 : 1, m = 0, n = 0, i = 0, j = this.text.length; j > i; i++) {
                    if (a !== this._isRendering) return;
                    for (var o in this.delegatedProperties) this.letters.item(i).set(o, this.get(o));
                    if (this.letters.item(i).set("left", k), this.letters.item(i).set("top", 0), this.letters.item(i).setAngle(0), this.letters.item(i).set("padding", 0), "curved" === this.effect) m = (this.letters.item(i).width + g) / this.radius / (Math.PI / 180), d = l * (l * c + n + m / 4), c = l * (l * c + n), e = c * (Math.PI / 180), n = m, this.letters.item(i).setAngle(d), this.letters.item(i).set("top", -1 * l * Math.cos(e) * this.radius), this.letters.item(i).set("left", l * Math.sin(e) * this.radius), this.letters.item(i).set("padding", 0), this.letters.item(i).set("selectable", !1);
                    else if ("arc" === this.effect) c = l * (l * c + h), e = c * (Math.PI / 180), this.letters.item(i).set("top", -1 * l * Math.cos(e) * this.radius), this.letters.item(i).set("left", l * Math.sin(e) * this.radius), this.letters.item(i).set("padding", 0), this.letters.item(i).set("selectable", !1);
                    else if ("STRAIGHT" === this.effect) this.letters.item(i).set("left", k), this.letters.item(i).set("top", 0), this.letters.item(i).setAngle(0), k += this.letters.item(i).get("width"), this.letters.item(i).set("padding", 0), this.letters.item(i).set({
                        borderColor: "red",
                        cornerColor: "green",
                        cornerSize: 6,
                        transparentCorners: !1
                    }), this.letters.item(i).set("selectable", !1);
                    else if ("smallToLarge" === this.effect) {
                        var p = parseInt(this.smallFont),
                            q = parseInt(this.largeFont),
                            r = q - p,
                            s = Math.ceil(this.text.length / 2),
                            t = r / this.text.length,
                            u = p + i * t;
                        this.letters.item(i).set("fontSize", u), this.letters.item(i).set("left", k), k += this.letters.item(i).get("width"), this.letters.item(i).set("padding", 0), this.letters.item(i).set("selectable", !1), this.letters.item(i).set("top", -1 * this.letters.item(i).get("fontSize") + i)
                    } else if ("largeToSmallTop" === this.effect) {
                        var p = parseInt(this.largeFont),
                            q = parseInt(this.smallFont),
                            r = q - p,
                            s = Math.ceil(this.text.length / 2),
                            t = r / this.text.length,
                            u = p + i * t;
                        this.letters.item(i).set("fontSize", u), this.letters.item(i).set("left", k), k += this.letters.item(i).get("width"), this.letters.item(i).set("padding", 0), this.letters.item(i).set({
                            borderColor: "red",
                            cornerColor: "green",
                            cornerSize: 6,
                            transparentCorners: !1
                        }), this.letters.item(i).set("padding", 0), this.letters.item(i).set("selectable", !1), this.letters.item(i).top = -1 * this.letters.item(i).get("fontSize") + i / this.text.length
                    } else if ("largeToSmallBottom" === this.effect) {
                        var p = parseInt(this.largeFont),
                            q = parseInt(this.smallFont),
                            r = q - p,
                            s = Math.ceil(this.text.length / 2),
                            t = r / this.text.length,
                            u = p + i * t;
                        this.letters.item(i).set("fontSize", u), this.letters.item(i).set("left", k), k += this.letters.item(i).get("width"), this.letters.item(i).set("padding", 0), this.letters.item(i).set({
                            borderColor: "red",
                            cornerColor: "green",
                            cornerSize: 6,
                            transparentCorners: !1
                        }), this.letters.item(i).set("padding", 0), this.letters.item(i).set("selectable", !1), this.letters.item(i).top = -1 * this.letters.item(i).get("fontSize") - i
                    } else if ("bulge" === this.effect) {
                        var p = parseInt(this.smallFont),
                            q = parseInt(this.largeFont),
                            r = q - p,
                            s = Math.ceil(this.text.length / 2),
                            t = r / (this.text.length - s);
                        if (s > i) var u = p + i * t;
                        else var u = q - (i - s + 1) * t;
                        this.letters.item(i).set("fontSize", u), this.letters.item(i).set("left", k), k += this.letters.item(i).get("width"), this.letters.item(i).set("padding", 0), this.letters.item(i).set("selectable", !1), this.letters.item(i).set("top", -1 * this.letters.item(i).get("height") / 2)
                    }
                }
                var v = this.letters.get("scaleX"),
                    w = this.letters.get("scaleY"),
                    x = this.letters.get("angle");
                this.letters.set("scaleX", 1), this.letters.set("scaleY", 1), this.letters.set("angle", 0), this.letters._calcBounds(), this.letters._updateObjectsCoords(), this.letters.saveCoords(), this.letters.set("scaleX", v), this.letters.set("scaleY", w), this.letters.set("angle", x), this.width = this.letters.width, this.height = this.letters.height, this.letters.left = -(this.letters.width / 2), this.letters.top = -(this.letters.height / 2)
            }
        },
        _renderOld: function() {
            if (this.letters) {
                var a = 0,
                    b = 0,
                    c = 0,
                    d = 0;
                this.reverse && (d = .5), "center" === this.get("textAlign") || "justify" === this.get("textAlign") ? c = this.spacing / 2 * (this.text.length - d) : "right" === this.get("textAlign") && (c = this.spacing * (this.text.length - d));
                for (var e = this.reverse ? 1 : -1, f = 0, g = this.text.length; g > f; f++) {
                    a = e * (-f * parseInt(this.spacing, 10) + c), b = a * (Math.PI / 180);
                    for (var h in this.delegatedProperties) this.letters.item(f).set(h, this.get(h));
                    this.letters.item(f).set("top", e - Math.cos(b) * this.radius), this.letters.item(f).set("left", e + Math.sin(b) * this.radius), this.letters.item(f).setAngle(a), this.letters.item(f).set("padding", 0), this.letters.item(f).set("selectable", !1)
                }
                this.letters._calcBounds(), this.letters.top = this.reverse ? this.letters.top - 2.5 * this.height : 0, this.letters.left = this.letters.left - this.width / 2, this.letters.saveCoords(), this.width = this.letters.width, this.height = this.letters.height, this.letters.left = -(this.letters.width / 2), this.letters.top = -(this.letters.height / 2)
            }
        },
        render: function(a) {
            if (this.visible && this.letters) {
                a.save(), this.transform(a); {
                    Math.max(this.scaleX, this.scaleY)
                }
                this.clipTo && b.util.clipContext(this, a);
                for (var c = 0, d = this.letters.size(); d > c; c++) {
                    {
                        var e = this.letters.item(c);
                        e.borderScaleFactor, e.hasRotatingPoint
                    }
                    e.visible && e.render(a)
                }
                this.clipTo && a.restore(), a.restore(), this.setCoords()
            }
        },
        _set: function(a, b) {
            this.callSuper("_set", a, b), this.letters && (this.letters.set(a, b), a in this._dimensionAffectingProps && (this._initDimensions(), this.setCoords()))
        },
        toObject: function(a) {
            var b = c(this.callSuper("toObject", a), {
                radius: this.radius,
                spacing: this.spacing,
                reverse: this.reverse,
                effect: this.effect,
                range: this.range,
                smallFont: this.smallFont,
                largeFont: this.largeFont
            });
            return this.includeDefaultValues || this._removeDefaultValues(b), b
        },
        toString: function() {
            return "#<fabric.CurvedText (" + this.complexity() + '): { "text": "' + this.text + '", "fontFamily": "' + this.fontFamily + '", "radius": "' + this.radius + '", "spacing": "' + this.spacing + '", "reverse": "' + this.reverse + '" }>'
        },
        toSVG: function(a) {
            var b = ["<g ", 'transform="', this.getSvgTransform(), '">'];
            if (this.letters)
                for (var c = 0, d = this.letters.size(); d > c; c++) b.push(this.letters.item(c).toSVG(a));
            return b.push("</g>"), a ? a(b.join("")) : b.join("")
        }
    }), b.CurvedText.fromObject = function(a) {
        return new b.CurvedText(a.text, d(a))
    }, b.util.createAccessors(b.CurvedText), b.CurvedText.async = !1
}("undefined" != typeof exports ? exports : this),
    function(a, b) {
        function c(a) {
            return a.call.apply(a.bind, arguments)
        }

        function d(a, b) {
            if (!a) throw Error();
            if (2 < arguments.length) {
                var c = Array.prototype.slice.call(arguments, 2);
                return function() {
                    var d = Array.prototype.slice.call(arguments);
                    return Array.prototype.unshift.apply(d, c), a.apply(b, d)
                }
            }
            return function() {
                return a.apply(b, arguments)
            }
        }

        function e() {
            return e = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? c : d, e.apply(null, arguments)
        }

        function f(a, b) {
            this.K = a, this.w = b || a, this.G = this.w.document
        }

        function g(a, c, d) {
            a = a.G.getElementsByTagName(c)[0], a || (a = b.documentElement), a && a.lastChild && a.insertBefore(d, a.lastChild)
        }

        function h(a, b) {
            function c() {
                a.G.body ? b() : setTimeout(c, 0)
            }
            c()
        }

        function i(a, b, c) {
            b = b || [], c = c || [];
            for (var d = a.className.split(/\s+/), e = 0; e < b.length; e += 1) {
                for (var f = !1, g = 0; g < d.length; g += 1)
                    if (b[e] === d[g]) {
                        f = !0;
                        break
                    }
                f || d.push(b[e])
            }
            for (b = [], e = 0; e < d.length; e += 1) {
                for (f = !1, g = 0; g < c.length; g += 1)
                    if (d[e] === c[g]) {
                        f = !0;
                        break
                    }
                f || b.push(d[e])
            }
            a.className = b.join(" ").replace(/\s+/g, " ").replace(/^\s+|\s+$/, "")
        }

        function j(a, b) {
            for (var c = a.className.split(/\s+/), d = 0, e = c.length; e > d; d++)
                if (c[d] == b) return !0;
            return !1
        }

        function k(a) {
            if ("string" == typeof a.na) return a.na;
            var b = a.w.location.protocol;
            return "about:" == b && (b = a.K.location.protocol), "https:" == b ? "https:" : "http:"
        }

        function l(a, b) {
            var c = a.createElement("link", {
                    rel: "stylesheet",
                    href: b,
                    media: "all"
                }),
                d = !1;
            c.onload = function() {
                d || (d = !0)
            }, c.onerror = function() {
                d || (d = !0)
            }, g(a, "head", c)
        }

        function m(b, c, d, e) {
            var f = b.G.getElementsByTagName("head")[0];
            if (f) {
                var g = b.createElement("script", {
                        src: c
                    }),
                    h = !1;
                return g.onload = g.onreadystatechange = function() {
                    h || this.readyState && "loaded" != this.readyState && "complete" != this.readyState || (h = !0, d && d(null), g.onload = g.onreadystatechange = null, "HEAD" == g.parentNode.tagName && f.removeChild(g))
                }, f.appendChild(g), a.setTimeout(function() {
                    h || (h = !0, d && d(Error("Script load timeout")))
                }, e || 5e3), g
            }
            return null
        }

        function n(a, b) {
            this.Y = a, this.ga = b
        }

        function o(a, b, c, d) {
            this.c = null != a ? a : null, this.g = null != b ? b : null, this.D = null != c ? c : null, this.e = null != d ? d : null
        }

        function p(a) {
            a = Z.exec(a);
            var b = null,
                c = null,
                d = null,
                e = null;
            return a && (null !== a[1] && a[1] && (b = parseInt(a[1], 10)), null !== a[2] && a[2] && (c = parseInt(a[2], 10)), null !== a[3] && a[3] && (d = parseInt(a[3], 10)), null !== a[4] && a[4] && (e = /^[0-9]+$/.test(a[4]) ? parseInt(a[4], 10) : a[4])), new o(b, c, d, e)
        }

        function q(a, b, c, d, e, f, g, h) {
            this.N = a, this.k = h
        }

        function r(a) {
            this.a = a
        }

        function s(a) {
            var b = v(a.a, /(iPod|iPad|iPhone|Android|Windows Phone|BB\d{2}|BlackBerry)/, 1);
            return "" != b ? (/BB\d{2}/.test(b) && (b = "BlackBerry"), b) : (a = v(a.a, /(Linux|Mac_PowerPC|Macintosh|Windows|CrOS|PlayStation|CrKey)/, 1), "" != a ? ("Mac_PowerPC" == a ? a = "Macintosh" : "PlayStation" == a && (a = "Linux"), a) : "Unknown")
        }

        function t(a) {
            var b = v(a.a, /(OS X|Windows NT|Android) ([^;)]+)/, 2);
            if (b || (b = v(a.a, /Windows Phone( OS)? ([^;)]+)/, 2)) || (b = v(a.a, /(iPhone )?OS ([\d_]+)/, 2))) return b;
            if (b = v(a.a, /(?:Linux|CrOS|CrKey) ([^;)]+)/, 1))
                for (var b = b.split(/\s/), c = 0; c < b.length; c += 1)
                    if (/^[\d\._]+$/.test(b[c])) return b[c];
            return (a = v(a.a, /(BB\d{2}|BlackBerry).*?Version\/([^\s]*)/, 2)) ? a : "Unknown"
        }

        function u(a) {
            var b = s(a),
                c = p(t(a)),
                d = p(v(a.a, /AppleWeb(?:K|k)it\/([\d\.\+]+)/, 1)),
                e = "Unknown",
                f = new o,
                f = "Unknown",
                g = !1;
            return /OPR\/[\d.]+/.test(a.a) ? e = "Opera" : -1 != a.a.indexOf("Chrome") || -1 != a.a.indexOf("CrMo") || -1 != a.a.indexOf("CriOS") ? e = "Chrome" : /Silk\/\d/.test(a.a) ? e = "Silk" : "BlackBerry" == b || "Android" == b ? e = "BuiltinBrowser" : -1 != a.a.indexOf("PhantomJS") ? e = "PhantomJS" : -1 != a.a.indexOf("Safari") ? e = "Safari" : -1 != a.a.indexOf("AdobeAIR") ? e = "AdobeAIR" : -1 != a.a.indexOf("PlayStation") && (e = "BuiltinBrowser"), "BuiltinBrowser" == e ? f = "Unknown" : "Silk" == e ? f = v(a.a, /Silk\/([\d\._]+)/, 1) : "Chrome" == e ? f = v(a.a, /(Chrome|CrMo|CriOS)\/([\d\.]+)/, 2) : -1 != a.a.indexOf("Version/") ? f = v(a.a, /Version\/([\d\.\w]+)/, 1) : "AdobeAIR" == e ? f = v(a.a, /AdobeAIR\/([\d\.]+)/, 1) : "Opera" == e ? f = v(a.a, /OPR\/([\d.]+)/, 1) : "PhantomJS" == e && (f = v(a.a, /PhantomJS\/([\d.]+)/, 1)), f = p(f), g = "AdobeAIR" == e ? 2 < f.c || 2 == f.c && 5 <= f.g : "BlackBerry" == b ? 10 <= c.c : "Android" == b ? 2 < c.c || 2 == c.c && 1 < c.g : 526 <= d.c || 525 <= d.c && 13 <= d.g, new q(e, 0, 0, 0, 0, 0, 0, new n(g, 536 > d.c || 536 == d.c && 11 > d.g))
        }

        function v(a, b, c) {
            return (a = a.match(b)) && a[c] ? a[c] : ""
        }

        function w(a) {
            this.ma = a || "-"
        }

        function x(a, b) {
            this.N = a, this.Z = 4, this.O = "n";
            var c = (b || "n4").match(/^([nio])([1-9])$/i);
            c && (this.O = c[1], this.Z = parseInt(c[2], 10))
        }

        function y(a) {
            return a.O + a.Z
        }

        function z(a) {
            var b = 4,
                c = "n",
                d = null;
            return a && ((d = a.match(/(normal|oblique|italic)/i)) && d[1] && (c = d[1].substr(0, 1).toLowerCase()), (d = a.match(/([1-9]00|normal|bold)/i)) && d[1] && (/bold/i.test(d[1]) ? b = 7 : /[1-9]00/.test(d[1]) && (b = parseInt(d[1].substr(0, 1), 10)))), c + b
        }

        function A(a, b) {
            this.d = a, this.q = a.w.document.documentElement, this.Q = b, this.j = "wf", this.h = new w("-"), this.ha = !1 !== b.events, this.F = !1 !== b.classes
        }

        function B(a) {
            if (a.F) {
                var b = j(a.q, a.h.e(a.j, "active")),
                    c = [],
                    d = [a.h.e(a.j, "loading")];
                b || c.push(a.h.e(a.j, "inactive")), i(a.q, c, d)
            }
            C(a, "inactive")
        }

        function C(a, b, c) {
            a.ha && a.Q[b] && (c ? a.Q[b](c.getName(), y(c)) : a.Q[b]())
        }

        function D() {
            this.C = {}
        }

        function E(a, b) {
            this.d = a, this.I = b, this.o = this.d.createElement("span", {
                "aria-hidden": "true"
            }, this.I)
        }

        function F(a, b) {
            var c, d = a.o;
            c = [];
            for (var e = b.N.split(/,\s*/), f = 0; f < e.length; f++) {
                var g = e[f].replace(/['"]/g, "");
                c.push(-1 == g.indexOf(" ") ? g : "'" + g + "'")
            }
            c = c.join(","), e = "normal", "o" === b.O ? e = "oblique" : "i" === b.O && (e = "italic"), d.style.cssText = "display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:" + c + ";" + ("font-style:" + e + ";font-weight:" + (b.Z + "00") + ";")
        }

        function G(a) {
            g(a.d, "body", a.o)
        }

        function H(a, b, c, d, e, f, g, h) {
            this.$ = a, this.ka = b, this.d = c, this.m = d, this.k = e, this.I = h || "BESbswy", this.v = {}, this.X = f || 3e3, this.ca = g || null, this.H = this.u = this.t = null, this.t = new E(this.d, this.I), this.u = new E(this.d, this.I), this.H = new E(this.d, this.I), F(this.t, new x("serif", y(this.m))), F(this.u, new x("sans-serif", y(this.m))), F(this.H, new x("monospace", y(this.m))), G(this.t), G(this.u), G(this.H), this.v.serif = this.t.o.offsetWidth, this.v["sans-serif"] = this.u.o.offsetWidth, this.v.monospace = this.H.o.offsetWidth
        }

        function I(a, b, c) {
            for (var d in _)
                if (_.hasOwnProperty(d) && b === a.v[_[d]] && c === a.v[_[d]]) return !0;
            return !1
        }

        function J(a) {
            var b = a.t.o.offsetWidth,
                c = a.u.o.offsetWidth;
            b === a.v.serif && c === a.v["sans-serif"] || a.k.ga && I(a, b, c) ? Y() - a.oa >= a.X ? a.k.ga && I(a, b, c) && (null === a.ca || a.ca.hasOwnProperty(a.m.getName())) ? L(a, a.$) : L(a, a.ka) : K(a) : L(a, a.$)
        }

        function K(a) {
            setTimeout(e(function() {
                J(this)
            }, a), 50)
        }

        function L(a, b) {
            a.t.remove(), a.u.remove(), a.H.remove(), b(a.m)
        }

        function M(a, b, c, d) {
            this.d = b, this.A = c, this.S = 0, this.ea = this.ba = !1, this.X = d, this.k = a.k
        }

        function N(a, b, c, d, f) {
            if (c = c || {}, 0 === b.length && f) B(a.A);
            else
                for (a.S += b.length, f && (a.ba = f), f = 0; f < b.length; f++) {
                    var g = b[f],
                        h = c[g.getName()],
                        j = a.A,
                        k = g;
                    j.F && i(j.q, [j.h.e(j.j, k.getName(), y(k).toString(), "loading")]), C(j, "fontloading", k), j = null, j = new H(e(a.ia, a), e(a.ja, a), a.d, g, a.k, a.X, d, h), j.start()
                }
        }

        function O(a) {
            0 == --a.S && a.ba && (a.ea ? (a = a.A, a.F && i(a.q, [a.h.e(a.j, "active")], [a.h.e(a.j, "loading"), a.h.e(a.j, "inactive")]), C(a, "active")) : B(a.A))
        }

        function P(a) {
            this.K = a, this.B = new D, this.pa = new r(a.navigator.userAgent), this.a = this.pa.parse(), this.U = this.V = 0, this.R = this.T = !0
        }

        function Q(a, b, c, d, e) {
            var f = 0 == --a.V;
            (a.R || a.T) && setTimeout(function() {
                N(b, c, d || null, e || null, f)
            }, 0)
        }

        function R(a, b, c) {
            this.P = a ? a : b + aa, this.s = [], this.W = [], this.fa = c || ""
        }

        function S(a) {
            this.s = a, this.da = [], this.M = {}
        }

        function T(a, b) {
            this.a = new r(navigator.userAgent).parse(), this.d = a, this.f = b
        }

        function U(a, b) {
            this.d = a, this.f = b, this.p = []
        }

        function V(a, b) {
            this.d = a, this.f = b, this.p = []
        }

        function W(a, b) {
            this.d = a, this.f = b, this.p = []
        }

        function X(a, b) {
            this.d = a, this.f = b
        }
        var Y = Date.now || function() {
                return +new Date
            };
        f.prototype.createElement = function(a, b, c) {
            if (a = this.G.createElement(a), b)
                for (var d in b) b.hasOwnProperty(d) && ("style" == d ? a.style.cssText = b[d] : a.setAttribute(d, b[d]));
            return c && a.appendChild(this.G.createTextNode(c)), a
        };
        var Z = /^([0-9]+)(?:[\._-]([0-9]+))?(?:[\._-]([0-9]+))?(?:[\._+-]?(.*))?$/;
        o.prototype.compare = function(a) {
            return this.c > a.c || this.c === a.c && this.g > a.g || this.c === a.c && this.g === a.g && this.D > a.D ? 1 : this.c < a.c || this.c === a.c && this.g < a.g || this.c === a.c && this.g === a.g && this.D < a.D ? -1 : 0
        }, o.prototype.toString = function() {
            return [this.c, this.g || "", this.D || "", this.e || ""].join("")
        }, q.prototype.getName = function() {
            return this.N
        };
        var $ = new q("Unknown", 0, 0, 0, 0, 0, 0, new n(!1, !1));
        r.prototype.parse = function() {
            var a;
            if (-1 != this.a.indexOf("MSIE") || -1 != this.a.indexOf("Trident/")) {
                a = s(this);
                var b = p(t(this)),
                    c = null,
                    d = v(this.a, /Trident\/([\d\w\.]+)/, 1),
                    c = p(-1 != this.a.indexOf("MSIE") ? v(this.a, /MSIE ([\d\w\.]+)/, 1) : v(this.a, /rv:([\d\w\.]+)/, 1));
                "" != d && p(d), a = new q("MSIE", 0, 0, 0, 0, 0, 0, new n("Windows" == a && 6 <= c.c || "Windows Phone" == a && 8 <= b.c, !1))
            } else if (-1 != this.a.indexOf("Opera")) a: if (a = p(v(this.a, /Presto\/([\d\w\.]+)/, 1)), p(t(this)), null !== a.c || p(v(this.a, /rv:([^\)]+)/, 1)), -1 != this.a.indexOf("Opera Mini/")) a = p(v(this.a, /Opera Mini\/([\d\.]+)/, 1)), a = new q("OperaMini", 0, 0, 0, s(this), 0, 0, new n(!1, !1));
            else {
                if (-1 != this.a.indexOf("Version/") && (a = p(v(this.a, /Version\/([\d\.]+)/, 1)), null !== a.c)) {
                    a = new q("Opera", 0, 0, 0, s(this), 0, 0, new n(10 <= a.c, !1));
                    break a
                }
                a = p(v(this.a, /Opera[\/ ]([\d\.]+)/, 1)), a = null !== a.c ? new q("Opera", 0, 0, 0, s(this), 0, 0, new n(10 <= a.c, !1)) : new q("Opera", 0, 0, 0, s(this), 0, 0, new n(!1, !1))
            } else /OPR\/[\d.]+/.test(this.a) ? a = u(this) : /AppleWeb(K|k)it/.test(this.a) ? a = u(this) : -1 != this.a.indexOf("Gecko") ? (a = "Unknown", b = new o, p(t(this)), b = !1, -1 != this.a.indexOf("Firefox") ? (a = "Firefox", b = p(v(this.a, /Firefox\/([\d\w\.]+)/, 1)), b = 3 <= b.c && 5 <= b.g) : -1 != this.a.indexOf("Mozilla") && (a = "Mozilla"), c = p(v(this.a, /rv:([^\)]+)/, 1)), b || (b = 1 < c.c || 1 == c.c && 9 < c.g || 1 == c.c && 9 == c.g && 2 <= c.D), a = new q(a, 0, 0, 0, s(this), 0, 0, new n(b, !1))) : a = $;
            return a
        }, w.prototype.e = function() {
            for (var a = [], b = 0; b < arguments.length; b++) a.push(arguments[b].replace(/[\W_]+/g, "").toLowerCase());
            return a.join(this.ma)
        }, x.prototype.getName = function() {
            return this.N
        }, E.prototype.remove = function() {
            var a = this.o;
            a.parentNode && a.parentNode.removeChild(a)
        };
        var _ = {
            sa: "serif",
            ra: "sans-serif",
            qa: "monospace"
        };
        H.prototype.start = function() {
            this.oa = Y(), F(this.t, new x(this.m.getName() + ",serif", y(this.m))), F(this.u, new x(this.m.getName() + ",sans-serif", y(this.m))), J(this)
        }, M.prototype.ia = function(a) {
            var b = this.A;
            b.F && i(b.q, [b.h.e(b.j, a.getName(), y(a).toString(), "active")], [b.h.e(b.j, a.getName(), y(a).toString(), "loading"), b.h.e(b.j, a.getName(), y(a).toString(), "inactive")]), C(b, "fontactive", a), this.ea = !0, O(this)
        }, M.prototype.ja = function(a) {
            var b = this.A;
            if (b.F) {
                var c = j(b.q, b.h.e(b.j, a.getName(), y(a).toString(), "active")),
                    d = [],
                    e = [b.h.e(b.j, a.getName(), y(a).toString(), "loading")];
                c || d.push(b.h.e(b.j, a.getName(), y(a).toString(), "inactive")), i(b.q, d, e)
            }
            C(b, "fontinactive", a), O(this)
        }, P.prototype.load = function(a) {
            this.d = new f(this.K, a.context || this.K), this.T = !1 !== a.events, this.R = !1 !== a.classes;
            var b = new A(this.d, a),
                c = [],
                d = a.timeout;
            b.F && i(b.q, [b.h.e(b.j, "loading")]), C(b, "loading");
            var g, c = this.B,
                h = this.d,
                j = [];
            for (g in a)
                if (a.hasOwnProperty(g)) {
                    var k = c.C[g];
                    k && j.push(k(a[g], h))
                }
            for (c = j, this.U = this.V = c.length, a = new M(this.a, this.d, b, d), d = 0, g = c.length; g > d; d++) h = c[d], h.L(this.a, e(this.la, this, h, b, a))
        }, P.prototype.la = function(a, b, c, d) {
            var e = this;
            d ? a.load(function(a, b, d) {
                Q(e, c, a, b, d)
            }) : (a = 0 == --this.V, this.U--, a && 0 == this.U ? B(b) : (this.R || this.T) && N(c, [], {}, null, a))
        };
        var aa = "//fonts.googleapis.com/css";
        R.prototype.e = function() {
            if (0 == this.s.length) throw Error("No fonts to load!");
            if (-1 != this.P.indexOf("kit=")) return this.P;
            for (var a = this.s.length, b = [], c = 0; a > c; c++) b.push(this.s[c].replace(/ /g, "+"));

            return a = this.P + "?family=" + b.join("%7C"), 0 < this.W.length && (a += "&subset=" + this.W.join(",")), 0 < this.fa.length && (a += "&text=" + encodeURIComponent(this.fa)), a
        };
        var ba = {
                latin: "BESbswy",
                cyrillic: "&#1081;&#1103;&#1046;",
                greek: "&#945;&#946;&#931;",
                khmer: "&#x1780;&#x1781;&#x1782;",
                Hanuman: "&#x1780;&#x1781;&#x1782;"
            },
            ca = {
                thin: "1",
                extralight: "2",
                "extra-light": "2",
                ultralight: "2",
                "ultra-light": "2",
                light: "3",
                regular: "4",
                book: "4",
                medium: "5",
                "semi-bold": "6",
                semibold: "6",
                "demi-bold": "6",
                demibold: "6",
                bold: "7",
                "extra-bold": "8",
                extrabold: "8",
                "ultra-bold": "8",
                ultrabold: "8",
                black: "9",
                heavy: "9",
                l: "3",
                r: "4",
                b: "7"
            },
            da = {
                i: "i",
                italic: "i",
                n: "n",
                normal: "n"
            },
            ea = /^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;
        S.prototype.parse = function() {
            for (var a = this.s.length, b = 0; a > b; b++) {
                var c = this.s[b].split(":"),
                    d = c[0].replace(/\+/g, " "),
                    e = ["n4"];
                if (2 <= c.length) {
                    var f, g = c[1];
                    if (f = [], g)
                        for (var g = g.split(","), h = g.length, i = 0; h > i; i++) {
                            var j;
                            if (j = g[i], j.match(/^[\w-]+$/)) {
                                j = ea.exec(j.toLowerCase());
                                var k = void 0;
                                if (null == j) k = "";
                                else {
                                    if (k = void 0, k = j[1], null == k || "" == k) k = "4";
                                    else var l = ca[k],
                                        k = l ? l : isNaN(k) ? "4" : k.substr(0, 1);
                                    j = j[2], k = [null == j || "" == j ? "n" : da[j], k].join("")
                                }
                                j = k
                            } else j = "";
                            j && f.push(j)
                        }
                    0 < f.length && (e = f), 3 == c.length && (c = c[2], f = [], c = c ? c.split(",") : f, 0 < c.length && (c = ba[c[0]]) && (this.M[d] = c))
                }
                for (this.M[d] || (c = ba[d]) && (this.M[d] = c), c = 0; c < e.length; c += 1) this.da.push(new x(d, e[c]))
            }
        };
        var fa = {
            Arimo: !0,
            Cousine: !0,
            Tinos: !0
        };
        T.prototype.L = function(a, b) {
            b(a.k.Y)
        }, T.prototype.load = function(a) {
            var b = this.d;
            "MSIE" == this.a.getName() && 1 != this.f.blocking ? h(b, e(this.aa, this, a)) : this.aa(a)
        }, T.prototype.aa = function(a) {
            for (var b = this.d, c = new R(this.f.api, k(b), this.f.text), d = this.f.families, e = d.length, f = 0; e > f; f++) {
                var g = d[f].split(":");
                3 == g.length && c.W.push(g.pop());
                var h = "";
                2 == g.length && "" != g[1] && (h = ":"), c.s.push(g.join(h))
            }
            d = new S(d), d.parse(), l(b, c.e()), a(d.da, d.M, fa)
        }, U.prototype.J = function(a) {
            var b = this.d;
            return k(this.d) + (this.f.api || "//f.fontdeck.com/s/css/js/") + (b.w.location.hostname || b.K.location.hostname) + "/" + a + ".js"
        }, U.prototype.L = function(a, b) {
            var c = this.f.id,
                d = this.d.w,
                e = this;
            c ? (d.__webfontfontdeckmodule__ || (d.__webfontfontdeckmodule__ = {}), d.__webfontfontdeckmodule__[c] = function(a, c) {
                for (var d = 0, f = c.fonts.length; f > d; ++d) {
                    var g = c.fonts[d];
                    e.p.push(new x(g.name, z("font-weight:" + g.weight + ";font-style:" + g.style)))
                }
                b(a)
            }, m(this.d, this.J(c), function(a) {
                a && b(!1)
            })) : b(!1)
        }, U.prototype.load = function(a) {
            a(this.p)
        }, V.prototype.J = function(a) {
            var b = k(this.d);
            return (this.f.api || b + "//use.typekit.net") + "/" + a + ".js"
        }, V.prototype.L = function(a, b) {
            var c = this.f.id,
                d = this.d.w,
                e = this;
            c ? m(this.d, this.J(c), function(a) {
                if (a) b(!1);
                else {
                    if (d.Typekit && d.Typekit.config && d.Typekit.config.fn) {
                        a = d.Typekit.config.fn;
                        for (var c = 0; c < a.length; c += 2)
                            for (var f = a[c], g = a[c + 1], h = 0; h < g.length; h++) e.p.push(new x(f, g[h]));
                        try {
                            d.Typekit.load({
                                events: !1,
                                classes: !1
                            })
                        } catch (i) {}
                    }
                    b(!0)
                }
            }, 2e3) : b(!1)
        }, V.prototype.load = function(a) {
            a(this.p)
        }, W.prototype.L = function(a, b) {
            var c = this,
                d = c.f.projectId,
                e = c.f.version;
            if (d) {
                var f = c.d.w;
                m(this.d, c.J(d, e), function(e) {
                    if (e) b(!1);
                    else {
                        if (f["__mti_fntLst" + d] && (e = f["__mti_fntLst" + d]()))
                            for (var g = 0; g < e.length; g++) c.p.push(new x(e[g].fontfamily));
                        b(a.k.Y)
                    }
                }).id = "__MonotypeAPIScript__" + d
            } else b(!1)
        }, W.prototype.J = function(a, b) {
            var c = k(this.d),
                d = (this.f.api || "fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/, "");
            return c + "//" + d + "/" + a + ".js" + (b ? "?v=" + b : "")
        }, W.prototype.load = function(a) {
            a(this.p)
        }, X.prototype.load = function(a) {
            var b, c, d = this.f.urls || [],
                e = this.f.families || [],
                f = this.f.testStrings || {};
            for (b = 0, c = d.length; c > b; b++) l(this.d, d[b]);
            for (d = [], b = 0, c = e.length; c > b; b++) {
                var g = e[b].split(":");
                if (g[1])
                    for (var h = g[1].split(","), i = 0; i < h.length; i += 1) d.push(new x(g[0], h[i]));
                else d.push(new x(g[0]))
            }
            a(d, f)
        }, X.prototype.L = function(a, b) {
            return b(a.k.Y)
        };
        var ga = new P(this);
        ga.B.C.custom = function(a, b) {
            return new X(b, a)
        }, ga.B.C.fontdeck = function(a, b) {
            return new U(b, a)
        }, ga.B.C.monotype = function(a, b) {
            return new W(b, a)
        }, ga.B.C.typekit = function(a, b) {
            return new V(b, a)
        }, ga.B.C.google = function(a, b) {
            return new T(b, a)
        }, this.WebFont || (this.WebFont = {}, this.WebFont.load = e(ga.load, ga), this.WebFontConfig && ga.load(this.WebFontConfig))
    }(this, document), fabric.Object.prototype._drawControl = function(a, b, c, d, e) {
    var f = this.cornerSize,
        g = 4,
        h = f - 2 * g,
        i = .5 * f,
        j = 10;
    if (i = j = 0, this._fpdOffset = i, this._fpdOffsetCorner = j, this.isControlVisible(a)) {
        var k = this._calculateCurrentDimensions(),
            l = k.x,
            m = !1;
        if ("br" == a || "mtr" == a || "tl" == a || "bl" == a) switch (a) {
            case "tl":
                d = d - i + j, e = e - i + j, m = this.__editorMode || this.copyable ? String.fromCharCode("0xe623") : !1;
                break;
            case "mtr":
                d = d + l / 2 + i - j, e = e - i + j, m = this.__editorMode || this.rotatable ? String.fromCharCode("0xe923") : !1;
                break;
            case "br":
                d = d + i - j, e = e + i - j, m = this.__editorMode || this.resizable ? String.fromCharCode("0xe922") : !1;
                break;
            case "bl":
                d = d - i + j, e = e + i - j, m = this.__editorMode || this.removable ? String.fromCharCode("0xe926") : !1
        }
        this.transparentCorners || b.clearRect(d, e, f, f), m !== !1 && (b.fillStyle = this.cornerColor, b.fillRect(d, e, f, f), b.font = h + "px FontFPD", b.fillStyle = this.cornerIconColor, b.textAlign = "left", b.textBaseline = "top", b.fillText(m, d + g, e + g), b[c](d, e, f, f))
    }
}, fabric.Object.prototype.findTargetCorner = function(a) {
    if (!this.hasControls || !this.active) return !1;
    var b, c, d = a.x,
        e = a.y;
    this.__corner = 0;
    for (var f in this.oCoords)
        if (this.isControlVisible(f) && ("mtr" !== f || this.hasRotatingPoint) && (!this.get("lockUniScaling") || "mt" !== f && "mr" !== f && "mb" !== f && "ml" !== f)) {
            c = this._getImageLines(this.oCoords[f].corner);
            var g = this.canvas.getZoom() ? this.canvas.getZoom() : 1;
            if (b = this._findCrossPoints({
                    x: d * g,
                    y: e * g
                }, c), 0 !== b && b % 2 === 1) return this.__corner = f, f
        }
    return !1
}, fabric.Object.prototype.setCoords = function() {
    var a = fabric.util.degreesToRadians(this.angle),
        b = this.getViewportTransform(),
        c = this._calculateCurrentDimensions(),
        d = this._fpdOffset ? this._fpdOffset : 0,
        e = this._fpdOffsetCorner ? this._fpdOffsetCorner : 0,
        d = e = 0,
        f = c.x + 2 * (d - e),
        g = c.y + 2 * (d - e);
    0 > f && (f = Math.abs(f));
    var h = Math.sin(a),
        i = Math.cos(a),
        j = f > 0 ? Math.atan(g / f) : 0,
        k = f / Math.cos(j) / 2,
        l = Math.cos(j + a) * k,
        m = Math.sin(j + a) * k,
        n = fabric.util.transformPoint(this.getCenterPoint(), b),
        o = new fabric.Point(n.x - l, n.y - m),
        p = new fabric.Point(o.x + f * i, o.y + f * h),
        q = new fabric.Point(o.x - g * h, o.y + g * i),
        r = new fabric.Point(n.x + l, n.y + m),
        s = new fabric.Point((o.x + q.x) / 2, (o.y + q.y) / 2),
        t = new fabric.Point((p.x + o.x) / 2, (p.y + o.y) / 2),
        u = new fabric.Point((r.x + p.x) / 2, (r.y + p.y) / 2),
        v = new fabric.Point((r.x + q.x) / 2, (r.y + q.y) / 2),
        w = new fabric.Point(p.x + h * this.rotatingPointOffset, p.y - i * this.rotatingPointOffset);
    return this.oCoords = {
        tl: o,
        tr: p,
        br: r,
        bl: q,
        ml: s,
        mt: t,
        mr: u,
        mb: v,
        mtr: w
    }, this._setCornerCoords && this._setCornerCoords(), this
}, fabric.Canvas.prototype._getRotatedCornerCursor = function(a, b) {
    var c = Math.round(b.getAngle() % 360 / 45),
        d = {
            mt: 0,
            tr: 1,
            mr: 2,
            br: 3,
            mb: 4,
            bl: 5,
            ml: 6,
            tl: 7
        };
    switch (0 > c && (c += 8), c += d[a], c %= 8, a) {
        case "tl":
            return b.copyable ? "copy" : "default";
        case "bl":
            return "pointer"
    }
    return this.cursorMap[c]
};
var FPDUtil = {
        isIE: function() {
            var a = navigator.userAgent.toLowerCase();
            return -1 !== a.indexOf("msie") ? parseInt(a.split("msie")[1]) : !1
        },
        rekeyDeprecatedKeys: function(a) {
            for (var b = [{
                old: "x",
                replace: "left"
            }, {
                old: "y",
                replace: "top"
            }, {
                old: "degree",
                replace: "angle"
            }, {
                old: "currentColor",
                replace: "fill"
            }, {
                old: "filters",
                replace: "availableFilters"
            }, {
                old: "textSize",
                replace: "fontSize"
            }, {
                old: "font",
                replace: "fontFamily"
            }, {
                old: "scale",
                replace: ["scaleX", "scaleY"]
            }], c = 0; c < b.length; ++c)
                if (a.hasOwnProperty(b[c].old) && !a.hasOwnProperty(b[c].replace)) {
                    var d = b[c].replace;
                    if ("object" == typeof d)
                        for (var e = 0; e < d.length; ++e) a[d[e]] = a[b[c].old];
                    else a[b[c].replace] = a[b[c].old];
                    delete a[b[c].old]
                }
            return a
        },
        log: function(a, b) {
            return "undefined" == typeof console ? !1 : void("info" === b ? console.info(a) : "error" === b ? console.error(a) : "warn" === b ? console.warn(a) : console.log(a))
        },
        isUrl: function(a) {
            var b = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;
            return b.test(a)
        },
        removeFromArray: function(a, b) {
            var c = a.indexOf(b);
            return c > -1 && a.splice(c, 1), a
        },
        isXML: function(a) {
            try {
                return xmlDoc = jQuery.parseXML(a), !0
            } catch (b) {
                return !1
            }
        },
        elementIsColorizable: function(a) {
            if ("text" === this.getType(a.type)) return "text";
            var b = a.source.split(".");
            if (1 == b.length) return -1 == b[0].search("data:image/png;") ? (a.fill = a.colors = !1, !1) : "dataurl";
            var c = a.source;
            return c = c.split("?")[0], b = c.split("."), -1 == $.inArray("png", b) && -1 == $.inArray("svg", b) ? (a.fill = a.colors = !1, !1) : -1 == $.inArray("svg", b) ? "png" : "svg"
        },
        getType: function(a) {
            return "text" === a || "i-text" === a || "curvedText" === a ? "text" : "image"
        },
        updateTooltip: function(a) {
            $tooltips = a ? a.find(".fpd-tooltip") : $(".fpd-tooltip"), $tooltips.each(function(a, b) {
                var c = $(b);
                c.tooltipster(c.hasClass("tooltipstered") ? "reposition" : {
                    offsetY: 0,
                    position: "bottom",
                    theme: ".fpd-tooltip-theme",
                    touchDevices: !1
                })
            })
        },
        arrayUnique: function(a) {
            for (var b = a.concat(), c = 0; c < b.length; ++c)
                for (var d = c + 1; d < b.length; ++d) b[c] === b[d] && b.splice(d--, 1);
            return b
        },
        createScrollbar: function(a) {
            a.hasClass("mCustomScrollbar") ? a.mCustomScrollbar("scrollTo", 0) : a.mCustomScrollbar({
                scrollbarPosition: "outside",
                autoExpandScrollbar: !0,
                autoHideScrollbar: !0,
                scrollInertia: 200,
                axis: "y",
                callbacks: {
                    onTotalScrollOffset: 100,
                    onTotalScroll: function() {
                        $(this).trigger("_sbOnTotalScroll"), FPDUtil.refreshLazyLoad($(this).find(".fpd-grid"), !0)
                    }
                }
            })
        },
        notEmpty: function(a) {
            return void 0 === a || a === !1 || 0 === a.length ? !1 : !0
        },
        showModal: function(a, b, c) {
            c = void 0 === c ? "" : c;
            var d = $("body").addClass("fpd-overflow-hidden"),
                e = b ? "fpd-fullscreen" : "";
            return html = '<div class="fpd-modal-internal fpd-modal-overlay"><div class="fpd-modal-wrapper fpd-shadow-3"><div class="fpd-modal-close"><span class="fpd-icon-close"></span></div><div class="fpd-modal-content"></div></div></div>', 0 === $(".fpd-modal-internal").size() && d.append(html).children(".fpd-modal-internal:first").click(function(a) {
                $target = $(a.target), $target.hasClass("fpd-modal-overlay") && $target.find(".fpd-modal-close").click()
            }), "prompt" === c && (a = '<input placeholder="' + a + '" /><span class="fpd-btn"></span>'), d.children(".fpd-modal-internal").attr("data-type", c).removeClass("fpd-fullscreen").addClass(e).fadeIn(300).find(".fpd-modal-content").html(a), d.children(".fpd-modal-internal")
        },
        showMessage: function(a) {
            var b, c = $("body");
            b = c.children(".fpd-snackbar-internal").size() > 0 ? c.children(".fpd-snackbar") : c.append('<div class="fpd-snackbar-internal fpd-snackbar fpd-shadow-1"><p></p></div>').children(".fpd-snackbar-internal"), b.removeClass("fpd-show-up").children("p").html(a).parent().addClass("fpd-show-up"), setTimeout(function() {
                b.removeClass("fpd-show-up")
            }, 5e3)
        },
        loadGridImage: function(a, b) {
            if (a.size() > 0 && b) {
                a.addClass("fpd-on-loading");
                var c = new Image;
                c.src = b, c.onload = function() {
                    a.attr("data-img", "").removeClass("fpd-on-loading").fadeOut(0).stop().fadeIn(200).css("background-image", 'url("' + this.src + '")')
                }
            }
        },
        refreshLazyLoad: function(a, b) {
            if (a && a.size() > 0 && a.is(":visible"))
                for (var c = a.children(".fpd-item.fpd-hidden:first"), d = 0, e = b ? 15 : 0;
                     (e > d || a.parent(".mCSB_container").height() - 150 < a.parents(".fpd-scroll-area:first").height()) && c.size() > 0;) {
                    var f = c.children("picture");
                    c.removeClass("fpd-hidden"), FPDUtil.loadGridImage(f, f.data("img")), c = c.next(".fpd-item.fpd-hidden"), d++
                }
        },
        parseFabricObjectToFPDElement: function(a) {
            if (!a) return {};
            var b = new FancyProductDesignerOptions,
                c = Object.keys(b.defaults.elementParameters),
                d = Object.keys("text" === FPDUtil.getType(a.type) ? b.defaults.textParameters : b.defaults.imageParameters);
            c = $.merge(c, d);
            for (var e = {}, f = 0; f < c.length; ++f) {
                var g = c[f];
                void 0 !== a[g] && (e[g] = a[g])
            }
            return {
                type: FPDUtil.getType(a.type),
                source: a.source,
                title: a.title,
                parameters: e
            }
        },
        popupBlockerAlert: function(a) {
            (null == a || "undefined" == typeof a) && FPDUtil.showModal("Please disable your pop-up blocker and try again.")
        },
        getScalingByDimesions: function(a, b, c, d, e) {
            e = "undefined" == typeof e ? "fit" : e;
            var f = 1;
            return "cover" === e ? b > a ? a > c && (f = c / a) : a == b ? f = c > d ? c / a : d / b : b > d && (f = d / b) : a > b ? (a > c && (f = c / a), f * b > d && (f = d / b)) : (b > d && (f = d / b), f * a > c && (f = c / a)), f.toFixed(2)
        },
        localStorageAvailable: function() {
            localStorageAvailable = !0;
            try {
                window.localStorage.length, window.localStorage.setItem("fpd-storage", "just-testing")
            } catch (a) {
                localStorageAvailable = !1
            }
            return localStorageAvailable
        },
        checkImageDimensions: function(a, b, c) {
            var d = a.currentViewInstance.options.customImageParameters;
            if (b > d.maxW || b < d.minW || c > d.maxH || c < d.minH) {
                var e = a.getTranslation("misc", "uploaded_image_size_alert").replace("%minW", d.minW).replace("%minH", d.minH).replace("%maxW", d.maxW).replace("%maxH", d.maxH);
                return FPDUtil.showModal(e), !1
            }
            return !0
        },
        elementHasColorSelection: function(a) {
            return (Array.isArray(a.colors) || Boolean(a.colors) || a.colorLinkGroup) && FPDUtil.elementIsColorizable(a) !== !1
        },
        elementAvailableColors: function(a, b) {
            var c = [];
            if ("path-group" == a.type) {
                c = [];
                for (var d = 0; d < a.paths.length; ++d) {
                    var e = a.paths[d],
                        f = tinycolor(e.fill);
                    c.push(f.toHexString())
                }
            } else c = a.colorLinkGroup ? b.colorLinkGroups[a.colorLinkGroup].colors : a.colors;
            return c
        },
        changePathColor: function(a, b, c) {
            for (var d = [], e = 0; e < a.paths.length; ++e) {
                var f = a.paths[e],
                    g = tinycolor(f.fill);
                d.push(g.toHexString())
            }
            return d[b] = c.toHexString(), d
        },
        isHex: function(a) {
            return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)
        }
    },
    FancyProductDesignerOptions = function() {
        this.defaults = {
            stageWidth: 900,
            stageHeight: 600,
            editorMode: !1,
            editorBoxParameters: ["left", "top", "angle", "fill", "width", "height", "fontSize", "price"],
            fonts: ["Arial", "Helvetica", "Times New Roman", "Verdana", "Geneva"],
            templatesDirectory: "",
            patterns: [],
            facebookAppId: "",
            instagramClientId: "",
            instagramRedirectUri: "",
            zoomStep: .2,
            maxZoom: 3,
            hexNames: {},
            selectedColor: "#f5f5f5",
            boundingBoxColor: "#005ede",
            outOfBoundaryColor: "#990000",
            replaceInitialElements: !1,
            lazyLoad: !0,
            templatesType: "html",
            customImageAjaxSettings: {
                url: "php/custom-image-handler.php",
                method: "POST",
                dataType: "json",
                data: {
                    saveOnServer: 0,
                    uploadsDir: "./uploads",
                    uploadsDirURL: "http://yourdomain.com/uploads"
                }
            },
            improvedResizeQuality: !1,
            responsive: !0,
            cornerIconColor: "#000000",
            langJSON: "lang/default.json",
            colorPickerPalette: [],
            actions: {
                top: [],
                right: [],
                bottom: [],
                left: []
            },
            mainBarModules: ["products", "images", "text", "designs", "manage-layers"],
            initialActiveModule: "",
            maxValues: {},
            watermark: !1,
            gridColumns: 2,
            priceFormat: "&#36;%d",
            mainBarContainer: !1,
            modalMode: !1,
            keyboardControl: !0,
            deselectActiveOnOutside: !0,
            uploadZonesTopped: !0,
            loadFirstProductInStage: !0,
            unsavedProductAlert: !1,
            elementParameters: {
                z: -1,
                price: 0,
                colors: !1,
                removable: !1,
                draggable: !1,
                rotatable: !1,
                resizable: !1,
                copyable: !1,
                zChangeable: !1,
                boundingBox: !1,
                boundingBoxMode: "inside",
                autoCenter: !1,
                replace: "",
                replaceInAllViews: !1,
                autoSelect: !1,
                topped: !1,
                colorPrices: {},
                colorLinkGroup: !1,
                originX: "center",
                originY: "center",
                cornerSize: 24,
                fill: !1,
                lockUniScaling: !0,
                pattern: !1,
                top: 0,
                left: 0,
                angle: 0,
                flipX: !1,
                flipY: !1,
                opacity: 1,
                scaleX: 1,
                scaleY: 1
            },
            textParameters: {
                patternable: !1,
                maxLength: 0,
                curved: !1,
                curvable: !1,
                curveSpacing: 10,
                curveRadius: 80,
                curveReverse: !1,
                maxLines: 0,
                editable: !0,
                fontFamily: "Arial",
                fontSize: 18,
                lineHeight: 1,
                fontWeight: "normal",
                fontStyle: "normal",
                textDecoration: "normal",
                padding: 10,
                textAlign: "left",
                stroke: null,
                strokeWidth: 1
            },
            imageParameters: {
                uploadZone: !1,
                filter: !1,
                availableFilters: [],
                uploadZoneScaleMode: "fit",
                uniScalingUnlockable: !1,
                padding: 0
            },
            customImageParameters: {
                minW: 100,
                minH: 100,
                maxW: 1500,
                maxH: 1500,
                resizeToW: 300,
                resizeToH: 300,
                minDPI: 72,
                maxSize: 10
            },
            customTextParameters: {},
            customAdds: {
                designs: !0,
                uploads: !0,
                texts: !0
            }
        }, this.merge = function(a, b) {
            var c = $.extend({}, a, b);
            return c.elementParameters = $.extend({}, a.elementParameters, c.elementParameters), c.textParameters = $.extend({}, a.textParameters, c.textParameters), c.imageParameters = $.extend({}, a.imageParameters, c.imageParameters), c.customTextParameters = $.extend({}, a.customTextParameters, c.customTextParameters), c.customImageParameters = $.extend({}, a.customImageParameters, c.customImageParameters), c.customAdds = $.extend({}, a.customAdds, c.customAdds), c.customImageAjaxSettings = $.extend({}, a.customImageAjaxSettings, c.customImageAjaxSettings), c
        }, this.getParameterKeys = function() {
            var a = Object.keys(this.defaults.elementParameters),
                b = Object.keys(this.defaults.imageParameters),
                c = Object.keys(this.defaults.textParameters);
            return a = a.concat(b), a = a.concat(c)
        }
    },
    FancyProductDesignerView = function(a, b, c) {
        var d, e = $(this),
            f = this,
            g = new fabric.Point(0, 0),
            h = !1,
            i = !1,
            j = null,
            k = null,
            l = {},
            m = new FancyProductDesignerOptions,
            n = function() {
                f.title = b.title, f.thumbnail = b.thumbnail, f.elements = b.elements, f.options = b.options, f.undos = [], f.redos = [], f.totalPrice = 0, f.zoom = 1, f.responsiveScale = 1, f.currentElement = null, f.currentBoundingObject = null, f.currentUploadZone = null, f.stage = null, f.propertiesToInclude = ["_isInitial", "lockMovementX", "lockMovementY", "lockRotation", "lockScalingX", "lockScalingY", "lockScalingFlip", "lockUniScaling", "resizeType", "clipTo", "clippingRect", "boundingBox", "boundingBoxMode", "selectable", "evented", "title", "editable", "cornerColor", "cornerIconColor", "borderColor", "isEditable", "hasUploadZone"], f.dragStage = !1, f.options.width && (f.options.stageWidth = f.options.width, delete f.options.width), a.append("<canvas></canvas>"), e.on("elementAdd", function(a, b) {
                    q(), !b.isCustom || b.hasUploadZone || b.replace || (b.copyable = !0, f.stage.renderAll())
                });
                var c = a.children("canvas:last").get(0);
                if (f.stage = new fabric.Canvas(c, {
                        containerClass: "fpd-view-stage fpd-hidden",
                        selection: !1,
                        hoverCursor: "pointer",
                        controlsAboveOverlay: !0,
                        centeredScaling: !0
                    }).on({
                        "object:added": function(a) {
                            var b = a.target;
                            void 0 === b.price || 0 === b.price || b.uploadZone || (f.totalPrice += b.price, b.setCoords(), e.trigger("priceChange", [b.price, f.totalPrice]))
                        },
                        "object:removed": function(a) {
                            var b = a.target;
                            void 0 === b.price || 0 === b.price || b.uploadZone || (f.totalPrice -= b.price, e.trigger("priceChange", [b.price, f.totalPrice]))
                        }
                    }), f.stage.setDimensions({
                        width: f.options.stageWidth,
                        height: f.options.stageHeight
                    }), 1 !== window.devicePixelRatio) {
                    var d = f.stage.getElement();
                    d.setAttribute("width", f.options.stageWidth * window.devicePixelRatio), d.setAttribute("height", f.options.stageHeight * window.devicePixelRatio), d.getContext("2d").scale(window.devicePixelRatio, window.devicePixelRatio)
                }
            },
            o = function() {
                c.call(c, f), i = !0, f.options.keyboardControl && $(document).on("keydown", function(a) {
                    var b = $(a.target);
                    if (f.currentElement && !b.is('textarea,input[type="text"]')) {
                        switch (a.which) {
                            case 8:
                                f.currentElement.removable && f.removeElement(f.currentElement);
                                break;
                            case 37:
                                f.currentElement.draggable && f.setElementParameters({
                                    left: f.currentElement.left - 1
                                });
                                break;
                            case 38:
                                f.currentElement.draggable && f.setElementParameters({
                                    top: f.currentElement.top - 1
                                });
                                break;
                            case 39:
                                f.currentElement.draggable && f.setElementParameters({
                                    left: f.currentElement.left + 1
                                });
                                break;
                            case 40:
                                f.currentElement.draggable && f.setElementParameters({
                                    top: f.currentElement.top + 1
                                });
                                break;
                            default:
                                return
                        }
                        a.preventDefault()
                    }
                }), f.stage.on({
                    "mouse:over": function(a) {
                        f.stage.hoverCursor = f.currentElement && f.currentElement.draggable && a.target === f.currentElement ? "move" : "pointer"
                    },
                    "mouse:down": function(a) {
                        if (d = f.stage.getPointer(a.e), h = !0, void 0 == a.target) f.deselectElement();
                        else {
                            var b = f.stage.getPointer(a.e),
                                c = a.target.findTargetCorner(b);
                            if (j = f.getElementJSON(), "bl" == c && f.currentElement.removable && f.removeElement(f.currentElement), "tl" == c && f.currentElement.copyable && !f.currentElement.hasUploadZone) {
                                var e = f.getElementJSON();
                                e.autoCenter = !0, f.addElement(FPDUtil.getType(f.currentElement.type), f.currentElement.source, "Copy " + f.currentElement.title, e)
                            }
                        }
                    },
                    "mouse:up": function() {
                        h = !1
                    },
                    "mouse:move": function(a) {
                        if (h && f.dragStage) {
                            var b = f.stage.getPointer(a.e),
                                c = g.x + b.x - d.x,
                                e = g.y + b.y - d.y;
                            f.stage.relativePan(new fabric.Point(c, e))
                        }
                    },
                    "text:changed": function(a) {
                        f.setElementParameters({
                            text: a.target.text
                        })
                    },
                    "object:moving": function(a) {
                        k = "moving", r(a.target), e.trigger("elementChange", [k, a.target])
                    },
                    "object:scaling": function(a) {
                        k = "scaling", r(a.target), e.trigger("elementChange", [k, a.target])
                    },
                    "object:rotating": function(a) {
                        k = "rotating", r(a.target), e.trigger("elementChange", [k, a.target])
                    },
                    "object:modified": function(a) {
                        if (j && (p({
                                element: a.target,
                                parameters: j,
                                interaction: "modify"
                            }), j = null), "text" === FPDUtil.getType(a.target.type) && "curvedText" !== a.target.type && (a.target.fontSize *= a.target.scaleX, a.target.fontSize = Number(Number(a.target.fontSize).toFixed(0)), a.target.scaleX = 1, a.target.scaleY = 1, a.target._clearCache()), null !== k) {
                            var b = {};
                            switch (k) {
                                case "moving":
                                    b.left = Number(a.target.left), b.top = Number(a.target.top);
                                    break;
                                case "scaling":
                                    "text" === FPDUtil.getType(a.target.type) && "curvedText" !== a.target.type ? b.fontSize = Number(a.target.fontSize) : (b.scaleX = Number(a.target.scaleX), b.scaleY = Number(a.target.scaleY));
                                    break;
                                case "rotating":
                                    b.angle = a.target.angle
                            }
                            e.trigger("elementModify", [a.target, b])
                        }
                        k = null
                    },
                    "object:selected": function(a) {
                        if (f.deselectElement(!1), f.dragStage) return f.deselectElement(), !1;
                        if (f.currentElement = a.target, e.trigger("elementSelect", [f.currentElement]), f.currentElement.setControlVisible("tr", !1), f.currentElement.set({
                                borderColor: f.options.selectedColor,
                                rotatingPointOffset: 0
                            }), f.stage.hoverCursor = f.currentElement.draggable ? "move" : "pointer", f.currentElement.boundingBox && !f.options.editorMode) {
                            var b = f.getBoundingBoxCoords(a.target);
                            b && (f.currentBoundingObject = new fabric.Rect({
                                left: b.left,
                                top: b.top,
                                width: b.width,
                                height: b.height,
                                stroke: f.options.boundingBoxColor,
                                strokeWidth: 1,
                                strokeDashArray: [5, 5],
                                fill: !1,
                                selectable: !1,
                                evented: !1,
                                originX: "left",
                                originY: "top",
                                name: "bounding-box"
                            }), f.stage.add(f.currentBoundingObject), f.currentBoundingObject.bringToFront(), e.trigger("boundingBoxToggle", [f.currentBoundingObject, !0])), r(a.target)
                        }
                    }
                })
            },
            p = function(a, b, c) {
                c = "undefined" == typeof c ? !0 : c, a && (f.undos.push(a), f.undos.length > 20 && f.undos.shift()), b && f.redos.push(b), c && e.trigger("undoRedoSet", [f.undos, f.redos])
            },
            q = function() {
                for (var a = f.stage.getObjects(), b = [], c = 0; c < a.length; ++c) {
                    var d = a[c];
                    (d.topped || d.uploadZone) && f.options.uploadZonesTopped && b.push(d)
                }
                for (var c = 0; c < b.length; ++c) b[c].bringToFront();
                f.currentBoundingObject && f.currentBoundingObject.bringToFront(), f.stage.renderAll()
            },
            r = function(a) {
                if (f.currentBoundingObject && !a.hasUploadZone)
                    if (a.setCoords(), "limitModify" === a.boundingBoxMode) {
                        var b = a.getBoundingRect(),
                            c = f.currentBoundingObject.getBoundingRect(),
                            d = c.left,
                            g = c.left + c.width - b.width;
                        minY = c.top, maxY = c.top + c.height - b.height, a.isContainedWithinObject(f.currentBoundingObject) ? l = {
                            left: a.left,
                            top: a.top,
                            angle: a.angle,
                            scaleX: a.scaleX,
                            scaleY: a.scaleY
                        } : (0 === a.__corner && (b.left > d && b.left < g && (l.left = a.left), b.top > minY && b.top < maxY && (l.top = a.top)), a.setOptions(l)), e.trigger("elementCheckContainemt", [a, "limitModify"])
                    } else if ("inside" === a.boundingBoxMode) {
                        var h = !1,
                            i = a.isOut;
                        h = !a.isContainedWithinObject(f.currentBoundingObject), h ? (a.borderColor = f.options.outOfBoundaryColor, a.isOut = !0) : (a.borderColor = f.options.selectedColor, a.isOut = !1), i != a.isOut && void 0 != i && (h ? e.trigger("elementOut", [a]) : e.trigger("elementIn", [a])), e.trigger("elementCheckContainemt", [a, "inside"])
                    }
                f.stage.renderAll()
            },
            s = function(a, b, c, d) {
                var e = a.getCenterPoint(),
                    g = e.x,
                    h = e.y;
                b && (g = d ? d.left + .5 * d.width : .5 * f.options.stageWidth), c && (h = d ? d.top + .5 * d.height : .5 * f.options.stageHeight), a.setPositionByOrigin(new fabric.Point(g, h), "center", "center"), f.stage.renderAll(), a.setCoords(), r(a)
            },
            t = function(a, b) {
                WebFont.load({
                    custom: {
                        families: [a]
                    },
                    fontactive: function() {
                        $("body").mouseup(), f.stage.renderAll(), b && (b.setFontSize(b._tempFontSize), b.setCoords(), f.stage.renderAll())
                    }
                })
            },
            u = function(a, b) {
                if (a.colorPrices && "object" == typeof a.colors && a.colors.length > 1) {
                    if (void 0 !== a.currentColorPrice && (a.price -= a.currentColorPrice, f.totalPrice -= a.currentColorPrice), "string" == typeof b) {
                        var c = b.replace("#", "");
                        if (a.colorPrices.hasOwnProperty(c) || a.colorPrices.hasOwnProperty(c.toUpperCase())) {
                            var d = void 0 === a.colorPrices[c] ? a.colorPrices[c.toUpperCase()] : a.colorPrices[c];
                            a.currentColorPrice = d, a.price += a.currentColorPrice, f.totalPrice += a.currentColorPrice
                        } else a.currentColorPrice = 0
                    } else a.currentColorPrice = 0;
                    e.trigger("priceChange", [a.price, f.totalPrice])
                }
            },
            v = function(a, b) {
                if ("image" == a.type);
                else if ("text" === FPDUtil.getType(a.type))
                    if (b) fabric.util.loadImage(b, function(b) {
                        a.setFill(new fabric.Pattern({
                            source: b,
                            repeat: "repeat"
                        })), f.stage.renderAll()
                    });
                    else {
                        var c = a.fill ? a.fill : a.colors[0];
                        c = c ? c : "#000000", a.setFill(c)
                    }
            },
            w = function(a) {
                var b = f.getBoundingBoxCoords(a) || a.clippingRect;
                b && (a.clippingRect = b, a.setClipTo(function(a) {
                    x(a, this)
                }))
            },
            x = function(a, b, c) {
                c = void 0 === c ? 1 : c;
                var d = b.getCenterPoint(),
                    e = b.clippingRect,
                    f = 1 / b.scaleX,
                    g = 1 / b.scaleY;
                a.save(), a.translate(0, 0), a.rotate(fabric.util.degreesToRadians(-1 * b.angle)), a.scale(f, g), a.beginPath(), a.rect(e.left - d.x, e.top - d.y, e.width * c, e.height * c), a.fillStyle = "transparent", a.fill(), a.closePath(), a.restore()
            },
            y = function(a) {
                switch (a) {
                    case "grayscale":
                        return new fabric.Image.filters.Grayscale;
                    case "sepia":
                        return new fabric.Image.filters.Sepia;
                    case "sepia2":
                        return new fabric.Image.filters.Sepia2
                }
                return null
            },
            z = function(a) {
                if (a && a.hasUploadZone) {
                    for (var b = f.stage.getObjects(), c = !0, d = 0; d < b.length; ++d) {
                        var e = b[d];
                        if (e.replace == a.replace) {
                            c = !1;
                            break
                        }
                    }
                    var g = f.getUploadZone(a.replace);
                    g && (g.opacity = c ? 1 : 0, g.evented = c), f.stage.renderAll()
                }
            },
            A = function() {
                FPDUtil.showModal("Error: Please make sure that the images are hosted under the same domain and protocol, in which you are using the product designer!")
            };
        this.getElementByID = function(a) {
            for (var b = f.stage.getObjects(), c = 0; c < b.length; ++c)
                if (b[c].id == a) return b[c];
            return !1
        }, this.addElement = function(a, b, c, d) {
            if (void 0 !== a && void 0 !== b && void 0 !== c) {
                if (d = "undefined" != typeof d ? d : {}, "object" != typeof d) return FPDUtil.showModal("The element " + c + " does not have a valid JSON object as parameters! Please check the syntax, maybe you set quotes wrong."), !1;
                "string" == typeof d.fill || $.isArray(d.fill) || (d.fill = !1), d = FPDUtil.rekeyDeprecatedKeys(d), d = "text" === FPDUtil.getType(a) ? $.extend({}, f.options.elementParameters, f.options.textParameters, d) : $.extend({}, f.options.elementParameters, f.options.imageParameters, d);
                if (d.colors && "string" == typeof d.colors && 0 == d.colors.indexOf("#")) {
                    var g = d.colors.replace(/\s+/g, "").split(",");
                    d.colors = g
                }
                if (d._isInitial = !i, "text" === FPDUtil.getType(a)) {
                    var h = d.colors[0] ? d.colors[0] : "#000000";
                    d.fill = d.fill ? d.fill : h
                }
                var j = {
                    source: b,
                    title: c,
                    id: String((new Date).getTime()),
                    cornerColor: f.options.cornerColor ? f.options.cornerColor : f.options.selectedColor,
                    cornerIconColor: f.options.cornerIconColor
                };
                if (d.__editorMode = f.options.editorMode, f.options.editorMode ? j.selectable = j.evented = j.draggable = j.removable = j.resizable = j.rotatable = j.zChangeable = j.copyable = j.lockUniScaling = !0 : $.extend(j, {
                        selectable: !1,
                        lockRotation: !0,
                        hasRotatingPoint: !1,
                        lockScalingX: !0,
                        lockScalingY: !0,
                        lockMovementX: !0,
                        lockMovementY: !0,
                        hasControls: !1,
                        evented: !1
                    }), j = $.extend({}, d, j), "image" == a || "path" == a || "path-group" == a) {
                    var k = function(a, b, c, d) {
                        d = void 0 === d ? {} : d, $.extend(b, {
                            crossOrigin: "anonymous",
                            originParams: $.extend({}, b, d)
                        }), a.setOptions(b), f.stage.add(a), f.setElementParameters(b, a, !1), a.originParams.angle = a.angle, a.originParams.z = f.getZIndex(a), f.options.improvedResizeQuality && !c && (a.resizeFilters.push(new fabric.Image.filters.Resize({
                            resizeType: "hermite"
                        })), a.fire("scaling")), a._isInitial || p({
                            element: a,
                            parameters: b,
                            interaction: "add"
                        }), e.trigger("elementAdd", [a])
                    };
                    if (void 0 === b || 0 === b.length) return void FPDUtil.log("No image source set for: " + c);
                    var l = b.split(".");
                    FPDUtil.isXML(b) ? fabric.loadSVGFromString(b, function(a, b) {
                        var c = fabric.util.groupSVGElements(a, b);
                        k(c, j, !0)
                    }) : -1 != $.inArray("svg", l) ? fabric.loadSVGFromURL(b, function(a, b) {
                        var c = fabric.util.groupSVGElements(a, b);
                        if (!d.fill) {
                            d.colors = [];
                            for (var e = 0; e < a.length; ++e) {
                                var f = tinycolor(a[e].fill);
                                d.colors.push(f.toHexString())
                            }
                            d.fill = d.colors
                        }
                        k(c, j, !0, {
                            fill: d.fill
                        })
                    }) : new fabric.Image.fromURL(b, function(a) {
                        k(a, j, !1)
                    })
                } else if ("text" === FPDUtil.getType(a)) {
                    b = b.replace(/\\n/g, "\n"), d.text = d.text ? d.text : b, $.extend(j, {
                        spacing: d.curveSpacing,
                        radius: d.curveRadius,
                        reverse: d.curveReverse,
                        originParams: $.extend({}, d)
                    });
                    var m = j.fontSize;
                    if (j._tempFontSize = m, j.fontSize = m + .01, d.curved) var n = new fabric.CurvedText(b, j);
                    else var n = new fabric.IText(b, j);
                    f.stage.add(n), f.setElementParameters(j, n, !1), n.originParams = $.extend({}, n.toJSON(), n.originParams), delete n.originParams.clipTo, n.originParams.z = f.getZIndex(n), n._isInitial || p({
                        element: n,
                        parameters: j,
                        interaction: "add"
                    }), e.trigger("elementAdd", [n])
                } else FPDUtil.showModal("Sorry. This type of element is not allowed!")
            }
        }, this.getElementByTitle = function(a) {
            for (var b = f.stage.getObjects(), c = 0; c < b.length; ++c)
                if (b[c].title == a) return b[c]
        }, this.deselectElement = function(a) {
            a = "undefined" == typeof a ? !0 : a, f.currentBoundingObject && (f.currentBoundingObject.remove(), e.trigger("boundingBoxToggle", [f.currentBoundingObject, !1]), f.currentBoundingObject = null), a && f.stage.discardActiveObject(), f.currentElement = null, f.stage.renderAll().calcOffset(), e.trigger("elementSelect", [null])
        }, this.removeElement = function(a) {
            "string" == typeof a && (a = f.getElementByTitle(a)), p({
                element: a,
                parameters: f.getElementJSON(a),
                interaction: "remove"
            }), f.stage.remove(a), z(a), e.trigger("elementRemove", [a]), this.deselectElement()
        }, this.setElementParameters = function(a, b, c) {
            if (b = "undefined" == typeof b ? f.stage.getActiveObject() : b, c = "undefined" == typeof c ? !0 : c, !b || void 0 === a) return !1;
            if ("string" == typeof b && (b = f.getElementByTitle(b)), c && i) {
                var d = f.getElementJSON();
                b._tempFill && (d.fill = b._tempFill, b._tempFill = void 0), p({
                    element: b,
                    parameters: d,
                    interaction: "modify"
                })
            }
            if (f.currentUploadZone && "" != f.currentUploadZone) {
                a.z = -1;
                var g = f.getElementByTitle(f.currentUploadZone),
                    h = FPDUtil.getScalingByDimesions(b.width, b.height, g.width * g.scaleX, g.height * g.scaleY, g.uploadZoneScaleMode);
                $.extend(a, {
                    boundingBox: f.currentUploadZone,
                    boundingBoxMode: "clipping",
                    scaleX: h,
                    scaleY: h,
                    autoCenter: !0,
                    removable: !0,
                    zChangeable: !1,
                    autoSelect: !0,
                    rotatable: g.rotatable,
                    draggable: g.draggable,
                    resizable: g.resizable,
                    price: g.price,
                    replace: f.currentUploadZone,
                    hasUploadZone: !0
                })
            }
            if (a.topped && (a.zChangeable = !1), ("object" == typeof a.colors || a.removable || a.draggable || a.resizable || a.rotatable || a.zChangeable || a.editable || a.patternable || a.uploadZone || a.colorLinkGroup && a.colorLinkGroup.length > 0) && (a.isEditable = a.evented = a.selectable = !0), (!a.uploadZone || f.options.editorMode) && (a.draggable && (a.lockMovementX = a.lockMovementY = !1), a.rotatable && (a.lockRotation = !1, a.hasRotatingPoint = !0), a.resizable && (a.lockScalingX = a.lockScalingY = !1), (a.resizable || a.rotatable || a.removable) && (a.hasControls = !0)), a.replace && "" != a.replace) {
                var j = f.getElementByReplace(a.replace);
                null !== j && j !== b && (a.z = f.getZIndex(j), a.left = j.left, a.top = j.top, a.autoCenter = !1, f.removeElement(j))
            }
            if (a.text) {
                var k = a.text;
                0 != b.maxLength && k.length > b.maxLength && (k = k.substr(0, b.maxLength), b.selectionStart = b.maxLength), 0 != b.maxLines && k.split("\n").length > b.maxLines && (k = k.replace(/([\s\S]*)\n/, "$1"), b.selectionStart = k.length), b.setText(k), a.text = k
            }
            if (delete a.paths, b.setOptions(a), a.autoCenter && f.centerElement(!0, !0, b), void 0 !== a.fill && (f.changeColor(b, a.fill), b.pattern = void 0), void 0 !== a.pattern && (v(b, a.pattern), u(b, a.pattern)), a.filter) {
                b.filters = [];
                var l = y(a.filter);
                null != l && b.filters.push(l), b.applyFilters(function() {
                    f.stage.renderAll()
                })
            }(a.boundingBox && "clipping" === a.boundingBoxMode || a.hasUploadZone) && w(b), a.z >= 0 && (b.moveTo(a.z), q()), void 0 !== a.fontFamily && t(a.fontFamily, b), b.curved && (a.curveRadius && b.set("radius", a.curveRadius), a.curveSpacing && b.set("spacing", a.curveSpacing), void 0 !== a.curveReverse && b.set("reverse", a.curveReverse)), b.uploadZone && (b.evented = 1 === b.opacity);
            for (var m = f.stage.getObjects(), n = 0; n < m.length; ++n) {
                var o = m[n];
                o.uploadZone && o.title == a.replace && (o.opacity = 0, o.evented = !1)
            }
            b.setCoords(), f.stage.renderAll().calcOffset(), e.trigger("elementModify", [b, a]), r(b), a.autoSelect && b.isEditable && !f.options.editorMode && setTimeout(function() {
                f.stage.setActiveObject(b), f.stage.renderAll()
            }, 1)
        }, this.getBoundingBoxCoords = function(a) {
            if (a.boundingBox || a.uploadZone) {
                if ("object" == typeof a.boundingBox) return {
                    left: a.boundingBox.x,
                    top: a.boundingBox.y,
                    width: a.boundingBox.width,
                    height: a.boundingBox.height
                };
                for (var b = f.stage.getObjects(), c = 0; c < b.length; ++c) {
                    var d = b[c];
                    if (a.boundingBox == d.title) {
                        var e = d.getPointByOrigin("left", "top");
                        return {
                            left: e.x,
                            top: e.y,
                            width: d.getWidth(),
                            height: d.getHeight()
                        }
                    }
                }
            }
            return !1
        }, this.toDataURL = function(a, b, c, d) {
            a = "undefined" != typeof a ? a : function() {}, b = "undefined" != typeof b ? b : "transparent", c = "undefined" != typeof c ? c : {}, d = "undefined" != typeof d ? d : !1, f.deselectElement(),
                f.stage.setDimensions({
                    width: f.options.stageWidth,
                    height: f.options.stageHeight
                }).setZoom(1), f.stage.setBackgroundColor(b, function() {
                d && (f.stage.add(d), d.center(), d.bringToFront());
                try {
                    a(f.stage.toDataURL(c))
                } catch (b) {
                    a(""), A()
                }
                d && f.stage.remove(d), $(f.stage.wrapperEl).is(":visible") && f.resetCanvasSize(), f.stage.setBackgroundColor("transparent", function() {
                    f.stage.renderAll()
                })
            })
        }, this.toSVG = function(a, b) {
            var c;
            f.deselectElement(), f.stage.setDimensions({
                width: f.options.stageWidth,
                height: f.options.stageHeight
            }).setZoom(1);
            try {
                c = f.stage.toSVG(a, b)
            } catch (d) {
                A()
            }
            return $(f.stage.wrapperEl).is(":visible") && f.resetCanvasSize(), $svg = $(c), $svg.children("rect").remove(), $svg.children("g").children('[style*="visibility: hidden"]').parent("g").remove(), c = $("<div>").append($svg.clone()).html().replace(/(?:\r\n|\r|\n)/g, "")
        }, this.clear = function() {
            f.undos = [], f.redos = [], f.elements = null, f.totalPrice = 0, f.stage.clear(), f.stage.wrapperEl.remove(), e.trigger("clear"), e.trigger("priceChange", [0, 0])
        }, this.undo = function() {
            if (f.undos.length > 0) {
                var a = f.undos.pop();
                "remove" === a.interaction ? (f.stage.add(a.element), a.interaction = "add") : "add" === a.interaction && (f.stage.remove(a.element), a.interaction = "remove"), p(!1, {
                    element: a.element,
                    parameters: f.getElementJSON(a.element),
                    interaction: a.interaction
                }), f.setElementParameters(a.parameters, a.element, !1), this.deselectElement(), z(a.element)
            }
            return f.undos
        }, this.redo = function() {
            if (f.redos.length > 0) {
                var a = f.redos.pop();
                "remove" === a.interaction ? (f.stage.add(a.element), a.interaction = "add") : "add" === a.interaction && (f.stage.remove(a.element), a.interaction = "remove"), p({
                    element: a.element,
                    parameters: f.getElementJSON(a.element),
                    interaction: a.interaction
                }), f.setElementParameters(a.parameters, a.element, !1), this.deselectElement(), z(a.element)
            }
            return f.redos
        }, this.getJSON = function() {
            var a = m.getParameterKeys();
            return a = a.concat(f.propertiesToInclude), f.stage.toJSON(a)
        }, this.resetCanvasSize = function() {
            f.responsiveScale = a.outerWidth() < f.options.stageWidth ? a.outerWidth() / f.options.stageWidth : 1, f.responsiveScale = Number(f.responsiveScale.toFixed(2)), f.responsiveScale = f.responsiveScale > 1 ? 1 : f.responsiveScale, f.options.responsive || (f.responsiveScale = 1), f.stage.setDimensions({
                width: a.width(),
                height: f.options.stageHeight * f.responsiveScale
            }).setZoom(f.responsiveScale).calcOffset().renderAll(), a.height(f.stage.height);
            var b = a.parents(".fpd-container:first");
            return b.size() > 0 && (b.height(b.hasClass("fpd-sidebar") ? f.stage.height : "auto"), b.width(b.hasClass("fpd-topbar") ? f.options.stageWidth : "auto")), f.responsiveScale
        }, this.getElementByReplace = function(a) {
            for (var b = f.stage.getObjects(), c = 0; c < b.length; ++c) {
                var d = b[c];
                if (d.replace === a) return d
            }
            return null
        }, this.getElementJSON = function(a, b) {
            if (a = "undefined" == typeof a ? f.stage.getActiveObject() : a, b = "undefined" == typeof b ? !1 : b, !a) return {};
            var c = Object.keys(f.options.elementParameters),
                d = Object.keys("text" === FPDUtil.getType(a.type) ? f.options.textParameters : f.options.imageParameters);
            if (c = $.merge(c, d), b && (c = $.merge(c, f.propertiesToInclude)), a.uploadZone && c.push("customAdds"), "text" === FPDUtil.getType(a.type) && c.push("text"), c.push("isEditable"), c.push("hasUploadZone"), c.push("clippingRect"), c.push("evented"), c.push("isCustom"), c = c.sort(), b) return a.toJSON(c);
            for (var e = {}, g = 0; g < c.length; ++g) {
                var h = c[g];
                void 0 !== a[h] && (e[h] = a[h])
            }
            return e
        }, this.centerElement = function(a, b, c) {
            c = "undefined" == typeof c ? f.stage.getActiveObject() : c, s(c, a, b, f.getBoundingBoxCoords(c)), c.autoCenter = !1
        }, this.alignElement = function(a, b) {
            b = "undefined" == typeof b ? f.stage.getActiveObject() : b;
            var c = b.getPointByOrigin("left", "top"),
                d = f.getBoundingBoxCoords(b),
                e = "left",
                g = "top";
            "left" === a ? (c.x = d ? d.left + 1 : 0, c.x += b.padding) : "top" === a ? (c.y = d ? d.top + 1 : 0, c.y += b.padding) : "right" === a ? (c.x = d ? d.left + d.width - b.padding : f.options.stageWidth, e = "right") : (c.y = d ? d.top + d.height - b.padding : f.options.stageHeight, g = "bottom"), b.setPositionByOrigin(c, e, g), f.stage.renderAll(), b.setCoords(), r(b)
        }, this.getZIndex = function(a) {
            a = "undefined" == typeof a ? f.stage.getActiveObject() : a;
            var b = f.stage.getObjects();
            return b.indexOf(a)
        }, this.changeColor = function(a, b, c, d) {
            if (c = "undefined" == typeof c ? !1 : c, d = "undefined" == typeof d ? !0 : d, "string" == typeof b && 4 == b.length && (b += b.substr(1, b.length)), "text" === FPDUtil.getType(a.type)) b = b === !1 ? "#000000" : b, a.setFill(b), f.stage.renderAll(), 0 == c && (a.pattern = null);
            else if ("path-group" == a.type && "object" == typeof b)
                for (var g = 0; g < b.length; ++g) a.paths[g].setFill(b[g]), f.stage.renderAll();
            else {
                var h = FPDUtil.elementIsColorizable(a);
                if ("png" == h || "dataurl" == h) {
                    a.filters = [], b !== !1 && a.filters.push(new fabric.Image.filters.Tint({
                        color: b
                    }));
                    try {
                        a.applyFilters(function() {
                            f.stage.renderAll()
                        })
                    } catch (i) {
                        A()
                    }
                } else "svg" == h && a.setFill(b)
            }
            0 == c && (a.fill = b), u(a, b), e.trigger("elementColorChange", [a, b, d])
        }, this.getIndex = function() {
            return a.children(".fpd-view-stage").index(f.stage.wrapperEl)
        }, this.getUploadZone = function(a) {
            for (var b = f.stage.getObjects(), c = 0; c < b.length; ++c)
                if (b[c].uploadZone && b[c].title == a) return b[c]
        }, this.setup = function() {
            function a(a) {
                if (void 0 === a.type || void 0 === a.source || void 0 === a.title) {
                    var c = f.elements.indexOf(a);
                    if (-1 !== c) return f.elements.splice(c, 1), FPDUtil.log("Element index " + c + " from instance.elements removed, its not a valid element object!", "info"), b(), !0
                }
                return !1
            }

            function b() {
                if (d++, d < f.elements.length) {
                    var c = f.elements[d];
                    a(c) || f.addElement(c.type, c.source, c.title, c.parameters)
                } else e.off("elementAdd", b), o()
            }
            var c = f.elements[0];
            if (c) {
                var d = 0;
                e.on("elementAdd", b), a(c) || f.addElement(c.type, c.source, c.title, c.parameters)
            } else o()
        }, n()
    },
    FPDToolbar = function(a, b) {
        var c = this,
            d = a.children(".fpd-sub-panel"),
            e = a.find(".fpd-color-wrapper"),
            f = a.find(".fpd-tool-font-family"),
            g = !1,
            h = !1;
        this.isTransforming = !1, $("body").append(a).mousedown(function(a) {
            $(a.target).parents(".fpd-range-slider").length > 0 && ($(a.target).parents(".fpd-range-slider").prev("input").change(), c.isTransforming = !0)
        }).mouseup(function() {
            c.isTransforming = !1
        });
        for (var i = Object.keys(b.mainOptions.maxValues), j = 0; j < i.length; ++j) {
            var k = i[j];
            a.find('[data-control="' + k + '"]').attr("max", b.mainOptions.maxValues[k])
        }
        if (a.find(".fpd-row > div").click(function() {
                var e = $(this);
                if (a.find(".fpd-row > div").not(e).removeClass("fpd-active"), e.data("panel")) {
                    e.tooltipster("hide"), e.toggleClass("fpd-active"), d.toggle(e.hasClass("fpd-active")).children().removeClass("fpd-active").filter(".fpd-panel-" + e.data("panel")).addClass("fpd-active");
                    var f = {
                        top: e.parent(".fpd-row").position().top + e.position().top + e.outerHeight(!0)
                    };
                    e.position().left > .5 * a.width() ? (f.right = 0, f.left = "auto") : (f.right = "auto", f.left = 0), d.css(f), c.updatePosition(b.currentElement)
                } else d.hide()
            }), d.find(".fpd-slider-range").rangeslider({
                polyfill: !1,
                rangeClass: "fpd-range-slider",
                disabledClass: "fpd-range-slider--disabled",
                horizontalClass: "fpd-range-slider--horizontal",
                verticalClass: "fpd-range-slider--vertical",
                fillClass: "fpd-range-slider__fill",
                handleClass: "fpd-range-slider__handle",
                onSlide: function(a, c) {
                    this.$element.parent().prev(".fpd-slider-number").val(c).change(), "scaleX" === this.$element.data("control") && b.currentElement && b.currentElement.lockUniScaling && d.find('.fpd-slider-number[data-control="scaleY"]').val(c).change()
                },
                onSlideEnd: function() {
                    c.isTransforming = !1, c.updatePosition(b.currentElement)
                }
            }), b.mainOptions.patterns && b.mainOptions.patterns.length > 0)
            for (var j = 0; j < b.mainOptions.patterns.length; ++j) {
                var l = b.mainOptions.patterns[j];
                d.find(".fpd-patterns > .fpd-grid").append('<div class="fpd-item" data-pattern="' + l + '"><picture style="background-image: url(' + l + ');"></picture></div>').children(":last").click(function() {
                    var c = $(this).data("pattern");
                    a.find(".fpd-current-fill").css("background", "url(" + c + ")"), b.currentViewInstance.setElementParameters({
                        pattern: c
                    })
                })
            }
        if (d.find(".fpd-filters .fpd-item").click(function() {
                var c = $(this);
                a.find(".fpd-current-fill").css("background", c.children("picture").css("background-image")), b.currentViewInstance.setElementParameters({
                    filter: c.data("filter")
                })
            }), d.find(".fpd-panel-position .fpd-icon-button-group > span").click(function() {
                var a = $(this);
                a.hasClass("fpd-align-left") ? b.currentViewInstance.alignElement("left") : a.hasClass("fpd-align-top") ? b.currentViewInstance.alignElement("top") : a.hasClass("fpd-align-right") ? b.currentViewInstance.alignElement("right") : a.hasClass("fpd-align-bottom") ? b.currentViewInstance.alignElement("bottom") : a.hasClass("fpd-align-center-h") ? b.currentViewInstance.centerElement(!0, !1) : a.hasClass("fpd-align-center-v") ? b.currentViewInstance.centerElement(!1, !0) : a.hasClass("fpd-flip-h") ? b.currentViewInstance.setElementParameters({
                    flipX: !b.currentElement.getFlipX()
                }) : a.hasClass("fpd-flip-v") && b.currentViewInstance.setElementParameters({
                    flipY: !b.currentElement.getFlipY()
                }), c.updatePosition(b.currentElement)
            }), a.find(".fpd-tool-move-up, .fpd-tool-move-down").click(function() {
                var a = b.currentViewInstance.getZIndex();
                a = $(this).hasClass("fpd-tool-move-up") ? a + 1 : a - 1, a = 0 > a ? 0 : a, b.currentViewInstance.setElementParameters({
                    z: a
                })
            }), a.find(".fpd-tool-reset").click(function() {
                a.find(".tooltipstered").tooltipster("destroy"), b.currentViewInstance.setElementParameters(b.currentElement.originParams), c.update(b.currentElement), FPDUtil.updateTooltip()
            }), b.mainOptions.fonts && b.mainOptions.fonts.length > 0) {
            b.mainOptions.fonts.sort();
            for (var j = 0; j < b.mainOptions.fonts.length; ++j) {
                var m = b.mainOptions.fonts[j];
                f.children(".fpd-dropdown-list").append('<span class="fpd-item" data-value="' + m + '">' + m + "</span>").children(":last").css("font-family", m)
            }
        } else f.hide();
        var n = null;
        d.find(".fpd-panel-edit-text textarea").keyup(function(a) {
            a.stopPropagation, a.preventDefault();
            var c = this.selectionStart,
                d = this.selectionEnd;
            b.currentViewInstance.currentElement.isEditing = !0, b.currentViewInstance.setElementParameters({
                text: this.value
            }), this.selectionStart = c, this.selectionEnd = d
        }).focus(function() {
            n = b.currentViewInstance.currentElement, n.isEditing = !0
        }).focusout(function() {
            n.isEditing = !1, n = null
        }), d.find(".fpd-panel-tabs > span").click(function() {
            var a = $(this);
            a.addClass("fpd-active").siblings().removeClass("fpd-active"), a.parent().nextAll(".fpd-panel-tabs-content").children('[data-id="' + this.id + '"]').addClass("fpd-active").siblings().removeClass("fpd-active")
        }), a.find(".fpd-number").change(function() {
            var d = $(this),
                e = {};
            this.value > Number(d.attr("max")) && (this.value = Number(d.attr("max"))), this.value < Number(d.attr("min")) && (this.value = Number(d.attr("min"))), d.hasClass("fpd-slider-number") && (d.next(".fpd-range-wrapper").children("input").val(this.value).rangeslider("update", !0, !1), "scaleX" === d.data("control") && b.currentElement && b.currentElement.lockUniScaling && a.find('[data-control="scaleY"]').val(this.value).change()), e[d.data("control")] = Number(this.value), b.currentViewInstance && b.currentViewInstance.setElementParameters(e, b.currentViewInstance.currentElement, !c.isTransforming)
        }), a.find(".fpd-toggle").click(function() {
            var a = $(this).toggleClass("fpd-enabled"),
                c = {};
            a.hasClass("fpd-curved-text-switcher") || (c[a.data("control")] = a.data(a.hasClass("fpd-enabled") ? "enabled" : "disabled"), a.hasClass("fpd-tool-uniscaling-locker") && s(a.hasClass("fpd-enabled")), b.currentViewInstance.setElementParameters(c))
        }), a.find(".fpd-dropdown .fpd-item").click(function() {
            {
                var a = $(this),
                    c = a.parent().prevAll(".fpd-dropdown-current:first"),
                    d = a.data("value"),
                    e = {};
                c.is("input") ? c.val(d) : c.html(a.clone()).data("value", d)
            }
            e[c.data("control")] = d, "fontFamily" === c.data("control") && c.css("font-family", d), b.currentViewInstance.setElementParameters(e), a.siblings(".fpd-item").show()
        }), a.find(".fpd-dropdown.fpd-search > input").keyup(function() {
            var a = $(this).css("font-family", "Helvetica").nextAll(".fpd-dropdown-list:first").children(".fpd-item").hide();
            0 === this.value.length ? a.show() : a.filter(':containsCaseInsensitive("' + this.value + '")').show()
        });
        var o = function(b, c) {
                c = void 0 === c ? !0 : c;
                var d = a.find(".fpd-tool-" + b).toggle(c);
                return d.parent(".fpd-row").toggle(Boolean(d.parent(".fpd-row").children('div[style*="block"]').length > 0)), d
            },
            p = function(a, b, c) {
                return c = Boolean(c), d.children(".fpd-panel-" + a).children(".fpd-tool-" + b).toggle(c)
            },
            q = function(a, b, c) {
                d.children(".fpd-panel-" + a).find(".fpd-panel-tabs #" + b).toggleClass("fpd-disabled", !c)
            },
            r = function(c) {
                a.find(".fpd-current-fill").css("background", c), b.currentViewInstance.changeColor(b.currentViewInstance.currentElement, c)
            },
            s = function(a) {
                d.find(".fpd-tool-uniscaling-locker > span").removeClass().addClass(a ? "fpd-icon-locked" : "fpd-icon-unlocked"), d.find(".fpd-tool-scaleY").toggleClass("fpd-disabled", a)
            };
        this.update = function(f) {
            if (this.hideTools(), o("reset"), f.availableFilters && f.availableFilters.length > 0 && "image" == f.type) {
                o("fill"), q("fill", "filter", !0), d.find(".fpd-filters .fpd-item:not(.fpd-filter-none)").addClass("fpd-hidden");
                for (var i = 0; i < f.availableFilters.length; ++i) {
                    var j = f.availableFilters[i];
                    d.find(".fpd-filter-" + j).removeClass("fpd-hidden")
                }
            }
            if (FPDUtil.elementHasColorSelection(f)) {
                if (h = !1, f.colorLinkGroup) var k = b.colorLinkGroups[f.colorLinkGroup].colors;
                else var k = f.colors;
                if (e.empty().removeClass("fpd-colorpicker-group"), "path-group" == f.type) {
                    for (var i = 0; i < f.paths.length; ++i) {
                        var l = f.paths[i],
                            m = tinycolor(l.fill);
                        e.append('<input type="text" value="' + m.toHexString() + '" />')
                    }
                    e.addClass("fpd-colorpicker-group").children("input").spectrum("destroy").spectrum({
                        showPaletteOnly: $.isArray(f.colors),
                        preferredFormat: "hex",
                        showInput: !0,
                        showInitial: !0,
                        showButtons: !1,
                        showPalette: b.mainOptions.colorPickerPalette && b.mainOptions.colorPickerPalette.length > 0,
                        palette: $.isArray(f.colors) ? f.colors : b.mainOptions.colorPickerPalette,
                        show: function(a) {
                            var c = FPDUtil.changePathColor(b.currentElement, e.children("input").index(this), a);
                            f._tempFill = c
                        },
                        move: function(a) {
                            var c = FPDUtil.changePathColor(b.currentElement, e.children("input").index(this), a);
                            b.currentViewInstance.changeColor(b.currentElement, c)
                        },
                        change: function(a) {
                            var c = FPDUtil.changePathColor(f, e.children("input").index(this), a);
                            $(document).unbind("click.spectrum"), b.currentViewInstance.setElementParameters({
                                fill: c
                            }, f)
                        }
                    })
                } else if (k.length > 1) {
                    e.html('<div class="fpd-color-palette fpd-grid"></div>');
                    for (var i = 0; i < k.length; ++i) {
                        var m = k[i];
                        colorName = b.mainOptions.hexNames[m.replace("#", "")], colorName = colorName ? colorName : m, e.children(".fpd-grid").append('<div class="fpd-item fpd-tooltip" title="' + colorName + '" style="background-color: ' + m + ';"></div>').children(".fpd-item:last").click(function() {
                            var a = tinycolor($(this).css("backgroundColor"));
                            b.currentViewInstance.setElementParameters({
                                fill: a.toHexString()
                            })
                        })
                    }
                    FPDUtil.updateTooltip()
                } else e.html('<input type="text" value="' + (f.fill ? f.fill : k[0]) + '" />'), e.children("input").spectrum("destroy").spectrum({
                    flat: !0,
                    preferredFormat: "hex",
                    showInput: !0,
                    showInitial: !0,
                    showPalette: b.mainOptions.colorPickerPalette && b.mainOptions.colorPickerPalette.length > 0,
                    palette: b.mainOptions.colorPickerPalette,
                    show: function(a) {
                        f._tempFill = a.toHexString()
                    },
                    move: function(a) {
                        (g === !1 || "png" !== FPDUtil.elementIsColorizable(f)) && r(a.toHexString())
                    },
                    change: function(a) {
                        $(document).unbind("click.spectrum"), b.currentViewInstance.setElementParameters({
                            fill: a.toHexString()
                        }, f)
                    }
                }).on("dragstart.spectrum", function() {
                    g = !0
                }).on("dragstop.spectrum", function(a, b) {
                    g = !1, r(b.toHexString())
                });
                o("fill"), q("fill", "color", !0)
            }(f.resizable && "image" === FPDUtil.getType(f.type) || f.rotatable) && (o("transform"), p("transform", "scale", f.resizable && "image" === FPDUtil.getType(f.type)), s(f.lockUniScaling), p("transform", "uniscaling-locker", f.uniScalingUnlockable), p("transform", "angle", f.rotatable)), (f.draggable || f.resizable) && o("position"), f.zChangeable && o("move"), "text" === FPDUtil.getType(f.type) && f.editable && (b.mainOptions.patterns.length > 0 && f.patternable && (o("fill"), q("fill", "pattern", !0)), o("font-family"), o("text-size"), o("text-line-height"), o("text-bold"), o("text-italic"), o("text-underline"), o("text-align"), o("text-stroke"), f.curvable && o("curved-text"), d.find(".fpd-panel-edit-text textarea").val(f.getText()), o("edit-text"), d.find(".fpd-stroke-color-picker input").spectrum("destroy").spectrum({
                flat: !0,
                preferredFormat: "hex",
                showInput: !0,
                showInitial: !0,
                showPalette: b.mainOptions.colorPickerPalette && b.mainOptions.colorPickerPalette.length > 0,
                palette: b.mainOptions.colorPickerPalette,
                move: function(a) {
                    c.isTransforming = !0, b.currentViewInstance.setElementParameters({
                        stroke: a.toHexString()
                    })
                }
            })), d.find(".fpd-panel-tabs").each(function(a, b) {
                var c = $(b);
                c.toggle(c.children(":not(.fpd-disabled)").length > 1), c.children(":not(.fpd-disabled):first").addClass("fpd-active").click()
            }), a.find("[data-control]").each(function(a, b) {
                var c = $(b),
                    e = c.data("control");
                if (c.hasClass("fpd-number")) void 0 !== f[e] && c.val(f[e]);
                else if (c.hasClass("fpd-toggle")) c.toggleClass("fpd-enabled", f[e] === c.data("enabled"));
                else if (c.hasClass("fpd-current-fill")) {
                    var g = f[e];
                    "string" == typeof g ? c.css("background", g) : "object" == typeof g ? g.source ? (g = g.source.src, c.css("background", "url(" + g + ")")) : (g = g[0], c.css("background", g)) : f.colors === !0 && "path-group" === f.type ? (g = tinycolor(f.paths[0].fill), c.css("background", g)) : g === !1 && f.colors && f.colors[0] ? (g = f.colors[0], c.css("background", g)) : f.filter && c.css("background", d.find(".fpd-filter-" + f.filter + " picture").css("background-image"))
                } else if (c.hasClass("fpd-dropdown-current") && void 0 !== f[e]) {
                    var h = c.nextAll(".fpd-dropdown-list:first").children('[data-value="' + f[e] + '"]').html();
                    c.is("input") ? c.val(h) : c.html(h).data("value"), "fontFamily" === e && c.css("font-family", h)
                }
            }), a.width(320);
            var n = Math.max.apply(null, $(a.children(".fpd-row")).map(function() {
                return $(this).outerWidth(!0)
            }).get());
            a.width(n + 2), setTimeout(function() {
                c.updatePosition(f)
            }, 10)
        }, this.hideTools = function() {
            a.children(".fpd-row").hide().children("div").hide().removeClass("fpd-active"), d.hide().children().removeClass("fpd-active").find(".fpd-panel-tabs > span").addClass("fpd-disabled")
        }, this.updatePosition = function(c, d) {
            if (d = "undefined" == typeof d ? !0 : d, !c) return void this.toggle(!1);
            var e = c.oCoords,
                f = e.mb.y,
                g = b.$productStage.offset();
            f = e.tl.y > f ? e.tl.y : f, f = e.tr.y > f ? e.tr.y : f, f = e.bl.y > f ? e.bl.y : f, f = e.br.y > f ? e.br.y : f, f = f + c.padding + c.cornerSize + g.top, f = f > b.$productStage.height() + g.top ? b.$productStage.height() + g.top + 5 : f, f = f + 400 > document.body.scrollHeight ? document.body.scrollHeight - 400 : f;
            var h = g.left + e.mb.x,
                i = .5 * a.outerWidth();
            h = i > h ? i : h, h = h > $(window).width() - i ? $(window).width() - i : h, a.css({
                left: h,
                top: f
            }).toggleClass("fpd-show", d)
        }, this.updateUIValue = function(b, c) {
            var d = a.find('[data-control="' + b + '"]');
            d.val(c), d.filter(".fpd-slider-range").rangeslider("update", !0, !1)
        }, this.toggle = function(b) {
            a.toggleClass("fpd-show", b)
        }
    },
    FPDMainBar = function(a, b, c, d) {
        var e, f = this,
            g = $("body"),
            h = b.children(".fpd-navigation");
        this.currentModules = a.mainOptions.mainBarModules, this.$selectedModule = null;
        var i = function() {
            e = a.$container.hasClass("fpd-topbar") && !a.$container.hasClass("fpd-main-bar-container-enabled") ? d.addClass("fpd-grid-columns-" + a.mainOptions.gridColumns).append('<div class="fpd-content"></div>').children(".fpd-content") : b.append('<div class="fpd-content"></div>').children(".fpd-content"), g.append(d), d.draggable({
                handle: d.find(".fpd-dialog-head"),
                containment: g
            }), h.on("click", "> div", function() {
                var b = $(this);
                a.$container.hasClass("fpd-topbar") && b.hasClass("fpd-active") ? (b.removeClass("fpd-active"), f.toggleDialog(!1)) : f.callModule(b.data("module"))
            }), g.on({
                mousewheel: function(a) {
                    var b = $(a.target);
                    (b.hasClass("fpd-draggable-dialog") || b.parents(".fpd-draggable-dialog").size() > 0) && (a.preventDefault(), a.stopPropagation())
                }
            }), g.on("click", ".fpd-close-dialog", function() {
                h.children(".fpd-active").removeClass("fpd-active"), d.removeClass("fpd-active")
            }), a.$container.on("viewSelect", function() {
                f.$selectedModule && f.$selectedModule.filter('[data-module="manage-layers"]').length > 0 && ManageLayersModule.createList(a, f.$selectedModule)
            }), a.$container.on("elementAdd elementRemove", function() {
                a.productCreated && f.$selectedModule && f.$selectedModule.filter('[data-module="manage-layers"]').length > 0 && ManageLayersModule.createList(a, f.$selectedModule)
            }), f.setup(f.currentModules)
        };
        this.callModule = function(c) {
            var g = h.children("div").removeClass("fpd-active").filter('[data-module="' + c + '"]').addClass("fpd-active");
            f.$selectedModule = e.children("div").removeClass("fpd-active").filter('[data-module="' + c + '"]').addClass("fpd-active"), e.parent(".fpd-draggable-dialog").size() > 0 && (void 0 === d.attr("style") && d.css("top", b.offset().top + b.height()), d.addClass("fpd-active").find(".fpd-dialog-title").text(g.find(".fpd-label").text())), "manage-layers" === c && a.productCreated && ManageLayersModule.createList(a, f.$selectedModule), FPDUtil.refreshLazyLoad(f.$selectedModule.find(".fpd-grid"), !1)
        }, this.setContentWrapper = function(c) {
            d.removeClass("fpd-active"), "sidebar" === c ? (0 === h.children(".fpd-active").size() && h.children().first().addClass("fpd-active"), e.appendTo(b)) : "draggable-dialog" === c && e.appendTo(d), h.children().each(function(b, c) {
                var d = $(c);
                d.filter(".fpd-tooltip").tooltipster("destroy"), a.$container.hasClass("fpd-sidebar") ? d.addClass("fpd-tooltip").attr("title", d.children(".fpd-label").text()) : d.removeClass("fpd-tooltip").removeAttr("title")
            }), FPDUtil.updateTooltip(h), h.children(".fpd-active").click()
        }, this.toggleDialog = function(b) {
            a.$container.hasClass("fpd-topbar") && (b = "undefined" == typeof b ? !0 : b, d.toggleClass("fpd-active", b))
        }, this.setup = function(b) {
            f.currentModules = b;
            var d = a.mainOptions.initialActiveModule;
            f.currentModules.length <= 1 ? (d = f.currentModules[0] ? f.currentModules[0] : "", h.addClass("fpd-hidden")) : h.removeClass("fpd-hidden"), h.empty(), e.empty();
            for (var g = 0; g < b.length; ++g) {
                var i = b[g],
                    j = c.children('[data-module="' + i + '"]'),
                    k = j.clone(),
                    l = a.$container.hasClass("fpd-sidebar") ? 'class="fpd-tooltip"' : "",
                    m = a.$container.hasClass("fpd-sidebar") ? 'title="' + j.data("title") + '"' : "";
                h.append('<div data-module="' + i + '" ' + l + " " + m + '><span class="' + j.data("moduleicon") + '"></span><span class="fpd-label">' + j.data("title") + "</span></div>"), e.append(k), "products" === i ? new ProductsModule(a, k) : "text" === i ? new TextModule(a, k) : "designs" === i ? new DesignsModule(a, k) : "images" === i && new ImagesModule(a, k)
            }
            a.$container.hasClass("fpd-sidebar") && "" == d && (d = h.children().first().data("module")), h.children('[data-module="' + d + '"]').click()
        }, i()
    };
FPDMainBar.availableModules = ["products", "images", "text", "designs", "manage-layers"];
var FPDActions = function(a, b) {
    var c = this;
    this.currentActions = a.mainOptions.actions;
    var d = function() {
            c.setup(c.currentActions), a.$container.on("viewSelect", function() {
                c.resetAllActions()
            }), a.$mainWrapper.on("click", ".fpd-actions-wrapper .fpd-action-btn", function() {
                var b = $(this),
                    d = b.data("action");
                if (b.hasClass("tooltipstered") && b.tooltipster("hide"), a.deselectElement(), "print" === d) a.print();
                else if ("reset-product" === d) a.loadProduct(a.currentViews);
                else if ("undo" === d) a.currentViewInstance.undo();
                else if ("redo" === d) a.currentViewInstance.redo();
                else if ("info" === d) FPDUtil.showModal(b.children(".fpd-info-content").text());
                else if ("preview-lightbox" === d) a.getProductDataURL(function(a) {
                    var b = new Image;
                    b.src = a, b.onload = function() {
                        FPDUtil.showModal('<img src="' + this.src + '" download="product.png" />', !0)
                    }
                });
                else if ("save" === d) {
                    var e = FPDUtil.showModal(a.getTranslation("actions", "save_placeholder"), !1, "prompt");
                    e.find(".fpd-btn").text(a.getTranslation("actions", "save")).click(function() {
                        a.doUnsavedAlert = !1;
                        var b = $(this).siblings("input:first").val(),
                            c = a.getProduct(),
                            d = FPDUtil.getScalingByDimesions(a.currentViewInstance.options.stageWidth, a.currentViewInstance.options.stageHeight, 200, 200),
                            g = a.currentViewInstance.stage.toDataURL({
                                multiplier: d,
                                format: "png"
                            }),
                            h = f();
                        h || (h = new Array), h.push({
                            thumbnail: g,
                            product: c,
                            title: b
                        }), window.localStorage.setItem(a.$container.attr("id"), JSON.stringify(h)), FPDUtil.showMessage(a.getTranslation("misc", "product_saved")), e.find(".fpd-modal-close").click()
                    })
                } else if ("load" === d) {
                    var h = f();
                    if (a.stageOffCanvas.$container.find(".fpd-saved-designs-panel .fpd-grid").empty(), h) {
                        for (var i = 0; i < h.length; ++i) {
                            var j = h[i];
                            g(j.thumbnail, j.product, j.title)
                        }
                        FPDUtil.createScrollbar(a.stageOffCanvas.$container.find(".fpd-saved-designs-panel .fpd-scroll-area"))
                    }
                    a.stageOffCanvas.showPanel("saved-designs", !0)
                } else if ("manage-layers" === d) {
                    var k = a.$container.find('.fpd-mainbar [data-module="manage-layers"]');
                    k.length > 0 ? k.click() : (ManageLayersModule.createList(a, a.stageOffCanvas.$container.find(".fpd-manage-layers-panel")), a.stageOffCanvas.showPanel("manage-layers", !0))
                } else if ("snap" === d) b.toggleClass("fpd-active"), a.$mainWrapper.children(".fpd-snap-line-h, .fpd-snap-line-v").hide();
                else if ("qr-code" === d) {
                    var l = FPDUtil.showModal(b.children(".fpd-modal-qrcode").clone());
                    $colorPickers = l.find(".fpd-qrcode-colors input").spectrum({
                        preferredFormat: "hex",
                        showInput: !0,
                        showInitial: !0,
                        showButtons: !1,
                        replacerClassName: "fpd-spectrum-replacer"
                    }), l.find(".fpd-add-qr-code").click(function() {
                        var b = l.find(".fpd-modal-qrcode > input").val();
                        if (b && 0 !== b.length) {
                            {
                                var c = l.find(".fpd-qrcode-wrapper").empty();
                                new QRCode(c.get(0), {
                                    text: b,
                                    width: 256,
                                    height: 256,
                                    colorDark: $colorPickers.filter(".fpd-qrcode-color-dark").spectrum("get").toHexString(),
                                    colorLight: $colorPickers.filter(".fpd-qrcode-color-light").spectrum("get").toHexString(),
                                    correctLevel: QRCode.CorrectLevel.H
                                })
                            }
                            c.find("img").load(function() {
                                a.addElement("image", this.src, "QR-Code - " + b, {
                                    autoCenter: !0,
                                    draggable: !0,
                                    removable: !0,
                                    resizable: !0
                                }), l.find(".fpd-modal-close").click()
                            })
                        }
                    })
                } else if ("zoom" === d) b.hasClass("fpd-active") || (b.hasClass("tooltipstered") && b.tooltipster("destroy"), b.tooltipster({
                    trigger: "click",
                    position: "bottom",
                    content: b.find(".fpd-tooltip-content"),
                    theme: "fpd-sub-tooltip-theme fpd-zoom-tooltip",
                    touchDevices: !1,
                    interactive: !0,
                    functionReady: function(b, c) {
                        var d = a.currentViewInstance.stage.getZoom() / a.currentViewInstance.responsiveScale;
                        c.find(".fpd-zoom-slider").attr("step", a.mainOptions.zoomStep).attr("max", a.mainOptions.maxZoom).val(d).rangeslider({
                            polyfill: !1,
                            rangeClass: "fpd-range-slider",
                            disabledClass: "fpd-range-slider--disabled",
                            horizontalClass: "fpd-range-slider--horizontal",
                            verticalClass: "fpd-range-slider--vertical",
                            fillClass: "fpd-range-slider__fill",
                            handleClass: "fpd-range-slider__handle",
                            onSlide: function(b, c) {
                                a.setZoom(c)
                            }
                        }), c.find(".fpd-stage-pan").click(function() {
                            a.currentViewInstance.dragStage = a.currentViewInstance.dragStage ? !1 : !0, $(this).toggleClass("fpd-enabled"), a.$productStage.toggleClass("fpd-drag")
                        }).toggleClass("fpd-enabled", a.currentViewInstance.dragStage)
                    },
                    functionAfter: function(a) {
                        a.removeClass("fpd-active").tooltipster("destroy"), a.attr("title", a.data("defaulttext")).tooltipster({
                            offsetY: 0,
                            position: "bottom",
                            theme: ".fpd-tooltip-theme",
                            touchDevices: !1
                        })
                    }
                }), b.tooltipster("show")), b.toggleClass("fpd-active");
                else if ("download" === d) b.hasClass("fpd-active") || (b.hasClass("tooltipstered") && b.tooltipster("destroy"), b.tooltipster({
                    trigger: "click",
                    position: "bottom",
                    content: b.find(".fpd-tooltip-content"),
                    theme: "fpd-sub-tooltip-theme",
                    touchDevices: !1,
                    functionReady: function(a, b) {
                        b.find(".fpd-item").click(function() {
                            c.downloadFile($(this).data("value"))
                        })
                    },
                    functionAfter: function(a) {
                        a.removeClass("fpd-active").tooltipster("destroy"), a.attr("title", a.data("defaulttext")).tooltipster({
                            offsetY: 0,
                            position: "bottom",
                            theme: ".fpd-tooltip-theme",
                            touchDevices: !1
                        })
                    }
                }), b.tooltipster("show")), b.toggleClass("fpd-active");
                else if ("magnify-glass" === d) {
                    if (a.resetZoom(), b.hasClass("fpd-active")) $(".fpd-zoom-image,.zoomContainer").remove(), a.$productStage.children(".fpd-view-stage").eq(a.currentViewIndex).removeClass("fpd-hidden");
                    else {
                        a.toggleSpinner();
                        var m = Number(2e3 / a.currentViewInstance.options.stageWidth).toFixed(2);
                        dataURL = a.currentViewInstance.stage.toDataURL({
                            multiplier: m,
                            format: "png"
                        }), a.$productStage.append('<img src="' + dataURL + '" class="fpd-zoom-image" />').children(".fpd-zoom-image").elevateZoom({
                            scrollZoom: !0,
                            borderSize: 1,
                            zoomType: "lens",
                            lensShape: "round",
                            lensSize: 200,
                            responsive: !0
                        }).load(function() {
                            a.toggleSpinner(!1)
                        }), a.$productStage.children(".fpd-view-stage").addClass("fpd-hidden")
                    }
                    b.toggleClass("fpd-active")
                }
            })
        },
        e = function(d) {
            a.$mainWrapper.append('<div class="fpd-actions-wrapper fpd-pos-' + d + '"></div>');
            for (var e = c.currentActions[d], f = 0; f < e.length; ++f) {
                var g = e[f],
                    h = b.children('[data-action="' + g + '"]');
                a.$mainWrapper.children(".fpd-actions-wrapper.fpd-pos-" + d).append(h.clone())
            }
        },
        f = function() {
            return FPDUtil.localStorageAvailable() ? JSON.parse(window.localStorage.getItem(a.$container.attr("id"))) : !1
        },
        g = function(b, c, d) {
            d = d ? d : "";
            var e = a.stageOffCanvas.$container.find(".fpd-saved-designs-panel .fpd-grid"),
                g = "" !== d ? 'title="' + d + '"' : "";
            e.append('<div class="fpd-item fpd-tooltip" ' + g + '><picture style="background-image: url(' + b + ')" ></picture><div class="fpd-remove-design"><span class="fpd-icon-remove"></span></div></div>').children(".fpd-item:last").click(function() {
                a.loadProduct($(this).data("product")), a.currentProductIndex = -1
            }).data("product", c).children(".fpd-remove-design").click(function(b) {
                b.stopPropagation();
                var c = $(this).parent(".fpd-item"),
                    d = c.parent(".fpd-grid").children(".fpd-item").index(c.remove()),
                    e = f();
                e.splice(d, 1), window.localStorage.setItem(a.$container.attr("id"), JSON.stringify(e))
            }), FPDUtil.updateTooltip(e)
        };
    this.downloadFile = function(b) {
        if ("jpeg" === b || "png" === b) {
            var c = document.createElement("a"),
                d = "jpeg" === b ? "#fff" : "transparent";
            "undefined" != typeof c.download ? a.getProductDataURL(function(c) {
                a.$container.find(".fpd-download-anchor").attr("href", c).attr("download", "Product." + b)[0].click()
            }, d, {
                format: b
            }) : a.createImage(!0, !0, d, {
                format: b
            })
        } else _createPDF = function(b) {
            for (var c = a.viewInstances[0].options.stageWidth, d = a.viewInstances[0].options.stageHeight, e = 1; e < a.viewInstances.length; ++e) {
                var f = a.viewInstances[e].options;
                f.stageWidth > c && (c = f.stageWidth), f.stageHeight > d && (d = f.stageHeight)
            }
            for (var g = a.currentViewInstance.stage.getWidth() > a.currentViewInstance.stage.getHeight() ? "l" : "p", h = new jsPDF(g, "mm", [.26 * c, .26 * d]), e = 0; e < b.length; ++e) h.addImage(b[e], "JPEG", 0, 0), e < b.length - 1 && h.addPage();
            h.save("Product.pdf")
        }, a.getViewsDataURL(_createPDF, "#ffffff", {
            format: "jpeg"
        })
    }, this.setup = function(b) {
        this.currentActions = b, a.$mainWrapper.children(".fpd-actions-wrapper").remove();
        for (var c = Object.keys(b), d = 0; d < c.length; ++d) {
            var f = b[c[d]];
            "object" == typeof f && f.length > 0 && e(c[d])
        }
    }, this.resetAllActions = function() {
        $(".fpd-zoom-image,.zoomContainer").remove(), a.$productStage.children(".fpd-view-stage").eq(a.currentViewIndex).removeClass("fpd-hidden"), a.$mainWrapper.find(".fpd-action-btn").removeClass("fpd-active")
    }, d()
};
FPDActions.availableActions = ["print", "reset-product", "undo", "redo", "info", "save", "load", "manage-layers", "snap", "qr-code", "zoom", "download", "magnify-glass", "preview-lightbox"];
var FPDStageOffCanvas = function(a, b, c) {
        var d = this,
            e = ["images", "text", "designs"],
            f = null;
        a.$mainWrapper.append(b), this.$container = b;
        var g = function() {
            f = b.find(".fpd-upload-zone-adds-panel");
            var g = 0,
                h = 0;
            b.on("touchstart", function(a) {
                g = a.originalEvent.touches[0].pageX
            }).on("touchmove", function(a) {
                a.preventDefault();
                var c = a.originalEvent.touches[0].pageX;
                h = g - c, h = h > 0 ? 0 : h, b.css("right", h)
            }).on("touchend", function() {
                -100 > h ? b.removeAttr("style").removeClass("fpd-show") : b.css("right", 0)
            }), b.on("click", ".fpd-close-stage-off-canvas", function() {
                d.toggle(!1)
            }), b.find(".fpd-off-canvas-nav > div").click(function() {
                var a = $(this);
                a.addClass("fpd-active").siblings().removeClass("fpd-active");
                var c = b.find(".fpd-off-canvas-content").children('[data-module="' + a.data("module") + '"]').addClass("fpd-active");
                c.siblings().removeClass("fpd-active"), setTimeout(function() {
                    FPDUtil.refreshLazyLoad(c.find(".fpd-grid"), !1)
                }, 10)
            });
            for (var i = 0; i < e.length; ++i) {
                var j = e[i],
                    k = c.children('[data-module="' + j + '"]'),
                    l = k.clone();
                f.children(".fpd-off-canvas-content").append(l), "text" === j ? new TextModule(a, l) : "designs" === j ? new DesignsModule(a, l) : "images" === j && new ImagesModule(a, l)
            }
        };
        this.showPanel = function(a, c) {
            showHide = "undefined" == typeof showHide ? !1 : showHide, b.children('[data-context="' + a + '"]').show().siblings("div").hide(), c && this.toggle(c), "upload-zone-adds" === a && 0 === b.find(".fpd-off-canvas-nav > .fpd-active").size() && b.find(".fpd-off-canvas-nav > div:visible:first").click()
        }, this.toggle = function(c) {
            b.toggleClass("fpd-show", c), !c && a.currentViewInstance && (a.currentViewInstance.currentUploadZone = null), c || b.find(".fpd-current-color, .fpd-path-colorpicker").spectrum("destroy");

        }, this.toggleUploadZoneAdds = function(b) {
            if (f.find(".fpd-add-image").toggleClass("fpd-hidden", !Boolean(b.uploads)), f.find(".fpd-add-text").toggleClass("fpd-hidden", !Boolean(b.texts)), f.find(".fpd-add-design").toggleClass("fpd-hidden", !Boolean(b.designs)), a.currentElement.price) {
                var c = a.mainOptions.priceFormat.replace("%d", a.currentElement.price);
                f.find('[data-module="text"] .fpd-btn > .fpd-price').html(" - " + c)
            } else f.find('[data-module="text"] .fpd-btn > .fpd-price').html("");
            f.find(".fpd-off-canvas-nav > :not(.fpd-hidden)").first().click()
        }, g()
    },
    DesignsModule = function(a, b) {
        var c = b.find(".fpd-head"),
            d = b.find(".fpd-scroll-area"),
            e = b.find(".fpd-grid"),
            f = a.mainOptions.lazyLoad ? "fpd-hidden" : "",
            g = null,
            h = null,
            i = function() {
                a.$designs.size() > 0 && (a.$designs.filter(".fpd-category").length > 1 ? (g = a.$designs.filter(".fpd-category"), h = a.$designs, j(g)) : l(a.$designs), a.$designs.remove()), c.find(".fpd-back").click(function() {
                    null !== g && j(g), h = a.$designs, b.removeClass("fpd-head-visible")
                })
            },
            j = function(a) {
                d.find(".fpd-grid").empty(), a.each(function(a, b) {
                    var c = $(b),
                        d = c.data("thumbnail"),
                        e = {
                            title: c.attr("title"),
                            thumbnail: d
                        };
                    k(e)
                }), FPDUtil.refreshLazyLoad(e, !1), FPDUtil.createScrollbar(d)
            },
            k = function(a) {
                var d = a.thumbnail ? '<picture data-img="' + a.thumbnail + '"></picture>' : "",
                    g = a.thumbnail ? f : f + " fpd-title-centered",
                    i = e.append('<div class="fpd-category fpd-item ' + g + '">' + d + "<span>" + a.title + "</span></div>").children(".fpd-item:last").click(function() {
                        var a = $(this),
                            d = a.parent().children(".fpd-item").index(a),
                            e = h.eq(d).children();
                        e.filter(".fpd-category").size() > 0 ? (h = e, j(e)) : l(h.eq(d)), b.addClass("fpd-head-visible"), c.children(".fpd-category-title").text(a.children("span").text())
                    });
                "" === f && a.thumbnail && FPDUtil.loadGridImage(i.children("picture"), a.thumbnail)
            },
            l = function(a) {
                d.find(".fpd-grid").empty();
                var b = {};
                a.hasClass("fpd-category") && (b = a.data("parameters") ? a.data("parameters") : {}, a = a.children("img")), a.each(function(a, c) {
                    var d = $(c),
                        e = {
                            source: void 0 === d.data("src") ? d.attr("src") : d.data("src"),
                            title: d.attr("title"),
                            parameters: $.extend({}, b, d.data("parameters")),
                            thumbnail: d.data("thumbnail")
                        };
                    m(e)
                }), FPDUtil.refreshLazyLoad(e, !1), FPDUtil.createScrollbar(d), FPDUtil.updateTooltip()
            },
            m = function(b) {
                b.thumbnail = void 0 === b.thumbnail ? b.source : b.thumbnail;
                var c = e.append('<div class="fpd-item ' + f + '" data-source="' + b.source + '" data-title="' + b.title + '"><picture data-img="' + b.thumbnail + '"></picture></div>').children(".fpd-item:last").click(function() {
                    var b = $(this),
                        c = b.data("parameters");
                    c.isCustom = !0, a.addElement("image", b.data("source"), b.data("title"), c)
                }).data("parameters", b.parameters);
                "" === f && FPDUtil.loadGridImage(c.children("picture"), b.thumbnail)
            };
        this.selectCategory = function(b) {
            $categoriesDropdown.children("input").val(a.products[b].name);
            for (var c = a.products[b], d = 0; d < c.products.length; ++d) {
                var e = c.products[d];
                _addGridProduct(e)
            }
        }, i()
    },
    ProductsModule = function(a, b) {
        var c = this,
            d = 0,
            e = b.find(".fpd-product-categories"),
            f = b.find(".fpd-scroll-area"),
            g = b.find(".fpd-grid"),
            h = a.mainOptions.lazyLoad ? "fpd-hidden" : "",
            i = function() {
                if (0 !== a.products.length) {
                    if (a.products.length > 1) {
                        b.addClass("fpd-categories-enabled");
                        for (var g = 0; g < a.products.length; ++g) e.find(".fpd-dropdown-list").append('<span class="fpd-item" data-value="' + g + '">' + a.products[g].name + "</span>")
                    }
                    var h = e.find(".fpd-dropdown-list .fpd-item");
                    e.children("input").keyup(function() {
                        h.hide(), 0 === this.value.length ? h.show() : h.filter(':containsCaseInsensitive("' + this.value + '")').show()
                    }), e.find(".fpd-dropdown-list .fpd-item").click(function() {
                        var a = $(this);
                        d = a.data("value"), a.parent().prevAll(".fpd-dropdown-current:first").val(a.text()), c.selectCategory(d), a.siblings(".fpd-item").show(), FPDUtil.refreshLazyLoad(f.find(".fpd-grid"), !1)
                    }), c.selectCategory(d)
                }
            },
            j = function(b) {
                var c = b[0].productThumbnail ? b[0].productThumbnail : b[0].thumbnail,
                    e = b[0].productTitle ? b[0].productTitle : b[0].title,
                    f = g.append('<div class="fpd-item fpd-tooltip ' + h + '" title="' + e + '"><picture data-img="' + c + '"></picture></div>').children(".fpd-item:last").click(function(b) {
                        var c = $(this),
                            e = g.children(".fpd-item").index(c);
                        a.selectProduct(e, d), b.preventDefault()
                    }).data("views", b);
                "" === h && FPDUtil.loadGridImage(f.children("picture"), c)
            };
        this.selectCategory = function(b) {
            f.find(".fpd-grid").empty(), e.children("input").val(a.products[b].name);
            for (var c = a.products[b], d = 0; d < c.products.length; ++d) {
                var g = c.products[d];
                j(g)
            }
            FPDUtil.createScrollbar(f), FPDUtil.updateTooltip()
        }, i()
    },
    TextModule = function(a, b) {
        var c, d = function() {
            a.$container.on("viewSelect", function(d, e, f) {
                if (c = f.options, c.customTextParameters && c.customTextParameters.price) {
                    var g = a.mainOptions.priceFormat.replace("%d", c.customTextParameters.price);
                    b.find(".fpd-btn > .fpd-price").html(" - " + g)
                } else b.find(".fpd-btn > .fpd-price").html("")
            }), b.on("click", ".fpd-btn", function() {
                var b = $(this).prevAll("textarea:first"),
                    d = b.val();
                if (d && d.length > 0) {
                    var e = $.extend({}, c.customTextParameters, {
                        isCustom: !0
                    });
                    a.addElement("text", d, d, e)
                }
                b.val("")
            }), b.on("keyup", "textarea", function() {
                var a = this.value,
                    b = c ? c.customTextParameters.maxLength : 0,
                    d = c ? c.customTextParameters.maxLines : 0;
                0 != b && a.length > b && (a = a.substr(0, b)), 0 != d && a.split("\n").length > d && (a = a.replace(/([\s\S]*)\n/, "$1")), this.value = a
            })
        };
        d()
    },
    ImagesModule = function(a, b) {
        var c = a.mainOptions.lazyLoad ? "fpd-hidden" : "",
            d = b.find(".fpd-input-image"),
            e = b.find('[data-context="upload"] .fpd-scroll-area'),
            f = e.find(".fpd-grid"),
            g = b.find(".fpd-facebook-albums"),
            h = b.find('[data-context="facebook"] .fpd-scroll-area'),
            i = h.find(".fpd-grid"),
            j = b.find('[data-context="instagram"] .fpd-scroll-area'),
            k = j.find(".fpd-grid");
        facebookAppId = a.mainOptions.facebookAppId, instagramClientId = a.mainOptions.instagramClientId, instagramRedirectUri = a.mainOptions.instagramRedirectUri, instaAccessToken = null, instaLoadingStack = !1, instaNextStack = null, localStorageAvailable = FPDUtil.localStorageAvailable(), loadingImageLabel = a.getTranslation("misc", "loading_image"), ajaxSettings = a.mainOptions.customImageAjaxSettings, saveOnServer = ajaxSettings.data && ajaxSettings.data.saveOnServer ? 1 : 0, uploadsDir = ajaxSettings.data && ajaxSettings.data.uploadsDir ? ajaxSettings.data.uploadsDir : "", uploadsDirURL = ajaxSettings.data && ajaxSettings.data.uploadsDirURL ? ajaxSettings.data.uploadsDirURL : "";
        var l = function() {
                var a = b.find(".fpd-upload-zone");
                a.click(function(a) {
                    a.preventDefault(), d.click()
                }).on("dragover dragleave", function(a) {
                    a.stopPropagation(), a.preventDefault(), $(this).toggleClass("fpd-hover", "dragover" === a.type)
                });
                var c = function(b) {
                    if (b.stopPropagation(), b.preventDefault(), window.FileReader) {
                        var c = b.target.files || b.dataTransfer.files,
                            e = !0;
                        fileTypes = ["jpg", "jpeg", "png", "svg"];
                        for (var f = 0; f < c.length; ++f) {
                            var g = c[f].name.split(".").pop().toLowerCase();
                            fileTypes.indexOf(g) > -1 && (m(c[f], e), e = !1)
                        }
                    }
                    a.removeClass("fpd-hover"), d.val("")
                };
                a.get(0).addEventListener("drop", c, !1), b.find(".fpd-upload-form").on("change", c), facebookAppId && facebookAppId.length > 5 && (b.find('.fpd-module-tabs [data-context="facebook"]').removeClass("fpd-hidden"), n()), instagramClientId && instagramClientId.length > 5 && (b.find('.fpd-module-tabs [data-context="instagram"]').removeClass("fpd-hidden"), b.find('.fpd-module-tabs [data-context="instagram"]').on("click", function() {
                    if (!(k.children(".fpd-item").size() > 0)) {
                        instaAccessToken = window.localStorage.getItem("fpd_instagram_access_token");
                        var a = "recent";
                        localStorageAvailable && null != instaAccessToken ? p(a) : o(function() {
                            p(a)
                        })
                    }
                }), b.find(".fpd-insta-recent-images, .fpd-insta-liked-images").click(function() {
                    {
                        var a = $(this).addClass("fpd-active");
                        a.hasClass("fpd-insta-recent-images") ? "recent" : "liked"
                    }
                    a.siblings().removeClass("fpd-active")
                }), j.on("_sbOnTotalScroll", function() {
                    null === instaNextStack || instaLoadingStack || p(instaNextStack, !1)
                })), b.children(".fpd-module-tabs").children("div:not(.fpd-hidden):first").click()
            },
            m = function(b, c) {
                var d = 1024 * a.mainOptions.customImageParameters.maxSize * 1024;
                if (b.size > d) return void FPDUtil.showMessage(a.getTranslation("misc", "maximum_size_info").replace("%filename", b.name).replace("%mb", a.mainOptions.customImageParameters.maxSize));
                var g = new FileReader;
                g.onload = function() {
                    if ("image/jpeg" === b.type) {
                        var d = new JpegMeta.JpegFile(atob(this.result.replace(/^.*?,/, "")), b.name);
                        if (d.tiff && d.tiff.XResolution && d.tiff.XResolution.value) {
                            var g = d.tiff.XResolution.value.den,
                                h = d.tiff.XResolution.value.num,
                                i = h / g;
                            if (FPDUtil.log(b.name + ", Density: " + g + " Number: " + h + " Real Resolution: " + i, "info"), i < a.mainOptions.customImageParameters.minDPI) return FPDUtil.showModal(a.getTranslation("misc", "minimum_dpi_info").replace("%dpi", a.mainOptions.customImageParameters.minDPI)), !1
                        } else FPDUtil.log(b.name + ": Resolution is not accessible.", "info")
                    }
                    var j = this.result,
                        k = f.append('<div class="fpd-item" data-source="' + j + '" data-title="' + b.name + '"><picture data-img="' + j + '"></picture></div>').children(".fpd-item:last").data("file", b).click(function() {
                            var b = $(this);
                            if (saveOnServer) {
                                a.toggleSpinner(!0, loadingImageLabel);
                                var c = $.extend({}, ajaxSettings),
                                    d = new FormData;
                                d.append("uploadsDir", uploadsDir), d.append("uploadsDirURL", uploadsDirURL), d.append("images[]", b.data("file")), c.data = d, c.processData = !1, c.contentType = !1, c.success = function(b) {
                                    b && void 0 == b.error ? a.addCustomImage(b.image_src, b.filename) : (a.toggleSpinner(!1), FPDUtil.showModal(b.error))
                                }, $.ajax(c).fail(function(b) {
                                    a.toggleSpinner(!1), FPDUtil.showModal(b.statusText)
                                })
                            } else a.addCustomImage(b.data("source"), b.data("title"))
                        }),
                        l = new Image;
                    l.onload = function() {
                        {
                            var b = this.height,
                                d = this.width;
                            a.currentViewInstance.options.customImageParameters
                        }
                        FPDUtil.checkImageDimensions(a, d, b) ? (FPDUtil.loadGridImage(k.children("picture"), this.src), FPDUtil.createScrollbar(e), c && k.click()) : k.remove()
                    }, l.src = j
                }, g.readAsDataURL(b)
            },
            n = function() {
                var d = g.find(".fpd-dropdown-list .fpd-item");
                g.children("input").keyup(function() {
                    d.hide(), 0 === this.value.length ? d.show() : d.filter(':containsCaseInsensitive("' + this.value + '")').show()
                }), g.on("click", ".fpd-dropdown-list .fpd-item", function() {
                    var a = $(this);
                    albumID = a.data("value"), a.parent().prevAll(".fpd-dropdown-current:first").val(a.text()), a.siblings(".fpd-item").show(), e(albumID)
                });
                var e = function(b) {
                    i.empty(), g.addClass("fpd-on-loading"), FB.api("/" + b + "?fields=count", function(d) {
                        var e = d.count;
                        FB.api("/" + b + "?fields=photos.limit(" + e + ").fields(source,images)", function(b) {
                            if (g.removeClass("fpd-on-loading"), !b.error) {
                                for (var d = b.photos.data, e = 0; e < d.length; ++e) {
                                    var f = d[e],
                                        j = f.images[f.images.length - 1] ? f.images[f.images.length - 1].source : f.source,
                                        k = i.append('<div class="fpd-item ' + c + '" data-title="' + f.id + '" data-source="' + f.source + '"><picture data-img="' + f.source + '"></picture></div>').children(".fpd-item:last").click(function() {
                                            a.toggleSpinner(!0, loadingImageLabel);
                                            var b = $(this);
                                            ajaxSettings.data = {
                                                url: b.data("source"),
                                                uploadsDir: uploadsDir,
                                                uploadsDirURL: uploadsDirURL,
                                                saveOnServer: saveOnServer
                                            }, ajaxSettings.success = function(c) {
                                                if (c && void 0 == c.error) {
                                                    var d = new Image;
                                                    d.src = c.image_src, d.onload = function() {
                                                        a.addCustomImage(this.src, b.data("title"))
                                                    }
                                                } else a.toggleSpinner(!1), FPDUtil.showModal(c.error)
                                            }, $.ajax(ajaxSettings).fail(function(b) {
                                                a.toggleSpinner(!1), FPDUtil.showModal(b.statusText)
                                            })
                                        });
                                    "" === c && FPDUtil.loadGridImage(k.children("picture"), j)
                                }
                                FPDUtil.createScrollbar(h), FPDUtil.refreshLazyLoad(i, !1)
                            }
                            a.toggleSpinner(!1)
                        })
                    })
                };
                $.ajaxSetup({
                    cache: !0
                }), $.getScript("//connect.facebook.com/en_US/sdk.js", function() {
                    FB.init({
                        appId: facebookAppId,
                        status: !0,
                        cookie: !0,
                        xfbml: !0,
                        version: "v2.5"
                    }), FB.Event.subscribe("auth.statusChange", function(a) {
                        "connected" === a.status && (b.addClass("fpd-facebook-logged-in"), FB.api("/me/albums?fields=name,count,id", function(a) {
                            for (var b = a.data, c = 0; c < b.length; ++c) {
                                var e = b[c];
                                e.count > 0 && g.find(".fpd-dropdown-list").append('<span class="fpd-item" data-value="' + e.id + '">' + e.name + "</span>")
                            }
                            d = g.find(".fpd-dropdown-list .fpd-item"), g.removeClass("fpd-on-loading")
                        }))
                    })
                })
            },
            o = function(b) {
                var c = (window.screen.width - 700) / 2,
                    d = (window.screen.height - 500) / 2,
                    e = window.open(a.mainOptions.templatesDirectory + "/instagram_auth." + a.mainOptions.templatesType, "", "width=700,height=500,left=" + c + ",top=" + d);
                FPDUtil.popupBlockerAlert(e), e.onload = new function() {
                    0 == window.location.hash.length && e.open("https://instagram.com/oauth/authorize/?client_id=" + instagramClientId + "&redirect_uri=" + instagramRedirectUri + "&response_type=token", "_self");
                    var a = setInterval(function() {
                        try {
                            e.location.hash.length && (clearInterval(a), instaAccessToken = e.location.hash.slice(14), localStorageAvailable && window.localStorage.setItem("fpd_instagram_access_token", instaAccessToken), e.close(), void 0 != b && "function" == typeof b && b())
                        } catch (c) {}
                    }, 100)
                }
            },
            p = function(b, d) {
                d = "undefined" == typeof d ? !0 : d, instaLoadingStack = !0;
                var e;
                switch (b) {
                    case "liked":
                        e = "https://api.instagram.com/v1/users/self/media/liked?access_token=" + instaAccessToken;
                        break;
                    case "recent":
                        e = "https://api.instagram.com/v1/users/self/media/recent?access_token=" + instaAccessToken;
                        break;
                    default:
                        e = b
                }
                d && k.empty(), $.ajax({
                    method: "GET",
                    url: e,
                    dataType: "jsonp",
                    jsonp: "callback",
                    jsonpCallback: "jsonpcallback",
                    cache: !1,
                    success: function(b) {
                        b.data ? (instaNextStack = b.pagination && b.pagination.next_url ? b.pagination.next_url : null, $.each(b.data, function(b, d) {
                            if ("image" == d.type) var e = d.images.standard_resolution.url,
                                f = k.append('<div class="fpd-item ' + c + '" data-title="' + d.id + '" data-source="' + e + '"><picture data-img="' + e + '"></picture></div>').children(".fpd-item:last").click(function() {
                                    a.toggleSpinner(!0, loadingImageLabel);
                                    var b = $(this);
                                    ajaxSettings.data = {
                                        url: b.data("source"),
                                        uploadsDir: uploadsDir,
                                        uploadsDirURL: uploadsDirURL,
                                        saveOnServer: saveOnServer
                                    }, ajaxSettings.success = function(c) {
                                        if (c && void 0 == c.error) {
                                            var d = new Image;
                                            d.src = c.image_src, d.onload = function() {
                                                a.addCustomImage(this.src, b.data("title"))
                                            }
                                        } else a.toggleSpinner(!1), FPDUtil.showModal(c.error)
                                    }, $.ajax(ajaxSettings).fail(function(b) {
                                        a.toggleSpinner(!1), FPDUtil.showModal(b.statusText)
                                    })
                                });
                            "" === c && FPDUtil.loadGridImage(f.children("picture"), e)
                        }), d && (FPDUtil.createScrollbar(j), FPDUtil.refreshLazyLoad(k, !1))) : (window.localStorage.removeItem("fpd_instagram_access_token"), b.meta && b.meta.error_message && FPDUtil.showModal("<strong>Instagram Error</strong><p>" + b.meta.error_message + "</p>")), instaLoadingStack = !1
                    },
                    error: function() {
                        instaLoadingStack = !1, FPDUtil.showModal("Could not load data from instagram. Please try again!")
                    }
                })
            };
        l()
    },
    ManageLayersModule = {
        createList: function(a, b) {
            var c, d = !1,
                e = function(c) {
                    var d = "<span></span>";
                    if (FPDUtil.elementHasColorSelection(c)) {
                        var e = FPDUtil.elementAvailableColors(c, a),
                            f = "";
                        c.uploadZone ? d = "<span></span>" : "path-group" == c.type ? (f = e[0], d = '<span class="fpd-current-color" style="background: ' + f + '"></span>') : e.length > 1 ? (f = c.fill ? c.fill : e[0], d = '<span class="fpd-current-color" style="background: ' + f + '" data-colors=""></span>') : (f = c.fill ? c.fill : e[0], d = '<input class="fpd-current-color" type="text" value="' + f + '" />')
                    }
                    b.find(".fpd-list").append('<div class="fpd-list-row" id="' + c.id + '"><div class="fpd-cell-0">' + d + '</div><div class="fpd-cell-1">' + c.title + '</div><div class="fpd-cell-2"></div></div>');
                    var g = b.find(".fpd-list-row:last").data("element", c).data("colors", e);
                    if (c.uploadZone) g.addClass("fpd-add-layer").find(".fpd-cell-2").append('<span><span class="fpd-icon-add"></span></span>');
                    else {
                        var h = c.evented ? "fpd-icon-unlocked" : "fpd-icon-locked-full",
                            i = c.zChangeable ? '<span class="fpd-icon-reorder"></span>' : "";
                        g.find(".fpd-cell-2").append(i + '<span class="fpd-lock-element"><span class="' + h + '"></span></span>'), c.removable && g.find(".fpd-lock-element").after('<span class="fpd-remove-element"><span class="fpd-icon-remove"></span></span>'), g.toggleClass("fpd-locked", !c.evented)
                    }
                };
            b.find(".fpd-current-color").spectrum("destroy"), b.find(".fpd-list").empty();
            for (var f = a.getElements(a.currentViewIndex), g = 0; g < f.length; ++g) {
                var h = f[g];
                h.isEditable && e(h)
            }
            FPDUtil.createScrollbar(b.find(".fpd-scroll-area")), b.find(".fpd-list").sortable({
                handle: ".fpd-icon-reorder",
                placeholder: "fpd-list-row fpd-sortable-placeholder",
                scroll: !1,
                axis: "y",
                containment: "parent",
                items: ".fpd-list-row:not(.fpd-locked)",
                change: function(c, d) {
                    var e = a.getElementByID(d.item.attr("id")),
                        f = b.find(".fpd-list-row:not(.ui-sortable-helper)").index(d.placeholder);
                    f = 0 === f ? 0 : f + 2, a.setElementParameters({
                        z: f
                    }, e)
                }
            }), b.find("input.fpd-current-color").spectrum("destroy").spectrum({
                flat: !1,
                preferredFormat: "hex",
                showInput: !0,
                showInitial: !0,
                showPalette: a.mainOptions.colorPickerPalette && a.mainOptions.colorPickerPalette.length > 0,
                palette: a.mainOptions.colorPickerPalette,
                showButtons: !1,
                show: function(a) {
                    var b = $(this).parents(".fpd-list-row:first").data("element");
                    b._tempFill = a.toHexString()
                },
                move: function(b) {
                    var c = $(this).parents(".fpd-list-row:first").data("element");
                    (d === !1 || "png" !== FPDUtil.elementIsColorizable(c)) && a.currentViewInstance.changeColor(c, b.toHexString())
                },
                change: function(b) {
                    $(document).unbind("click.spectrum");
                    var c = $(this).parents(".fpd-list-row:first").data("element");
                    a.currentViewInstance.setElementParameters({
                        fill: b.toHexString()
                    }, c)
                }
            }).on("beforeShow.spectrum", function() {
                c && (c.remove(), c = null)
            }).on("dragstart.spectrum", function() {
                d = !0
            }).on("dragstop.spectrum", function(b, c) {
                d = !1;
                var e = $(this).parents(".fpd-list-row:first").data("element");
                a.currentViewInstance.changeColor(e, c.toHexString())
            }), b.off("click", ".fpd-current-color").on("click", ".fpd-current-color", function(d) {
                d.stopPropagation(), b.find(".fpd-path-colorpicker").spectrum("destroy"), b.find("input.fpd-current-color").spectrum("hide");
                var e = $(this).parents(".fpd-list-row"),
                    f = e.data("element"),
                    g = e.data("colors");
                if (c && e.children(".fpd-scroll-area").length > 0) return c.slideUp(200, function() {
                    $(this).remove()
                }), void(c = null);
                if (c && (c.slideUp(200, function() {
                        $(this).remove()
                    }), c = null), g.length > 0) {
                    e.append('<div class="fpd-scroll-area"><div class="fpd-color-palette fpd-grid"></div></div>');
                    for (var h = 0; h < g.length; ++h) {
                        var i;
                        if ("path-group" === f.type) i = '<input class="fpd-path-colorpicker" type="text" value="' + g[h] + '" />';
                        else {
                            var j = a.mainOptions.hexNames[g[h].replace("#", "")];
                            j = j ? j : g[h], i = '<div class="fpd-item fpd-tooltip" title="' + j + '" style="background-color: ' + g[h] + '" data-color="' + g[h] + '"></div>'
                        }
                        e.find(".fpd-color-palette").append(i)
                    }
                    FPDUtil.updateTooltip(e), "path-group" === f.type && e.find(".fpd-path-colorpicker").spectrum({
                        showPaletteOnly: $.isArray(f.colors),
                        preferredFormat: "hex",
                        showInput: !0,
                        showInitial: !0,
                        showButtons: !1,
                        showPalette: a.mainOptions.colorPickerPalette && a.mainOptions.colorPickerPalette.length > 0,
                        palette: $.isArray(f.colors) ? f.colors : a.mainOptions.colorPickerPalette,
                        show: function(a) {
                            var b = $(this).parents(".fpd-list-row"),
                                c = b.data("element"),
                                d = FPDUtil.changePathColor(c, b.find(".fpd-path-colorpicker").index(this), a);
                            c._tempFill = d
                        },
                        move: function(b) {
                            var c = $(this).parents(".fpd-list-row"),
                                d = c.data("element"),
                                e = FPDUtil.changePathColor(d, c.find(".fpd-path-colorpicker").index(this), b);
                            a.currentViewInstance.changeColor(d, e)
                        },
                        change: function(b) {
                            var c = $(this).parents(".fpd-list-row"),
                                d = c.data("element"),
                                e = FPDUtil.changePathColor(d, c.find(".fpd-path-colorpicker").index(this), b);
                            $(document).unbind("click.spectrum"), a.currentViewInstance.setElementParameters({
                                fill: e
                            }, d)
                        }
                    }), c = e.children(".fpd-scroll-area").slideDown(300)
                }
            }), b.on("click", ".fpd-color-palette .fpd-item", function(b) {
                b.stopPropagation();
                var c = $(this),
                    d = c.parents(".fpd-list-row"),
                    e = d.data("element"),
                    f = c.data("color");
                d.find(".fpd-current-color").css("background", f), a.currentViewInstance.setElementParameters({
                    fill: f
                }, e)
            }), b.on("click", ".fpd-list-row", function() {
                if (!$(this).hasClass("fpd-locked")) {
                    var b = a.getElementByID(this.id);
                    b && b.canvas.setActiveObject(b).renderAll()
                }
            }), b.on("click", ".fpd-lock-element", function(a) {
                a.stopPropagation();
                var b = $(this),
                    d = b.parents(".fpd-list-row").data("element");
                c && (c.slideUp(200, function() {
                    $(this).remove()
                }), c = null), d.evented = !d.evented, b.children("span").toggleClass("fpd-icon-unlocked", d.evented).toggleClass("fpd-icon-locked-full", !d.evented), b.parents(".fpd-list-row").toggleClass("fpd-locked", !d.evented), b.parents(".fpd-list:first").sortable("refresh")
            }), b.on("click", ".fpd-remove-element", function(b) {
                b.stopPropagation();
                var c = $(this).parents(".fpd-list-row");
                a.currentViewInstance.removeElement(c.data("element"))
            })
        }
    },
    FancyProductDesigner = function(a, b) {
        $ = jQuery;
        var c, d, e, f, g, h, i = this,
            j = $(window),
            k = $("body"),
            l = null,
            m = null,
            n = [],
            o = [];
        stageCleared = !1, productIsCustomized = !1, initCSSClasses = "", anonymFuncs = {}, this.products = [], this.plainProducts = [], this.currentCategoryIndex = 0, this.currentProductIndex = 0, this.currentViewIndex = 0, this.currentPrice = 0, this.currentViews = null, this.currentViewInstance = null, this.currentElement = null, this.langJson = null, this.mainOptions, this.$productStage = null, this.stageOffCanvas = null, this.$elementTooltip = null, this.watermarkImg = null, this.productCreated = !1, this.doUnsavedAlert = !1, this.viewInstances = [], this.colorLinkGroups = {}, this.languageJSON = {
            toolbar: {},
            actions: {},
            modules: {},
            misc: {}
        };
        var p = new FancyProductDesignerOptions,
            q = p.merge(p.defaults, b);
        this.mainOptions = q;
        var r = function() {
                if ($.expr[":"].containsCaseInsensitive = $.expr.createPseudo(function(a) {
                        return function(b) {
                            return $(b).text().toUpperCase().indexOf(a.toUpperCase()) >= 0
                        }
                    }), d = a instanceof jQuery ? a : $(a), initCSSClasses = d.attr("class"), q.mainBarContainer = q.modalMode !== !1 ? !1 : q.mainBarContainer, i.$container = d.data("instance", i), c = d.children(".fpd-category").size() > 0 ? d.children(".fpd-category").remove() : d.children(".fpd-product").remove(), i.$designs = d.find(d.find(".fpd-design > .fpd-category").size() > 0 ? ".fpd-design > .fpd-category" : ".fpd-design > img"), d.children(".fpd-design").remove(), q.modalMode) {
                    d.removeClass("fpd-hidden"), k.addClass("fpd-modal-mode-active");
                    var b = d.wrap('<div class="fpd-modal-product-designer fpd-modal-overlay fpd-fullscreen"><div class="fpd-modal-wrapper"></div></div>').parents(".fpd-modal-overlay:first"),
                        f = !1;
                    b.children().append('<div class="fpd-done fpd-btn" data-defaulttext="Done">misc.modal_done</div><div class="fpd-modal-close"><span class="fpd-icon-close"></span></div>'), $(q.modalMode).addClass("fpd-modal-mode-btn").click(function(a) {
                        a.preventDefault(), k.addClass("fpd-overflow-hidden").removeClass("fpd-modal-mode-active"), b.addClass("fpd-fullscreen").fadeIn(300), i.currentViewInstance && i.currentViewInstance.resetCanvasSize();
                        var c = e.children(".fpd-navigation").children(".fpd-active");
                        if (c.size() > 0 && i.mainBar.callModule(c.data("module")), !f && !i.mainOptions.editorMode && i.currentViewInstance)
                            for (var d = i.currentViewInstance.stage.getObjects(), g = 0; g < d.length; ++g) {
                                var h = d[g];
                                h.autoSelect && !h.hasUploadZone && i.currentViewInstance.stage.setActiveObject(h)
                            }
                        f = !0
                    }), b.find(".fpd-done").click(function() {
                        b.find(".fpd-modal-close").click()
                    })
                }
                var g = document.createElement("canvas"),
                    h = Boolean(g.getContext && g.getContext("2d")),
                    j = q.templatesDirectory ? 9 : 8;
                if (!h || FPDUtil.isIE() && Number(FPDUtil.isIE()) <= j) return anonymFuncs.loadCanvasError = function(a) {
                    d.append($.parseHTML(a)).fadeIn(300), d.trigger("templateLoad", [this.url])
                }, $.post(q.templatesDirectory + "canvaserror." + q.templatesType, anonymFuncs.loadCanvasError), d.trigger("canvasFail"), !1;
                for (var l, m = Object.keys(q.hexNames), n = m.length, o = {}; n--;) l = m[n], o[l.toLowerCase()] = q.hexNames[l];
                q.hexNames = o, q.langJSON !== !1 ? "object" == typeof q.langJSON ? (i.langJson = q.langJSON, d.trigger("langJSONLoad", [i.langJson]), s()) : $.getJSON(q.langJSON).done(function(a) {
                    i.langJson = a, d.trigger("langJSONLoad", [i.langJson]), s()
                }).fail(function() {
                    FPDUtil.showModal('Language JSON "' + q.langJSON + '" could not be loaded or is not valid. Make sure you set the correct URL in the options and the JSON is valid!'), d.trigger("langJSONLoad", [i.langJson])
                }) : s()
            },
            s = function() {
                var a = '<div class="fpd-loader-wrapper"><div class="fpd-loader"><div class="fpd-loader-circle"></div><span class="fpd-loader-text" data-defaulttext="Initializing Product Designer">misc.initializing</span></div></div>',
                    b = '<div class="fpd-element-tooltip" style="display: none;">misc.out_of_bounding_box</div>';
                i.$mainWrapper = d.addClass("fpd-container fpd-clearfix fpd-grid-columns-" + q.gridColumns).html(a + '<div class="fpd-main-wrapper">' + b + '<div class="fpd-snap-line-h"></div><div class="fpd-snap-line-v"></div><div class="fpd-product-stage" style="width:' + q.stageWidth + "px;height: " + q.stageHeight + 'px;"></div></div>').children(".fpd-main-wrapper"), d.after('<div class="fpd-device-info">' + i.getTranslation("misc", "not_supported_device_info") + "</div>"), i.$productStage = i.$mainWrapper.children(".fpd-product-stage"), i.$elementTooltip = i.$mainWrapper.children(".fpd-element-tooltip"), f = d.children(".fpd-loader-wrapper"), y(f.find(".fpd-loader-text")), y(i.$elementTooltip), q.modalMode && y(k.find(".fpd-modal-overlay .fpd-done")), "string" == typeof q.editorMode && (l = $('<div class="fpd-editor-box"><h5></h5><div class="fpd-clearfix"></div></div>'), $(q.editorMode).append(l));
                var e = "desktop";
                j.resize(function() {
                    i.currentElement && i.currentElement.isEditing || (i.currentElement && i.deselectElement(), j.width() < 568 && !i.$container.hasClass("fpd-topbar") ? (i.$container.removeClass("fpd-sidebar").addClass("fpd-topbar"), i.mainBar && !q.mainBarContainer && i.mainBar.setContentWrapper("draggable-dialog"), e = "smartphone") : "smartphone" === e && j.width() > 568 && -1 === initCSSClasses.search("fpd-topbar") && i.$container.hasClass("fpd-topbar") && (i.$container.removeClass("fpd-topbar").addClass("fpd-sidebar"), i.mainBar && !q.mainBarContainer && i.mainBar.setContentWrapper("sidebar"), e = "monitor"), i.currentViewInstance && i.currentViewInstance.resetCanvasSize())
                }), c.is(".fpd-category") && c.filter(".fpd-category").size() > 1 ? c.each(function(a, b) {
                    var c = $(b);
                    v(c.children(".fpd-product"), c.attr("title"))
                }) : (c = 0 === c.filter(".fpd-category").size() ? c : c.children(".fpd-product"), v(c, !1)), q.templatesDirectory ? t() : u()
            },
            t = function() {
                B(), anonymFuncs.loadProductDesignerTemplate = function(a) {
                    d.trigger("templateLoad", [this.url]), g = $(a), g.find("[data-defaulttext]").each(function(a, b) {
                        y($(b))
                    }), q.mainBarContainer ? (d.addClass("fpd-main-bar-container-enabled"), e = $(q.mainBarContainer).addClass("fpd-container fpd-main-bar-container fpd-tabs fpd-tabs-top fpd-sidebar fpd-grid-columns-" + q.gridColumns).html(g.children(".fpd-mainbar")).children(".fpd-mainbar")) : e = d.prepend(g.children(".fpd-mainbar")).children(".fpd-mainbar"), h = g.children(".fpd-modules"), d.hasClass("fpd-sidebar") ? d.height(q.stageHeight) : d.width(q.stageWidth), k.on("click", ".fpd-module-tabs > div", function() {
                        var a = $(this),
                            b = $(this).data("context");
                        a.addClass("fpd-active").siblings().removeClass("fpd-active"), a.parent().next(".fpd-module-tabs-content").children().hide().filter('[data-context="' + b + '"]').show()
                    }), i.stageOffCanvas = new FPDStageOffCanvas(i, g.children(".fpd-stage-off-canvas"), h), q.mainBarModules && (i.mainBar = new FPDMainBar(i, e, h, g.children(".fpd-draggable-dialog"))), q.actions && (i.actions = new FPDActions(i, g.children(".fpd-actions")));
                    var b = new FPDToolbar(g.children(".fpd-element-toolbar"), i);
                    d.on("elementSelect", function(a, c) {
                        if (c && i.currentViewInstance) {
                            if (c.uploadZone && c.opacity && !i.mainOptions.editorMode) {
                                c.set("borderColor", "transparent");
                                var d = $.extend({}, i.currentViewInstance.options.customAdds, c.customAdds ? c.customAdds : {});
                                return i.stageOffCanvas.toggleUploadZoneAdds(d), i.stageOffCanvas.showPanel("upload-zone-adds", !0), i.currentViewInstance.currentUploadZone = c.title, void b.toggle(!1)
                            }
                            b.update(c), A(c)
                        } else b.toggle(!1), k.children(".fpd-element-toolbar").find("input").spectrum("destroy")
                    }).on("elementChange", function() {
                        b.toggle(!1)
                    }).on("elementModify", function(a, c, d) {
                        i.productCreated && !b.isTransforming && (void 0 !== d.fontSize && b.updateUIValue("fontSize", Number(d.fontSize)), void 0 !== d.scaleX && b.updateUIValue("scaleX", Number(d.scaleX).toFixed(2)), void 0 !== d.scaleY && b.updateUIValue("scaleY", Number(d.scaleY).toFixed(2)), void 0 !== d.angle && b.updateUIValue("angle", parseInt(d.angle)), void 0 !== d.text && b.updateUIValue("text", d.text), i.currentElement && b.updatePosition(i.currentElement))
                    }), $(".fpd-switch-container").click(function() {
                        function a(b, c) {
                            i.currentViewInstance.stage.setActiveObject(c), d.off("elementAdd", a)
                        }
                        var b = $(this);
                        if (b.hasClass("fpd-curved-text-switcher")) {
                            var c = i.currentViewInstance.getZIndex(i.currentElement),
                                e = i.currentElement.getText(),
                                f = i.currentViewInstance.getElementJSON(i.currentElement);
                            f.z = c, f.curved = "i-text" == i.currentElement.type, f.textAlign = "center", d.on("elementAdd", a), i.currentViewInstance.removeElement(i.currentElement), i.currentViewInstance.addElement("text", e, e, f)
                        }
                    }), $(".fpd-dropdown").click(function() {
                        $(this).toggleClass("fpd-active")
                    }), u()
                }, $.post(q.templatesDirectory + "productdesigner." + q.templatesType, anonymFuncs.loadProductDesignerTemplate)
            },
            u = function() {
                i.mainOptions.watermark && i.mainOptions.watermark.length > 3 && fabric.Image.fromURL(i.mainOptions.watermark, function(a) {
                    i.watermarkImg = a
                }), i.mainOptions.unsavedProductAlert && j.on("beforeunload", function() {
                    return i.doUnsavedAlert ? i.getTranslation("misc", "unsaved_product_alert") : void 0
                }), k.on("click", ".fpd-modal-close", function() {
                    var a = $(this);
                    a.parents(".fpd-modal-product-designer").length && k.addClass("fpd-modal-mode-active"), a.parents(".fpd-modal-overlay").fadeOut(200, function() {
                        a.removeClass("fpd-fullscreen")
                    }), k.removeClass("fpd-overflow-hidden"), a.parents(".fpd-modal-product-designer:first").size() > 0 && i.deselectElement()
                }), k.on("mouseup touchend", function(a) {
                    var b = $(a.target);
                    b.hasClass("fpd-container") || 0 !== b.parents(".fpd-container").length || b.hasClass("fpd-element-toolbar") || 0 !== b.parents(".fpd-element-toolbar").length || !i.mainOptions.deselectActiveOnOutside || 0 !== b.parents(".sp-container").length || i.deselectElement()
                }), d.on("click", ".fpd-off-canvas-upload-zone > .fpd-off-canvas-nav > div", function() {
                    {
                        var a = $(this);
                        a.data("module")
                    }
                    a.addClass("fpd-active").siblings().removeClass("fpd-active")
                }), k.on("mouseover mouseout mousemove", '[data-module="designs"] .fpd-item, [data-module="images"] .fpd-item', function(a) {
                    var b = $(this),
                        c = null;
                    if (i.currentViewInstance && i.currentViewInstance.currentUploadZone && $(a.target).parents(".fpd-upload-zone-adds-panel").size() > 0) {
                        var d = i.currentViewInstance.getUploadZone(i.currentViewInstance.currentUploadZone);
                        d && d.price && (c = d.price)
                    }
                    if ("mouseover" === a.type && b.data("source")) m = $('<div class="fpd-thumbnail-preview")"><picture></picture></div>'), FPDUtil.loadGridImage(m.children("picture"), b.data("source")), b.parents('[data-module="images"]:first').size() > 0 && null === c ? i.currentViewInstance && i.currentViewInstance.options.customImageParameters.price && (c = i.mainOptions.priceFormat.replace("%d", i.currentViewInstance.options.customImageParameters.price)) : (b.data("title") && (m.addClass("fpd-title-enabled"), m.append('<div class="fpd-preview-title">' + b.data("title") + "</div>")), b.data("parameters") && b.data("parameters").price && null === c && (c = i.mainOptions.priceFormat.replace("%d", b.data("parameters").price))), c && m.append('<div class="fpd-preview-price">' + c + "</div>"), k.append(m);
                    else if (null !== m && "mousemove" === a.type) {
                        var e = a.pageX + 10 + m.outerWidth() > j.width() ? j.width() - m.outerWidth() : a.pageX + 10;
                        m.css({
                            left: e,
                            top: a.pageY + 10
                        })
                    } else null !== m && "mouseout" === a.type && (m.siblings(".fpd-thumbnail-preview").remove(), m.remove())
                }), i.mainOptions.loadFirstProductInStage && i.products.length > 0 && !stageCleared ? i.selectProduct(0) : i.toggleSpinner(!1), d.trigger("ready"), j.resize()
            },
            v = function(a, b) {
                for (var c = [], d = 0; d < a.length; ++d) {
                    c = $(a.get(d)).children(".fpd-product"), c.splice(0, 0, a.get(d));
                    var e = [];
                    c.each(function(a, b) {
                        var c = $(b),
                            d = {
                                title: b.title,
                                thumbnail: c.data("thumbnail"),
                                elements: [],
                                options: void 0 === c.data("options") && "object" != typeof c.data("options") ? q : p.merge(q, c.data("options"))
                            };
                        0 === a && c.data("producttitle") && (d.productTitle = c.data("producttitle")), 0 === a && c.data("productthumbnail") && (d.productThumbnail = c.data("productthumbnail")), c.children("img,span").each(function(a, b) {
                            var c, e = $(b);
                            c = e.is("img") ? void 0 == e.data("src") ? e.attr("src") : e.data("src") : e.text();
                            var f = {
                                type: e.is("img") ? "image" : "text",
                                source: c,
                                title: e.attr("title"),
                                parameters: void 0 == e.data("parameters") || e.data("parameters").length <= 2 ? {} : e.data("parameters")
                            };
                            d.elements.push(f)
                        }), e.push(d)
                    }), i.addProduct(e, b)
                }
            },
            w = function(a) {
                if ($('[data-action="snap"]').hasClass("fpd-active")) {
                    var b = 40,
                        c = a.getCenterPoint(),
                        d = {
                            x: .5 * i.currentViewInstance.options.stageWidth,
                            y: .5 * i.currentViewInstance.options.stageHeight
                        };
                    Math.abs(c.x - d.x) < b ? (a.left = d.x, i.$mainWrapper.children(".fpd-snap-line-v").css("left", "50%").show()) : i.$mainWrapper.children(".fpd-snap-line-v").hide(),
                        Math.abs(c.y - d.y) < b ? (a.top = d.y, i.$mainWrapper.children(".fpd-snap-line-h").css("top", "50%").show()) : i.$mainWrapper.children(".fpd-snap-line-h").hide()
                }
            },
            x = function(a) {
                for (var b = 0; b < i.products.length; ++b)
                    if (i.products[b].name === a) return b;
                return !1
            },
            y = function(a) {
                if (i.langJson) {
                    var b = "";
                    b = void 0 !== a.attr("placeholder") ? a.attr("placeholder") : void 0 !== a.attr("title") ? a.attr("title") : void 0 !== a.data("title") ? a.data("title") : a.text();
                    var c = b.split("."),
                        d = i.langJson[c[0]],
                        e = "";
                    d ? (e = d[c[1]], void 0 === e && (e = a.data("defaulttext"))) : e = a.data("defaulttext");
                    var f = i.languageJSON[c[0]];
                    f[c[1]] = e
                } else e = a.data("defaulttext");
                void 0 !== a.attr("placeholder") ? a.attr("placeholder", e).text("") : void 0 !== a.attr("title") ? a.attr("title", e) : void 0 !== a.data("title") ? a.data("title", e) : a.text(e)
            },
            z = function(a, b) {
                0 === a.length ? i.$mainWrapper.find('[data-action="undo"]').addClass("fpd-disabled") : i.$mainWrapper.find('[data-action="undo"]').removeClass("fpd-disabled"), 0 === b.length ? i.$mainWrapper.find('[data-action="redo"]').addClass("fpd-disabled") : i.$mainWrapper.find('[data-action="redo"]').removeClass("fpd-disabled")
            },
            A = function(a) {
                if (null !== l) {
                    l.children("div").empty(), l.children("h5").text(a.title);
                    for (var b = 0; b < i.mainOptions.editorBoxParameters.length; ++b) {
                        var c = i.mainOptions.editorBoxParameters[b];
                        value = a[c], void 0 !== value && (value = "number" == typeof value ? value.toFixed(2) : value, value = "object" == typeof value ? value.source.src : value, l.children("div").append("<p><i>" + c + '</i>: <input type="text" value="' + value + '" readonly /></p>'))
                    }
                }
            },
            B = function() {
                i.mainOptions.editorMode || (0 === i.plainProducts.length || 1 === i.plainProducts.length ? i.$container.addClass("fpd-products-module-hidden") : i.$container.removeClass("fpd-products-module-hidden"))
            },
            C = function() {
                if (i.viewInstances.length < i.currentViews.length) i.addView(i.currentViews[i.viewInstances.length]);
                else {
                    if (d.off("viewCreate", C), i.toggleSpinner(!1), i.selectView(0), !i.mainOptions.editorMode && i.currentViewInstance)
                        for (var a = i.currentViewInstance.stage.getObjects(), b = null, c = 0; c < a.length; ++c) {
                            var e = a[c];
                            e.autoSelect && !e.hasUploadZone && (b = e)
                        }
                    b && i.currentViewInstance && setTimeout(function() {
                        i.currentViewInstance.stage.setActiveObject(b), b.setCoords(), i.currentViewInstance.stage.renderAll()
                    }, 10), i.productCreated = !0, d.trigger("productCreate", [i.currentViews])
                }
            };
        this.addProduct = function(a, b) {
            var c = x(b);
            c === !1 ? (c = i.products.length, i.products[c] = {
                name: b,
                products: []
            }, i.products[c].products.push(a)) : i.products[c].products.push(a), this.plainProducts.push(a), B()
        }, this.selectProduct = function(a, b) {
            i.currentCategoryIndex = "undefined" == typeof b ? i.currentCategoryIndex : b;
            var c = i.products[i.currentCategoryIndex];
            i.currentProductIndex = a, 0 > a ? currentProductIndex = 0 : a > c.products.length - 1 && (i.currentProductIndex = c.products.length - 1);
            var d = c.products[i.currentProductIndex];
            i.loadProduct(d, q.replaceInitialElements)
        }, this.loadProduct = function(a, b) {
            b = "undefined" != typeof b ? b : !1, f.is(":hidden") && i.toggleSpinner(!0), i.productCreated = i.doUnsavedAlert = productIsCustomized = !1, b && (n = [], n = i.getCustomElements()), i.clear(), i.currentViews = a;
            var c = '<div class="fpd-views-selection fpd-grid-contain fpd-clearfix"></div>';
            i.$viewSelectionWrapper = d.hasClass("fpd-views-outside") ? d.after(c).nextAll(".fpd-views-selection:first") : i.$mainWrapper.append(c).children(".fpd-views-selection:first"), d.on("viewCreate", C), i.currentViews && i.addView(i.currentViews[0])
        }, this.addView = function(a) {
            i.$viewSelectionWrapper.append('<div class="fpd-shadow-1 fpd-item fpd-tooltip" title="' + a.title + '"><picture style="background-image: url(' + a.thumbnail + ');"></picture></div>').children("div:last").click(function() {
                i.selectView(i.$viewSelectionWrapper.children("div").index($(this)))
            }), a.options = $.extend({}, i.mainOptions, a.options);
            var b = new FancyProductDesignerView(i.$productStage, a, function(a) {
                if (0 === $(a.stage.wrapperEl).parent().size()) return void a.clear();
                if (0 == i.viewInstances.length && a.resetCanvasSize(), n.length > 0)
                    for (var b = 0; b < n.length; ++b) {
                        var c = n[b];
                        if (c.viewIndex === i.viewInstances.length) {
                            var e = c.element;
                            a.stage.add(e)
                        }
                    }
                i.viewInstances.push(a), d.trigger("viewCreate", [a])
            });
            b.stage.on({
                "object:moving": function(a) {
                    w(a.target)
                }
            }), o.push(b), $(b).on("elementAdd", function(a, b) {
                if (b.colorLinkGroup && b.colorLinkGroup.length > 0) {
                    var c = this.getIndex();
                    if (i.colorLinkGroups.hasOwnProperty(b.colorLinkGroup)) {
                        if (i.colorLinkGroups[b.colorLinkGroup].elements.push({
                                id: b.id,
                                viewIndex: c
                            }), "object" == typeof b.colors) {
                            var e = i.colorLinkGroups[b.colorLinkGroup].colors.concat(b.colors);
                            i.colorLinkGroups[b.colorLinkGroup].colors = FPDUtil.arrayUnique(e)
                        }
                    } else i.colorLinkGroups[b.colorLinkGroup] = {
                        elements: [{
                            id: b.id,
                            viewIndex: c
                        }],
                        colors: []
                    }, "object" == typeof b.colors && (i.colorLinkGroups[b.colorLinkGroup].colors = b.colors)
                }
                d.trigger("elementAdd", [b])
            }).on("boundingBoxToggle", function(a, b, c) {
                d.trigger("boundingBoxToggle", [b, c])
            }).on("elementSelect", function(a, b) {
                i.currentElement = b, b ? i.stageOffCanvas && !b.hasUploadZone && i.stageOffCanvas.toggle(!1) : (i.$elementTooltip && i.$elementTooltip.hide(), i.$mainWrapper.children(".fpd-snap-line-h, .fpd-snap-line-v").hide()), d.trigger("elementSelect", [b])
            }).on("elementChange", function(a, b, c) {
                A(c), d.trigger("elementChange", [b, c])
            }).on("elementModify", function(a, b, c) {
                d.trigger("elementModify", [b, c])
            }).on("undoRedoSet", function(a, b, c) {
                i.doUnsavedAlert = productIsCustomized = !0, z(b, c), d.trigger("undoRedoSet", [b, c])
            }).on("priceChange", function(a, b) {
                i.currentPrice = 0;
                for (var c = 0; c < o.length; ++c) i.currentPrice += o[c].totalPrice;
                d.trigger("priceChange", [b, i.currentPrice])
            }).on("elementCheckContainemt", function(a, b, c) {
                "inside" === c && (b.isOut ? i.$elementTooltip.css({
                    left: b.oCoords.mb.x,
                    top: b.oCoords.tl.y - i.$elementTooltip.outerHeight() - 20 + i.$productStage.position().top
                }).show() : i.$elementTooltip.hide())
            }).on("elementColorChange", function(a, b, c, d) {
                if (i.productCreated && d && b.colorLinkGroup && b.colorLinkGroup.length > 0 && "path-group" !== b.type) {
                    var e = i.colorLinkGroups[b.colorLinkGroup];
                    if (e && e.elements)
                        for (var f = 0; f < e.elements.length; ++f) {
                            var g = e.elements[f].id,
                                h = e.elements[f].viewIndex,
                                j = i.getElementByID(g, h);
                            j && j !== b && c && i.viewInstances[h].changeColor(j, c, !1, !1)
                        }
                }
            }).on("elementRemove", function(a, b) {
                d.trigger("elementRemove", [b])
            }), b.setup(), FPDUtil.updateTooltip(), i.$viewSelectionWrapper.children().size() > 1 ? i.$viewSelectionWrapper.show() : i.$viewSelectionWrapper.hide()
        }, this.selectView = function(a) {
            if (null !== i.currentViews) {
                if (i.currentViewIndex = a, 0 > a ? i.currentViewIndex = 0 : a > i.currentViews.length - 1 && (i.currentViewIndex = i.currentViews.length - 1), i.$viewSelectionWrapper.children("div").removeClass("fpd-view-active").eq(a).addClass("fpd-view-active"), i.currentViewInstance && (i.currentViewInstance.undos = [], i.currentViewInstance.redos = []), i.currentViewInstance = i.viewInstances[i.currentViewIndex], i.deselectElement(), i.$productStage.children(".fpd-view-stage").addClass("fpd-hidden").eq(i.currentViewIndex).removeClass("fpd-hidden"), i.currentViewInstance.stage.renderAll(), e && e.find(".fpd-navigation").size()) {
                    var b = i.currentViewInstance.options,
                        c = e.find(".fpd-navigation");
                    c.children('[data-module="designs"]').toggleClass("fpd-disabled", !b.customAdds.designs), c.children('[data-module="images"]').toggleClass("fpd-disabled", !b.customAdds.uploads), c.children('[data-module="text"]').toggleClass("fpd-disabled", !b.customAdds.texts), (!d.hasClass("fpd-topbar") && 0 === c.children(".fpd-active").size() || c.children(".fpd-active").hasClass("fpd-disabled")) && c.children(":not(.fpd-disabled)").first().click(), i.$container.hasClass("fpd-products-module-hidden") && c.children(".fpd-active").filter('[data-module="products"]').length > 0 && c.children(":not(.fpd-disabled)").eq(1).click()
                }
                i.$productStage.width(i.currentViewInstance.options.stageWidth), i.currentViewInstance.resetCanvasSize(), z(i.currentViewInstance.undos, i.currentViewInstance.redos), d.trigger("viewSelect", [i.currentViewIndex, i.currentViewInstance])
            }
        }, this.addElement = function(a, b, c, d, e) {
            if (e = "undefined" != typeof e ? e : i.currentViewIndex, d = "undefined" != typeof d ? d : {}, i.viewInstances[e].addElement(a, b, c, d), d.replace && d.replaceInAllViews)
                for (var f = 0; f < i.viewInstances.length; ++f) {
                    var g = i.viewInstances[f];
                    e !== f && null !== g.getElementByReplace(d.replace) && g.addElement(a, b, c, d, f)
                }
        }, this.setElementParameters = function(a, b, c) {
            return b = "undefined" == typeof b ? i.stage.getActiveObject() : b, b && void 0 !== a ? (c = "undefined" == typeof c ? i.currentViewIndex : c, void i.viewInstances[c].setElementParameters(a, b)) : !1
        }, this.clear = function() {
            null !== i.currentViews && (d.off("viewCreate", C), i.deselectElement(), i.resetZoom(), i.currentViewIndex = i.currentPrice = 0, i.currentViewInstance = i.currentViews = i.currentElement = null, i.$mainWrapper.find(".fpd-view-stage").remove(), k.find(".fpd-views-selection").remove(), i.viewInstances = [], o = [], d.trigger("clear"), d.trigger("priceChange", [0, 0]), stageCleared = !0)
        }, this.deselectElement = function() {
            i.currentViewInstance && i.currentViewInstance.deselectElement()
        }, this.getProductDataURL = function(a, b, c) {
            function d(g) {
                g.options.stageWidth > e.getWidth() && e.setDimensions({
                    width: g.options.stageWidth
                }), g.toDataURL(function(b) {
                    fabric.Image.fromURL(b, function(b) {
                        e.add(b), f > 0 && (b.setTop(e.getHeight()), e.setDimensions({
                            height: e.getHeight() + g.options.stageHeight
                        })), f++, f < i.viewInstances.length ? d(i.viewInstances[f]) : (a(e.toDataURL(c)), e.dispose(), k.children(".fpd-hidden-canvas, #fpd-hidden-canvas").remove(), i.currentViewInstance && i.currentViewInstance.resetCanvasSize())
                    })
                }, b, {}, i.watermarkImg)
            }
            a = "undefined" != typeof a ? a : function() {}, b = "undefined" != typeof b ? b : "transparent", c = "undefined" != typeof c ? c : {}, 0 === i.viewInstances.length && a(""), k.append('<canvas id="fpd-hidden-canvas"></canvas>');
            var e = new fabric.Canvas("fpd-hidden-canvas", {
                    containerClass: "fpd-hidden fpd-hidden-canvas"
                }),
                f = 0,
                g = i.viewInstances[0];
            e.setDimensions({
                width: g.options.stageWidth,
                height: g.options.stageHeight
            }), d(g)
        }, this.getViewsDataURL = function(a, b, c) {
            a = "undefined" != typeof a ? a : function() {}, b = "undefined" != typeof b ? b : "transparent", c = "undefined" != typeof c ? c : {};
            for (var d = [], e = 0; e < i.viewInstances.length; ++e) i.viewInstances[e].toDataURL(function(b) {
                d.push(b), d.length === i.viewInstances.length && a(d)
            }, b, c, i.watermarkImg)
        }, this.getViewsSVG = function(a, b) {
            for (var c = [], d = 0; d < i.viewInstances.length; ++d) c.push(i.viewInstances[d].toSVG(a, b));
            return c
        }, this.toggleSpinner = function(a, b) {
            a = "undefined" == typeof a ? !0 : a, b = "undefined" == typeof b ? "" : b, a ? f.fadeIn(300).find(".fpd-loader-text").text(b) : f.stop().fadeOut(300)
        }, this.getElementByTitle = function(a, b) {
            if ("undefined" == typeof b) {
                for (var c = 0; c < i.viewInstances.length; ++c)
                    for (var d = i.viewInstances[c].stage.getObjects(), e = 0; e < d.length; ++e)
                        if (d[e].title == a) return d[e]
            } else
                for (var d = i.viewInstances[b].stage.getObjects(), c = 0; c < d.length; ++c)
                    if (d[c].title == a) return d[c]
        }, this.getElements = function(a) {
            if (this.deselectElement(), "undefined" == typeof a) {
                for (var b = [], c = 0; c < i.viewInstances.length; ++c) b.push(i.viewInstances[c].stage.getObjects());
                return b
            }
            return i.viewInstances[a].stage.getObjects()
        }, this.print = function() {
            _createPopupImage = function(a) {
                for (var b = new Array, c = 0, d = 0; d < a.length; ++d) {
                    var e = new Image;
                    e.src = a[d], e.onload = function() {
                        if (b.push(this), c++, c == a.length) {
                            var d = window.open("", "", "width=" + b[0].width + ",height=" + b[0].height * a.length + ",location=no,menubar=no,scrollbars=yes,status=no,toolbar=no");
                            FPDUtil.popupBlockerAlert(d), d.document.title = "Print Image";
                            for (var e = 0; e < b.length; ++e) $(d.document.body).append('<img src="' + b[e].src + '" />');
                            setTimeout(function() {
                                d.print()
                            }, 1e3)
                        }
                    }
                }
            }, i.getViewsDataURL(_createPopupImage)
        }, this.createImage = function(a, b, c, d) {
            "undefined" == typeof a && (a = !0), "undefined" == typeof b && (b = !1), c = "undefined" != typeof c ? c : "transparent", d = "undefined" != typeof d ? d : {}, format = void 0 === d.format ? "png" : d.format, i.getProductDataURL(function(c) {
                var d = new Image;
                d.src = c, d.onload = function() {
                    if (a) {
                        var c = window.open("", "_blank");
                        FPDUtil.popupBlockerAlert(c), c.document.title = "Product Image", $(c.document.body).append('<img src="' + this.src + '" download="product.' + format + '" />'), b && (window.location.href = c.document.getElementsByTagName("img")[0].src.replace("image/" + format, "image/octet-stream"))
                    }
                }
            }, c, d)
        }, this.setZoom = function(a) {
            if (this.deselectElement(), i.currentViewInstance) {
                var b = i.currentViewInstance.responsiveScale,
                    c = new fabric.Point(.5 * i.currentViewInstance.stage.getWidth(), .5 * i.currentViewInstance.stage.getHeight());
                i.currentViewInstance.stage.zoomToPoint(c, a * b), 1 == a && i.resetZoom()
            }
        }, this.resetZoom = function() {
            if (this.deselectElement(), i.currentViewInstance) {
                var a = i.currentViewInstance.responsiveScale;
                i.currentViewInstance.stage.zoomToPoint(new fabric.Point(0, 0), a), i.currentViewInstance.stage.absolutePan(new fabric.Point(0, 0))
            }
        }, this.getElementByID = function(a, b) {
            return b = "undefined" == typeof b ? i.currentViewIndex : b, i.viewInstances[b].getElementByID(a)
        }, this.getProduct = function(a, b) {
            if (a = "undefined" != typeof a ? a : !1, b = "undefined" != typeof b ? b : !1, b && !productIsCustomized) return FPDUtil.showModal(i.getTranslation("misc", "customization_required_info")), !1;
            this.deselectElement(), this.resetZoom(), i.doUnsavedAlert = !1;
            for (var c = this.getElements(), d = 0; d < c.length; ++d)
                for (var e = 0; e < c[d].length; ++e)
                    if (c[d][e].isOut) return FPDUtil.showModal(c[d][e].title + ": " + i.getTranslation("misc", "out_of_bounding_box")), !1;
            for (var f = [], d = 0; d < i.viewInstances.length; ++d) {
                var g = i.viewInstances[d],
                    h = {
                        stageWidth: g.options.stageWidth,
                        stageHeight: g.options.stageHeight,
                        customAdds: g.options.customAdds
                    };
                f.push({
                    title: g.title,
                    thumbnail: g.thumbnail,
                    elements: [],
                    options: h
                })
            }
            for (var d = 0; d < c.length; ++d)
                for (var e = 0; e < c[d].length; ++e) {
                    var j = c[d][e];
                    if (void 0 !== j.title && void 0 !== j.source) {
                        var k = {
                            title: j.title,
                            source: j.source,
                            parameters: i.viewInstances[d].getElementJSON(j),
                            type: FPDUtil.getType(j.type)
                        };
                        a ? j.isEditable && f[d].elements.push(k) : f[d].elements.push(k)
                    }
                }
            return f
        }, this.getTranslation = function(a, b) {
            return i.langJson && (a = i.langJson[a]) ? a[b] : ""
        }, this.getCustomElements = function(a) {
            a = "undefined" == typeof a ? "all" : a;
            for (var b = this.getElements(), c = [], d = 0; d < b.length; ++d)
                for (var e = b[d], f = 0; f < e.length; ++f) {
                    var g = e[f];
                    g.isCustom && ("image" === a || "text" === a ? FPDUtil.getType(g.type) === a && c.push({
                        element: g,
                        viewIndex: d
                    }) : c.push({
                        element: g,
                        viewIndex: d
                    }))
                }
            return c
        }, this.addCustomImage = function(a, b) {
            var c = new Image;
            c.src = a, this.toggleSpinner(), c.onload = function() {
                var c = this.height,
                    d = this.width,
                    e = i.currentViewInstance.options.customImageParameters,
                    f = 1;
                return FPDUtil.checkImageDimensions(i, d, c) ? (f = FPDUtil.getScalingByDimesions(d, c, e.resizeToW, e.resizeToH), i.addElement("image", a, b, $.extend({}, e, {
                    scaleX: f,
                    scaleY: f,
                    isCustom: !0
                })), void i.toggleSpinner(!1)) : (i.toggleSpinner(!1), !1)
            }, c.onerror = function() {
                FPDUtil.showModal("Image could not be loaded!")
            }
        }, this.setDimensions = function(a, b) {
            q.stageWidth = i.mainOptions.stageWidth = a, q.stageHeight = i.mainOptions.stageHeight = b, i.$container.find(".fpd-product-stage").width(a);
            for (var c = 0; c < i.viewInstances.length; ++c) i.viewInstances[c].options.stageWidth = a, i.viewInstances[c].options.stageHeight = b, i.viewInstances[c].resetCanvasSize()
        }, r()
    };
if (this.JpegMeta) throw Error("Library included multiple times");
var JpegMeta = {};
JpegMeta.stringIsClean = function(a) {
    for (var b = 0; b < a.length; b++)
        if (a.charCodeAt(b) < 32) return !1;
    return !0
}, JpegMeta.parseNum = function(a, b, c, d) {
    var e, f, g = ">" === a;
    for (void 0 === c && (c = 0), void 0 === d && (d = b.length - c), e = g ? c : c + d - 1; g ? c + d > e : e >= c; g ? e++ : e--) f <<= 8, f += b.charCodeAt(e);
    return f
}, JpegMeta.parseSnum = function(a, b, c, d) {
    var e, f, g, h = ">" === a;
    for (void 0 === c && (c = 0), void 0 === d && (d = b.length - c), e = h ? c : c + d - 1; h ? c + d > e : e >= c; h ? e++ : e--) void 0 === g && (g = 128 === (128 & b.charCodeAt(e))), f <<= 8, f += g ? 255 & ~b.charCodeAt(e) : b.charCodeAt(e);
    return g && (f += 1, f *= -1), f
}, JpegMeta.Rational = function(a, b) {
    return this.num = a, this.den = b || 1, this
}, JpegMeta.Rational.prototype.toString = function() {
    return 0 === this.num ? "" + this.num : 1 === this.den ? "" + this.num : 1 === this.num ? this.num + " / " + this.den : this.num / this.den
}, JpegMeta.Rational.prototype.asFloat = function() {
    return this.num / this.den
}, JpegMeta.MetaGroup = function(a, b) {
    return this.fieldName = a, this.description = b, this.metaProps = {}, this
}, JpegMeta.MetaGroup.prototype._addProperty = function(a, b, c) {
    var d = new JpegMeta.MetaProp(a, b, c);
    this[d.fieldName] = d, this.metaProps[d.fieldName] = d
}, JpegMeta.MetaGroup.prototype.toString = function() {
    return "[MetaGroup " + this.description + "]"
}, JpegMeta.MetaProp = function(a, b, c) {
    return this.fieldName = a, this.description = b, this.value = c, this
}, JpegMeta.MetaProp.prototype.toString = function() {
    return "" + this.value
}, this.JpegMeta.JpegFile = function(a, b) {
    var c = this._SOS;
    this.metaGroups = {}, this._binary_data = a, this.filename = b;
    var d, e, f, g, h, i, j, k = 0,
        l = 0;
    if (this._binary_data.slice(0, 2) !== this._SOI_MARKER) throw new Error("Doesn't look like a JPEG file. First two bytes are " + this._binary_data.charCodeAt(0) + "," + this._binary_data.charCodeAt(1) + ".");
    for (k += 2; k < this._binary_data.length && (d = this._binary_data.charCodeAt(k++), e = this._binary_data.charCodeAt(k++), l = k, d == this._DELIM) && e !== c;) {
        for (h = JpegMeta.parseNum(">", this._binary_data, k, 2), k += h; k < this._binary_data.length;)
            if (d = this._binary_data.charCodeAt(k++), d == this._DELIM && (f = this._binary_data.charCodeAt(k++), 0 != f)) {
                k -= 2;
                break
            }
        g = k - l, this._markers[e] ? (i = this._markers[e][0], j = this._markers[e][1]) : (i = "UNKN", j = void 0), j && this[j](e, l + 2, g - 2)
    }
    if (void 0 === this.general) throw Error("Invalid JPEG file.");
    return this
}, this.JpegMeta.JpegFile.prototype.toString = function() {
    return "[JpegFile " + this.filename + " " + this.general.type + " " + this.general.pixelWidth + "x" + this.general.pixelHeight + " Depth: " + this.general.depth + "]"
}, this.JpegMeta.JpegFile.prototype._SOI_MARKER = "", this.JpegMeta.JpegFile.prototype._DELIM = 255, this.JpegMeta.JpegFile.prototype._EOI = 217, this.JpegMeta.JpegFile.prototype._SOS = 218, this.JpegMeta.JpegFile.prototype._sofHandler = function(a, b) {
    if (void 0 !== this.general) throw Error("Unexpected multiple-frame image");
    this._addMetaGroup("general", "General"), this.general._addProperty("depth", "Depth", JpegMeta.parseNum(">", this._binary_data, b, 1)), this.general._addProperty("pixelHeight", "Pixel Height", JpegMeta.parseNum(">", this._binary_data, b + 1, 2)), this.general._addProperty("pixelWidth", "Pixel Width", JpegMeta.parseNum(">", this._binary_data, b + 3, 2)), this.general._addProperty("type", "Type", this._markers[a][2])
}, this.JpegMeta.JpegFile.prototype._commentHandler = function(a, b, c) {
    var d, e;
    for (b++, c--, d = b, e = ""; b + c > d;) e += String.fromCharCode(this._binary_data.charCodeAt(d)), d++;
    this._addMetaGroup("comment", "Comment"), this.comment._addProperty("comment", "Comment", e)
}, this.JpegMeta.JpegFile.prototype._JFIF_IDENT = "JFIF\x00", this.JpegMeta.JpegFile.prototype._JFXX_IDENT = "JFXX\x00", this.JpegMeta.JpegFile.prototype._EXIF_IDENT = "Exif\x00", this.JpegMeta.JpegFile.prototype._types = {
    1: ["BYTE", 1],
    2: ["ASCII", 1],
    3: ["SHORT", 2],
    4: ["LONG", 4],
    5: ["RATIONAL", 8],
    6: ["SBYTE", 1],
    7: ["UNDEFINED", 1],
    8: ["SSHORT", 2],
    9: ["SLONG", 4],
    10: ["SRATIONAL", 8],
    11: ["FLOAT", 4],
    12: ["DOUBLE", 8]
}, this.JpegMeta.JpegFile.prototype._tifftags = {
    256: ["Image width", "ImageWidth"],
    257: ["Image height", "ImageLength"],
    258: ["Number of bits per component", "BitsPerSample"],
    259: ["Compression scheme", "Compression", {
        1: "uncompressed",
        6: "JPEG compression"
    }],
    262: ["Pixel composition", "PhotmetricInerpretation", {
        2: "RGB",
        6: "YCbCr"
    }],
    274: ["Orientation of image", "Orientation", {
        1: "Normal",
        2: "Reverse?",
        3: "Upside-down",
        4: "Upside-down Reverse",
        5: "90 degree CW",
        6: "90 degree CW reverse",
        7: "90 degree CCW",
        8: "90 degree CCW reverse"
    }],
    277: ["Number of components", "SamplesPerPixel"],
    284: ["Image data arrangement", "PlanarConfiguration", {
        1: "chunky format",
        2: "planar format"
    }],
    530: ["Subsampling ratio of Y to C", "YCbCrSubSampling"],
    531: ["Y and C positioning", "YCbCrPositioning", {
        1: "centered",
        2: "co-sited"
    }],
    282: ["X Resolution", "XResolution"],
    283: ["Y Resolution", "YResolution"],
    296: ["Resolution Unit", "ResolutionUnit", {
        2: "inches",
        3: "centimeters"
    }],
    273: ["Image data location", "StripOffsets"],
    278: ["Number of rows per strip", "RowsPerStrip"],
    279: ["Bytes per compressed strip", "StripByteCounts"],
    513: ["Offset to JPEG SOI", "JPEGInterchangeFormat"],
    514: ["Bytes of JPEG Data", "JPEGInterchangeFormatLength"],
    301: ["Transfer function", "TransferFunction"],
    318: ["White point chromaticity", "WhitePoint"],
    319: ["Chromaticities of primaries", "PrimaryChromaticities"],
    529: ["Color space transformation matrix coefficients", "YCbCrCoefficients"],
    532: ["Pair of black and white reference values", "ReferenceBlackWhite"],
    306: ["Date and time", "DateTime"],
    270: ["Image title", "ImageDescription"],
    271: ["Make", "Make"],
    272: ["Model", "Model"],
    305: ["Software", "Software"],
    315: ["Person who created the image", "Artist"],
    316: ["Host Computer", "HostComputer"],
    33432: ["Copyright holder", "Copyright"],
    34665: ["Exif tag", "ExifIfdPointer"],
    34853: ["GPS tag", "GPSInfoIfdPointer"]
}, this.JpegMeta.JpegFile.prototype._exiftags = {
    36864: ["Exif Version", "ExifVersion"],
    40960: ["FlashPix Version", "FlashpixVersion"],
    40961: ["Color Space", "ColorSpace"],
    37121: ["Meaning of each component", "ComponentsConfiguration"],
    37122: ["Compressed Bits Per Pixel", "CompressedBitsPerPixel"],
    40962: ["Pixel X Dimension", "PixelXDimension"],
    40963: ["Pixel Y Dimension", "PixelYDimension"],
    37500: ["Manufacturer notes", "MakerNote"],
    37510: ["User comments", "UserComment"],
    40964: ["Related audio file", "RelatedSoundFile"],
    36867: ["Date Time Original", "DateTimeOriginal"],
    36868: ["Date Time Digitized", "DateTimeDigitized"],
    37520: ["DateTime subseconds", "SubSecTime"],
    37521: ["DateTimeOriginal subseconds", "SubSecTimeOriginal"],
    37522: ["DateTimeDigitized subseconds", "SubSecTimeDigitized"],
    33434: ["Exposure time", "ExposureTime"],
    33437: ["FNumber", "FNumber"],
    34850: ["Exposure program", "ExposureProgram"],
    34852: ["Spectral sensitivity", "SpectralSensitivity"],
    34855: ["ISO Speed Ratings", "ISOSpeedRatings"],
    34856: ["Optoelectric coefficient", "OECF"],
    37377: ["Shutter Speed", "ShutterSpeedValue"],
    37378: ["Aperture Value", "ApertureValue"],
    37379: ["Brightness", "BrightnessValue"],
    37380: ["Exposure Bias Value", "ExposureBiasValue"],
    37381: ["Max Aperture Value", "MaxApertureValue"],
    37382: ["Subject Distance", "SubjectDistance"],
    37383: ["Metering Mode", "MeteringMode"],
    37384: ["Light Source", "LightSource"],
    37385: ["Flash", "Flash"],
    37386: ["Focal Length", "FocalLength"],
    37396: ["Subject Area", "SubjectArea"],
    41483: ["Flash Energy", "FlashEnergy"],
    41484: ["Spatial Frequency Response", "SpatialFrequencyResponse"],
    41486: ["Focal Plane X Resolution", "FocalPlaneXResolution"],
    41487: ["Focal Plane Y Resolution", "FocalPlaneYResolution"],
    41488: ["Focal Plane Resolution Unit", "FocalPlaneResolutionUnit"],
    41492: ["Subject Location", "SubjectLocation"],
    41493: ["Exposure Index", "ExposureIndex"],
    41495: ["Sensing Method", "SensingMethod"],
    41728: ["File Source", "FileSource"],
    41729: ["Scene Type", "SceneType"],
    41730: ["CFA Pattern", "CFAPattern"],
    41985: ["Custom Rendered", "CustomRendered"],
    41986: ["Exposure Mode", "Exposure Mode"],
    41987: ["White Balance", "WhiteBalance"],
    41988: ["Digital Zoom Ratio", "DigitalZoomRatio"],
    41989: ["Focal length in 35 mm film", "FocalLengthIn35mmFilm"],
    41990: ["Scene Capture Type", "SceneCaptureType"],
    41991: ["Gain Control", "GainControl"],
    41992: ["Contrast", "Contrast"],
    41993: ["Saturation", "Saturation"],
    41994: ["Sharpness", "Sharpness"],
    41995: ["Device settings description", "DeviceSettingDescription"],
    41996: ["Subject distance range", "SubjectDistanceRange"],
    42016: ["Unique image ID", "ImageUniqueID"],
    40965: ["Interoperability tag", "InteroperabilityIFDPointer"]
}, this.JpegMeta.JpegFile.prototype._gpstags = {
    0: ["GPS tag version", "GPSVersionID"],
    1: ["North or South Latitude", "GPSLatitudeRef"],
    2: ["Latitude", "GPSLatitude"],
    3: ["East or West Longitude", "GPSLongitudeRef"],
    4: ["Longitude", "GPSLongitude"],
    5: ["Altitude reference", "GPSAltitudeRef"],
    6: ["Altitude", "GPSAltitude"],
    7: ["GPS time (atomic clock)", "GPSTimeStamp"],
    8: ["GPS satellites usedd for measurement", "GPSSatellites"],
    9: ["GPS receiver status", "GPSStatus"],
    10: ["GPS mesaurement mode", "GPSMeasureMode"],
    11: ["Measurement precision", "GPSDOP"],
    12: ["Speed unit", "GPSSpeedRef"],
    13: ["Speed of GPS receiver", "GPSSpeed"],
    14: ["Reference for direction of movement", "GPSTrackRef"],
    15: ["Direction of movement", "GPSTrack"],
    16: ["Reference for direction of image", "GPSImgDirectionRef"],
    17: ["Direction of image", "GPSImgDirection"],
    18: ["Geodetic survey data used", "GPSMapDatum"],
    19: ["Reference for latitude of destination", "GPSDestLatitudeRef"],
    20: ["Latitude of destination", "GPSDestLatitude"],
    21: ["Reference for longitude of destination", "GPSDestLongitudeRef"],
    22: ["Longitude of destination", "GPSDestLongitude"],
    23: ["Reference for bearing of destination", "GPSDestBearingRef"],
    24: ["Bearing of destination", "GPSDestBearing"],
    25: ["Reference for distance to destination", "GPSDestDistanceRef"],
    26: ["Distance to destination", "GPSDestDistance"],
    27: ["Name of GPS processing method", "GPSProcessingMethod"],
    28: ["Name of GPS area", "GPSAreaInformation"],
    29: ["GPS Date", "GPSDateStamp"],
    30: ["GPS differential correction", "GPSDifferential"]
}, this.JpegMeta.JpegFile.prototype._iptctags = {
    0: ["Record Version", "recordVersion"],
    3: ["Object Type Reference", "objectType"],
    4: ["Object Attribute Reference", "objectAttribute"],
    5: ["Object Name", "objectName"],
    7: ["Edit Status", "editStatus"],
    8: ["Editorial Update", "editorialUpdate"],
    10: ["Urgency", "urgency"],
    12: ["Subject Reference", "subjectRef"],
    15: ["Category", "category"],
    20: ["Supplemental Category", "supplCategory"],
    22: ["Fixture Identifier", "fixtureID"],
    25: ["Keywords", "keywords"],
    26: ["Content Location Code", "contentLocCode"],
    27: ["Content Location Name", "contentLocName"],
    30: ["Release Date", "releaseDate"],
    35: ["Release Time", "releaseTime"],
    37: ["Expiration Date", "expirationDate"],
    38: ["Expiration Time", "expirationTime"],
    40: ["Special Instructions", "specialInstructions"],
    42: ["Action Advised", "actionAdvised"],
    45: ["Reference Service", "refService"],
    47: ["Reference Date", "refDate"],
    50: ["Reference Number", "refNumber"],
    55: ["Date Created", "dateCreated"],
    60: ["Time Created", "timeCreated"],
    62: ["Digital Creation Date", "digitalCreationDate"],
    63: ["Digital Creation Time", "digitalCreationTime"],
    65: ["Originating Program", "originatingProgram"],
    70: ["Program Version", "programVersion"],
    75: ["Object Cycle", "objectCycle"],
    80: ["By-line", "byline"],
    85: ["By-line Title", "bylineTitle"],
    90: ["City", "city"],
    92: ["Sub-location", "sublocation"],
    95: ["Province/State", "state"],
    100: ["Country Code", "countryCode"],
    101: ["Country Name", "countryName"],
    103: ["Original Transmission Reference", "origTransRef"],
    105: ["Headline", "headline"],
    110: ["Credit", "credit"],
    115: ["Source", "source"],
    116: ["Copyright Notice", "copyrightNotice"],
    118: ["Contact", "contact"],
    120: ["Caption/Abstract", "caption"],
    122: ["Writer/Editor", "writerEditor"],
    125: ["Rasterized Caption", "rasterizedCaption"],
    130: ["Image Type", "imageType"],
    131: ["Image Orientation", "imageOrientation"],
    135: ["Language Identifier", "languageID"],
    150: ["Audio Type", "audioType"],
    151: ["Audio Sampling Rate", "audioSamplingRate"],
    152: ["Audio Sampling Resolution", "audioSamplingRes"],
    153: ["Audio Duration", "audioDuration"],
    154: ["Audio Outcue", "audioOutcue"],
    200: ["Preview File Format", "previewFileFormat"],
    201: ["Preview File Format Version", "previewFileFormatVer"],
    202: ["Preview Data", "previewData"]
}, this.JpegMeta.JpegFile.prototype._markers = {
    192: ["SOF0", "_sofHandler", "Baseline DCT"],
    193: ["SOF1", "_sofHandler", "Extended sequential DCT"],
    194: ["SOF2", "_sofHandler", "Progressive DCT"],
    195: ["SOF3", "_sofHandler", "Lossless (sequential)"],
    197: ["SOF5", "_sofHandler", "Differential sequential DCT"],
    198: ["SOF6", "_sofHandler", "Differential progressive DCT"],
    199: ["SOF7", "_sofHandler", "Differential lossless (sequential)"],
    200: ["JPG", null, "Reserved for JPEG extensions"],
    201: ["SOF9", "_sofHandler", "Extended sequential DCT"],
    202: ["SOF10", "_sofHandler", "Progressive DCT"],
    203: ["SOF11", "_sofHandler", "Lossless (sequential)"],
    205: ["SOF13", "_sofHandler", "Differential sequential DCT"],
    206: ["SOF14", "_sofHandler", "Differential progressive DCT"],
    207: ["SOF15", "_sofHandler", "Differential lossless (sequential)"],
    196: ["DHT", null, "Define Huffman table(s)"],
    204: ["DAC", null, "Define arithmetic coding conditioning(s)"],
    208: ["RST0", null, "Restart with modulo 8 count 0"],
    209: ["RST1", null, "Restart with modulo 8 count 1"],
    210: ["RST2", null, "Restart with modulo 8 count 2"],
    211: ["RST3", null, "Restart with modulo 8 count 3"],
    212: ["RST4", null, "Restart with modulo 8 count 4"],
    213: ["RST5", null, "Restart with modulo 8 count 5"],
    214: ["RST6", null, "Restart with modulo 8 count 6"],
    215: ["RST7", null, "Restart with modulo 8 count 7"],
    216: ["SOI", null, "Start of image"],
    217: ["EOI", null, "End of image"],
    218: ["SOS", null, "Start of scan"],
    219: ["DQT", null, "Define quantization table(s)"],
    220: ["DNL", null, "Define number of lines"],
    221: ["DRI", null, "Define restart interval"],
    222: ["DHP", null, "Define hierarchical progression"],
    223: ["EXP", null, "Expand reference component(s)"],
    224: ["APP0", "_app0Handler", "Reserved for application segments"],
    225: ["APP1", "_app1Handler"],
    226: ["APP2", null],
    227: ["APP3", null],
    228: ["APP4", null],
    229: ["APP5", null],
    230: ["APP6", null],
    231: ["APP7", null],
    232: ["APP8", null],
    233: ["APP9", null],
    234: ["APP10", null],
    235: ["APP11", null],
    236: ["APP12", null],
    237: ["IPTC", "_iptcHandler", "IPTC Photo Metadata"],
    238: ["APP14", null],
    239: ["APP15", null],
    240: ["JPG0", null],
    241: ["JPG1", null],
    242: ["JPG2", null],
    243: ["JPG3", null],
    244: ["JPG4", null],
    245: ["JPG5", null],
    246: ["JPG6", null],
    247: ["JPG7", null],
    248: ["JPG8", null],
    249: ["JPG9", null],
    250: ["JPG10", null],
    251: ["JPG11", null],
    252: ["JPG12", null],
    253: ["JPG13", null],
    254: ["COM", "_commentHandler", "Comment"],
    1: ["JPG13", null]
}, this.JpegMeta.JpegFile.prototype._addMetaGroup = function(a, b) {
    var c = new JpegMeta.MetaGroup(a, b);
    return this[c.fieldName] = c, this.metaGroups[c.fieldName] = c, c
}, this.JpegMeta.JpegFile.prototype._parseIfd = function(a, b, c, d, e, f, g) {
    var h, i, j, k, l, m, n, o, p, q, r, s = JpegMeta.parseNum(a, b, c + d, 2);
    r = this._addMetaGroup(f, g);
    for (var t = 0; s > t; t++)
        if (h = c + d + 2 + 12 * t, i = JpegMeta.parseNum(a, b, h, 2), k = JpegMeta.parseNum(a, b, h + 2, 2), m = JpegMeta.parseNum(a, b, h + 4, 4), n = JpegMeta.parseNum(a, b, h + 8, 4), void 0 !== this._types[k]) {
            if (j = this._types[k][0], l = this._types[k][1], n = 4 >= l * m ? h + 8 : c + n, "UNDEFINED" == j) o = void 0;
            else if ("ASCII" == j) o = b.slice(n, n + m), o = o.split("\x00")[0], JpegMeta.stringIsClean(o) || (o = "");
            else {
                o = new Array;
                for (var u = 0; m > u; u++, n += l)("BYTE" == j || "SHORT" == j || "LONG" == j) && o.push(JpegMeta.parseNum(a, b, n, l)), ("SBYTE" == j || "SSHORT" == j || "SLONG" == j) && o.push(JpegMeta.parseSnum(a, b, n, l)), "RATIONAL" == j && (p = JpegMeta.parseNum(a, b, n, 4), q = JpegMeta.parseNum(a, b, n + 4, 4), o.push(new JpegMeta.Rational(p, q))), "SRATIONAL" == j && (p = JpegMeta.parseSnum(a, b, n, 4), q = JpegMeta.parseSnum(a, b, n + 4, 4), o.push(new JpegMeta.Rational(p, q))), o.push();
                1 === m && (o = o[0])
            }
            e.hasOwnProperty(i) ? r._addProperty(e[i][1], e[i][0], o) : console.log("WARNING(jpegmeta.js): Unknown tag: ", i)
        }
}, this.JpegMeta.JpegFile.prototype._jfifHandler = function(a, b) {
    if (void 0 !== this.jfif) throw Error("Multiple JFIF segments found");
    this._addMetaGroup("jfif", "JFIF"), this.jfif._addProperty("version_major", "Version Major", this._binary_data.charCodeAt(b + 5)), this.jfif._addProperty("version_minor", "Version Minor", this._binary_data.charCodeAt(b + 6)), this.jfif._addProperty("version", "JFIF Version", this.jfif.version_major.value + "." + this.jfif.version_minor.value), this.jfif._addProperty("units", "Density Unit", this._binary_data.charCodeAt(b + 7)), this.jfif._addProperty("Xdensity", "X density", JpegMeta.parseNum(">", this._binary_data, b + 8, 2)), this.jfif._addProperty("Ydensity", "Y Density", JpegMeta.parseNum(">", this._binary_data, b + 10, 2)), this.jfif._addProperty("Xthumbnail", "X Thumbnail", JpegMeta.parseNum(">", this._binary_data, b + 12, 1)), this.jfif._addProperty("Ythumbnail", "Y Thumbnail", JpegMeta.parseNum(">", this._binary_data, b + 13, 1))
}, this.JpegMeta.JpegFile.prototype._app0Handler = function(a, b) {
    var c = this._binary_data.slice(b, b + 5);
    c == this._JFIF_IDENT ? this._jfifHandler(a, b) : c == this._JFXX_IDENT
}, this.JpegMeta.JpegFile.prototype._app1Handler = function(a, b) {
    var c = this._binary_data.slice(b, b + 5);
    c == this._EXIF_IDENT && this._exifHandler(a, b + 6)
}, JpegMeta.JpegFile.prototype._exifHandler = function(a, b) {
    if (void 0 !== this.exif) throw new Error("Multiple JFIF segments found");
    var c, d, e, f = this._binary_data.slice(b, b + 2);
    if ("II" === f) c = "<";
    else {
        if ("MM" !== f) throw new Error("Malformed TIFF meta-data. Unknown endianess: " + f);
        c = ">"
    }
    if (d = JpegMeta.parseNum(c, this._binary_data, b + 2, 2), 42 !== d) throw new Error("Malformed TIFF meta-data. Bad magic: " + d);
    if (e = JpegMeta.parseNum(c, this._binary_data, b + 4, 4),
            this._parseIfd(c, this._binary_data, b, e, this._tifftags, "tiff", "TIFF"), this.tiff.ExifIfdPointer && this._parseIfd(c, this._binary_data, b, this.tiff.ExifIfdPointer.value, this._exiftags, "exif", "Exif"), this.tiff.GPSInfoIfdPointer) {
        if (this._parseIfd(c, this._binary_data, b, this.tiff.GPSInfoIfdPointer.value, this._gpstags, "gps", "GPS"), this.gps.GPSLatitude) {
            var g;
            g = this.gps.GPSLatitude.value[0].asFloat() + 1 / 60 * this.gps.GPSLatitude.value[1].asFloat() + 1 / 3600 * this.gps.GPSLatitude.value[2].asFloat(), "S" === this.gps.GPSLatitudeRef.value && (g = -g), this.gps._addProperty("latitude", "Dec. Latitude", g)
        }
        if (this.gps.GPSLongitude) {
            var h;
            h = this.gps.GPSLongitude.value[0].asFloat() + 1 / 60 * this.gps.GPSLongitude.value[1].asFloat() + 1 / 3600 * this.gps.GPSLongitude.value[2].asFloat(), "W" === this.gps.GPSLongitudeRef.value && (h = -h), this.gps._addProperty("longitude", "Dec. Longitude", h)
        }
    }
}, this.JpegMeta.JpegFile.prototype._iptcHandler = function(a, b, c) {
    this._addMetaGroup("iptc", "IPTC");
    for (var d, e, f, g, h = "<", i = JpegMeta.parseNum(h, this._binary_data, b + 4, 1), j = 28, k = 2, l = 0; c > l; l++)
        if (e = b + l, JpegMeta.parseNum(h, this._binary_data, e, 1) == k) {
            if (g = JpegMeta.parseNum(h, this._binary_data, e + 1, 1), tag_desc = this._iptctags[g], !tag_desc) continue;
            for (i = 0, d = 2; c > d && JpegMeta.parseNum(h, this._binary_data, e + d, 1) != j && JpegMeta.parseNum(h, this._binary_data, e + d + 1, 1) != k;) d++, i++;
            if (!i) continue;
            f = this._binary_data.slice(b + l + 2, b + l + 2 + i), f = f.replace("\x00", "").trim(), this.iptc._addProperty(tag_desc[1], tag_desc[0], f), l += i - 1
        }
}, "function" != typeof Object.create && (Object.create = function(a) {
    function b() {}
    return b.prototype = a, new b
}),
    function(a) {
        var b = {
            init: function(b, c) {
                var d = this;
                d.elem = c, d.$elem = a(c), d.imageSrc = d.$elem.data("zoom-image") ? d.$elem.data("zoom-image") : d.$elem.attr("src"), d.options = a.extend({}, a.fn.elevateZoom.options, b), d.options.tint && (d.options.lensColour = "none", d.options.lensOpacity = "1"), "inner" == d.options.zoomType && (d.options.showLens = !1), d.$elem.parent().removeAttr("title").removeAttr("alt"), d.zoomImage = d.imageSrc, d.refresh(1), a("#" + d.options.gallery + " a").click(function(b) {
                    return d.options.galleryActiveClass && (a("#" + d.options.gallery + " a").removeClass(d.options.galleryActiveClass), a(this).addClass(d.options.galleryActiveClass)), b.preventDefault(), d.zoomImagePre = a(this).data(a(this).data("zoom-image") ? "zoom-image" : "image"), d.swaptheimage(a(this).data("image"), d.zoomImagePre), !1
                })
            },
            refresh: function(a) {
                var b = this;
                setTimeout(function() {
                    b.fetch(b.imageSrc)
                }, a || b.options.refresh)
            },
            fetch: function(a) {
                var b = this,
                    c = new Image;
                c.onload = function() {
                    b.largeWidth = c.width, b.largeHeight = c.height, b.startZoom(), b.currentImage = b.imageSrc, b.options.onZoomedImageLoaded(b.$elem)
                }, c.src = a
            },
            startZoom: function() {
                var b = this;
                if (b.nzWidth = b.$elem.width(), b.nzHeight = b.$elem.height(), b.isWindowActive = !1, b.isLensActive = !1, b.isTintActive = !1, b.overWindow = !1, b.options.imageCrossfade && (b.zoomWrap = b.$elem.wrap('<div style="height:' + b.nzHeight + "px;width:" + b.nzWidth + 'px;" class="zoomWrapper" />'), b.$elem.css("position", "absolute")), b.zoomLock = 1, b.scrollingLock = !1, b.changeBgSize = !1, b.currentZoomLevel = b.options.zoomLevel, b.nzOffset = b.$elem.offset(), b.widthRatio = b.largeWidth / b.currentZoomLevel / b.nzWidth, b.heightRatio = b.largeHeight / b.currentZoomLevel / b.nzHeight, "window" == b.options.zoomType && (b.zoomWindowStyle = "overflow: hidden;background-position: 0px 0px;text-align:center;background-color: " + String(b.options.zoomWindowBgColour) + ";width: " + String(b.options.zoomWindowWidth) + "px;height: " + String(b.options.zoomWindowHeight) + "px;float: left;background-size: " + b.largeWidth / b.currentZoomLevel + "px " + b.largeHeight / b.currentZoomLevel + "px;display: none;z-index:100;border: " + String(b.options.borderSize) + "px solid " + b.options.borderColour + ";background-repeat: no-repeat;position: absolute;"), "inner" == b.options.zoomType) {
                    var c = b.$elem.css("border-left-width");
                    b.zoomWindowStyle = "overflow: hidden;margin-left: " + String(c) + ";margin-top: " + String(c) + ";background-position: 0px 0px;width: " + String(b.nzWidth) + "px;height: " + String(b.nzHeight) + "px;px;float: left;display: none;cursor:" + b.options.cursor + ";px solid " + b.options.borderColour + ";background-repeat: no-repeat;position: absolute;"
                }
                "window" == b.options.zoomType && (lensHeight = b.nzHeight < b.options.zoomWindowWidth / b.widthRatio ? b.nzHeight : String(b.options.zoomWindowHeight / b.heightRatio), lensWidth = b.largeWidth < b.options.zoomWindowWidth ? b.nzWidth : b.options.zoomWindowWidth / b.widthRatio, b.lensStyle = "background-position: 0px 0px;width: " + String(b.options.zoomWindowWidth / b.widthRatio) + "px;height: " + String(b.options.zoomWindowHeight / b.heightRatio) + "px;float: right;display: none;overflow: hidden;z-index: 999;-webkit-transform: translateZ(0);opacity:" + b.options.lensOpacity + ";filter: alpha(opacity = " + 100 * b.options.lensOpacity + "); zoom:1;width:" + lensWidth + "px;height:" + lensHeight + "px;background-color:" + b.options.lensColour + ";cursor:" + b.options.cursor + ";border: " + b.options.lensBorderSize + "px solid " + b.options.lensBorderColour + ";background-repeat: no-repeat;position: absolute;"), b.tintStyle = "display: block;position: absolute;background-color: " + b.options.tintColour + ";filter:alpha(opacity=0);opacity: 0;width: " + b.nzWidth + "px;height: " + b.nzHeight + "px;", b.lensRound = "", "lens" == b.options.zoomType && (b.lensStyle = "background-position: 0px 0px;float: left;display: none;border: " + String(b.options.borderSize) + "px solid " + b.options.borderColour + ";width:" + String(b.options.lensSize) + "px;height:" + String(b.options.lensSize) + "px;background-repeat: no-repeat;position: absolute;"), "round" == b.options.lensShape && (b.lensRound = "border-top-left-radius: " + String(b.options.lensSize / 2 + b.options.borderSize) + "px;border-top-right-radius: " + String(b.options.lensSize / 2 + b.options.borderSize) + "px;border-bottom-left-radius: " + String(b.options.lensSize / 2 + b.options.borderSize) + "px;border-bottom-right-radius: " + String(b.options.lensSize / 2 + b.options.borderSize) + "px;"), b.zoomContainer = a('<div class="zoomContainer" style="-webkit-transform: translateZ(0);position:absolute;left:' + b.nzOffset.left + "px;top:" + b.nzOffset.top + "px;height:" + b.nzHeight + "px;width:" + b.nzWidth + 'px;"></div>'), a("body").append(b.zoomContainer), b.options.containLensZoom && "lens" == b.options.zoomType && b.zoomContainer.css("overflow", "hidden"), "inner" != b.options.zoomType && (b.zoomLens = a("<div class='zoomLens' style='" + b.lensStyle + b.lensRound + "'>&nbsp;</div>").appendTo(b.zoomContainer).click(function() {
                    b.$elem.trigger("click")
                }), b.options.tint && (b.tintContainer = a("<div/>").addClass("tintContainer"), b.zoomTint = a("<div class='zoomTint' style='" + b.tintStyle + "'></div>"), b.zoomLens.wrap(b.tintContainer), b.zoomTintcss = b.zoomLens.after(b.zoomTint), b.zoomTintImage = a('<img style="position: absolute; left: 0px; top: 0px; max-width: none; width: ' + b.nzWidth + "px; height: " + b.nzHeight + 'px;" src="' + b.imageSrc + '">').appendTo(b.zoomLens).click(function() {
                    b.$elem.trigger("click")
                }))), b.zoomWindow = isNaN(b.options.zoomWindowPosition) ? a("<div style='z-index:999;left:" + b.windowOffsetLeft + "px;top:" + b.windowOffsetTop + "px;" + b.zoomWindowStyle + "' class='zoomWindow'>&nbsp;</div>").appendTo("body").click(function() {
                    b.$elem.trigger("click")
                }) : a("<div style='z-index:999;left:" + b.windowOffsetLeft + "px;top:" + b.windowOffsetTop + "px;" + b.zoomWindowStyle + "' class='zoomWindow'>&nbsp;</div>").appendTo(b.zoomContainer).click(function() {
                    b.$elem.trigger("click")
                }), b.zoomWindowContainer = a("<div/>").addClass("zoomWindowContainer").css("width", b.options.zoomWindowWidth), b.zoomWindow.wrap(b.zoomWindowContainer), "lens" == b.options.zoomType && b.zoomLens.css({
                    backgroundImage: "url('" + b.imageSrc + "')"
                }), "window" == b.options.zoomType && b.zoomWindow.css({
                    backgroundImage: "url('" + b.imageSrc + "')"
                }), "inner" == b.options.zoomType && b.zoomWindow.css({
                    backgroundImage: "url('" + b.imageSrc + "')"
                }), b.$elem.bind("touchmove", function(a) {
                    a.preventDefault();
                    var c = a.originalEvent.touches[0] || a.originalEvent.changedTouches[0];
                    b.setPosition(c)
                }), b.zoomContainer.bind("touchmove", function(a) {
                    "inner" == b.options.zoomType && b.showHideWindow("show"), a.preventDefault();
                    var c = a.originalEvent.touches[0] || a.originalEvent.changedTouches[0];
                    b.setPosition(c)
                }), b.zoomContainer.bind("touchend", function() {
                    b.showHideWindow("hide"), b.options.showLens && b.showHideLens("hide"), b.options.tint && "inner" != b.options.zoomType && b.showHideTint("hide")
                }), b.$elem.bind("touchend", function() {
                    b.showHideWindow("hide"), b.options.showLens && b.showHideLens("hide"), b.options.tint && "inner" != b.options.zoomType && b.showHideTint("hide")
                }), b.options.showLens && (b.zoomLens.bind("touchmove", function(a) {
                    a.preventDefault();
                    var c = a.originalEvent.touches[0] || a.originalEvent.changedTouches[0];
                    b.setPosition(c)
                }), b.zoomLens.bind("touchend", function() {
                    b.showHideWindow("hide"), b.options.showLens && b.showHideLens("hide"), b.options.tint && "inner" != b.options.zoomType && b.showHideTint("hide")
                })), b.$elem.bind("mousemove", function(a) {
                    0 == b.overWindow && b.setElements("show"), (b.lastX !== a.clientX || b.lastY !== a.clientY) && (b.setPosition(a), b.currentLoc = a), b.lastX = a.clientX, b.lastY = a.clientY
                }), b.zoomContainer.bind("mousemove", function(a) {
                    0 == b.overWindow && b.setElements("show"), (b.lastX !== a.clientX || b.lastY !== a.clientY) && (b.setPosition(a), b.currentLoc = a), b.lastX = a.clientX, b.lastY = a.clientY
                }), "inner" != b.options.zoomType && b.zoomLens.bind("mousemove", function(a) {
                    (b.lastX !== a.clientX || b.lastY !== a.clientY) && (b.setPosition(a), b.currentLoc = a), b.lastX = a.clientX, b.lastY = a.clientY
                }), b.options.tint && "inner" != b.options.zoomType && b.zoomTint.bind("mousemove", function(a) {
                    (b.lastX !== a.clientX || b.lastY !== a.clientY) && (b.setPosition(a), b.currentLoc = a), b.lastX = a.clientX, b.lastY = a.clientY
                }), "inner" == b.options.zoomType && b.zoomWindow.bind("mousemove", function(a) {
                    (b.lastX !== a.clientX || b.lastY !== a.clientY) && (b.setPosition(a), b.currentLoc = a), b.lastX = a.clientX, b.lastY = a.clientY
                }), b.zoomContainer.add(b.$elem).mouseenter(function() {
                    0 == b.overWindow && b.setElements("show")
                }).mouseleave(function() {
                    b.scrollLock || (b.setElements("hide"), b.options.onDestroy(b.$elem))
                }), "inner" != b.options.zoomType && b.zoomWindow.mouseenter(function() {
                    b.overWindow = !0, b.setElements("hide")
                }).mouseleave(function() {
                    b.overWindow = !1
                }), 1 != b.options.zoomLevel, b.minZoomLevel = b.options.minZoomLevel ? b.options.minZoomLevel : 2 * b.options.scrollZoomIncrement, b.options.scrollZoom && b.zoomContainer.add(b.$elem).bind("mousewheel DOMMouseScroll MozMousePixelScroll", function(c) {
                    b.scrollLock = !0, clearTimeout(a.data(this, "timer")), a.data(this, "timer", setTimeout(function() {
                        b.scrollLock = !1
                    }, 250));
                    var d = c.originalEvent.wheelDelta || -1 * c.originalEvent.detail;
                    return c.stopImmediatePropagation(), c.stopPropagation(), c.preventDefault(), d / 120 > 0 ? b.currentZoomLevel >= b.minZoomLevel && b.changeZoomLevel(b.currentZoomLevel - b.options.scrollZoomIncrement) : b.options.maxZoomLevel ? b.currentZoomLevel <= b.options.maxZoomLevel && b.changeZoomLevel(parseFloat(b.currentZoomLevel) + b.options.scrollZoomIncrement) : b.changeZoomLevel(parseFloat(b.currentZoomLevel) + b.options.scrollZoomIncrement), !1
                })
            },
            setElements: function(a) {
                var b = this;
                return b.options.zoomEnabled ? ("show" == a && b.isWindowSet && ("inner" == b.options.zoomType && b.showHideWindow("show"), "window" == b.options.zoomType && b.showHideWindow("show"), b.options.showLens && b.showHideLens("show"), b.options.tint && "inner" != b.options.zoomType && b.showHideTint("show")), void("hide" == a && ("window" == b.options.zoomType && b.showHideWindow("hide"), b.options.tint || b.showHideWindow("hide"), b.options.showLens && b.showHideLens("hide"), b.options.tint && b.showHideTint("hide")))) : !1
            },
            setPosition: function(a) {
                var b = this;
                return b.options.zoomEnabled ? (b.nzHeight = b.$elem.height(), b.nzWidth = b.$elem.width(), b.nzOffset = b.$elem.offset(), b.options.tint && "inner" != b.options.zoomType && (b.zoomTint.css({
                    top: 0
                }), b.zoomTint.css({
                    left: 0
                })), b.options.responsive && !b.options.scrollZoom && b.options.showLens && (lensHeight = b.nzHeight < b.options.zoomWindowWidth / b.widthRatio ? b.nzHeight : String(b.options.zoomWindowHeight / b.heightRatio), lensWidth = b.largeWidth < b.options.zoomWindowWidth ? b.nzWidth : b.options.zoomWindowWidth / b.widthRatio, b.widthRatio = b.largeWidth / b.nzWidth, b.heightRatio = b.largeHeight / b.nzHeight, "lens" != b.options.zoomType && (lensHeight = b.nzHeight < b.options.zoomWindowWidth / b.widthRatio ? b.nzHeight : String(b.options.zoomWindowHeight / b.heightRatio), lensWidth = b.nzWidth < b.options.zoomWindowHeight / b.heightRatio ? b.nzWidth : String(b.options.zoomWindowWidth / b.widthRatio), b.zoomLens.css("width", lensWidth), b.zoomLens.css("height", lensHeight), b.options.tint && (b.zoomTintImage.css("width", b.nzWidth), b.zoomTintImage.css("height", b.nzHeight))), "lens" == b.options.zoomType && b.zoomLens.css({
                    width: String(b.options.lensSize) + "px",
                    height: String(b.options.lensSize) + "px"
                })), b.zoomContainer.css({
                    top: b.nzOffset.top
                }), b.zoomContainer.css({
                    left: b.nzOffset.left
                }), b.mouseLeft = parseInt(a.pageX - b.nzOffset.left), b.mouseTop = parseInt(a.pageY - b.nzOffset.top), "window" == b.options.zoomType && (b.Etoppos = b.mouseTop < b.zoomLens.height() / 2, b.Eboppos = b.mouseTop > b.nzHeight - b.zoomLens.height() / 2 - 2 * b.options.lensBorderSize, b.Eloppos = b.mouseLeft < 0 + b.zoomLens.width() / 2, b.Eroppos = b.mouseLeft > b.nzWidth - b.zoomLens.width() / 2 - 2 * b.options.lensBorderSize), "inner" == b.options.zoomType && (b.Etoppos = b.mouseTop < b.nzHeight / 2 / b.heightRatio, b.Eboppos = b.mouseTop > b.nzHeight - b.nzHeight / 2 / b.heightRatio, b.Eloppos = b.mouseLeft < 0 + b.nzWidth / 2 / b.widthRatio, b.Eroppos = b.mouseLeft > b.nzWidth - b.nzWidth / 2 / b.widthRatio - 2 * b.options.lensBorderSize), b.mouseLeft < 0 || b.mouseTop < 0 || b.mouseLeft > b.nzWidth || b.mouseTop > b.nzHeight ? void b.setElements("hide") : (b.options.showLens && (b.lensLeftPos = String(Math.floor(b.mouseLeft - b.zoomLens.width() / 2)), b.lensTopPos = String(Math.floor(b.mouseTop - b.zoomLens.height() / 2))), b.Etoppos && (b.lensTopPos = 0), b.Eloppos && (b.windowLeftPos = 0, b.lensLeftPos = 0, b.tintpos = 0), "window" == b.options.zoomType && (b.Eboppos && (b.lensTopPos = Math.max(b.nzHeight - b.zoomLens.height() - 2 * b.options.lensBorderSize, 0)), b.Eroppos && (b.lensLeftPos = b.nzWidth - b.zoomLens.width() - 2 * b.options.lensBorderSize)), "inner" == b.options.zoomType && (b.Eboppos && (b.lensTopPos = Math.max(b.nzHeight - 2 * b.options.lensBorderSize, 0)), b.Eroppos && (b.lensLeftPos = b.nzWidth - b.nzWidth - 2 * b.options.lensBorderSize)), "lens" == b.options.zoomType && (b.windowLeftPos = String(-1 * ((a.pageX - b.nzOffset.left) * b.widthRatio - b.zoomLens.width() / 2)), b.windowTopPos = String(-1 * ((a.pageY - b.nzOffset.top) * b.heightRatio - b.zoomLens.height() / 2)), b.zoomLens.css({
                    backgroundPosition: b.windowLeftPos + "px " + b.windowTopPos + "px"
                }), b.changeBgSize && (b.nzHeight > b.nzWidth ? ("lens" == b.options.zoomType && b.zoomLens.css({
                    "background-size": b.largeWidth / b.newvalueheight + "px " + b.largeHeight / b.newvalueheight + "px"
                }), b.zoomWindow.css({
                    "background-size": b.largeWidth / b.newvalueheight + "px " + b.largeHeight / b.newvalueheight + "px"
                })) : ("lens" == b.options.zoomType && b.zoomLens.css({
                    "background-size": b.largeWidth / b.newvaluewidth + "px " + b.largeHeight / b.newvaluewidth + "px"
                }), b.zoomWindow.css({
                    "background-size": b.largeWidth / b.newvaluewidth + "px " + b.largeHeight / b.newvaluewidth + "px"
                })), b.changeBgSize = !1), b.setWindowPostition(a)), b.options.tint && "inner" != b.options.zoomType && b.setTintPosition(a), "window" == b.options.zoomType && b.setWindowPostition(a), "inner" == b.options.zoomType && b.setWindowPostition(a), void(b.options.showLens && (b.fullwidth && "lens" != b.options.zoomType && (b.lensLeftPos = 0), b.zoomLens.css({
                    left: b.lensLeftPos + "px",
                    top: b.lensTopPos + "px"
                }))))) : !1
            },
            showHideWindow: function(a) {
                var b = this;
                "show" == a && (b.isWindowActive || (b.options.zoomWindowFadeIn ? b.zoomWindow.stop(!0, !0, !1).fadeIn(b.options.zoomWindowFadeIn) : b.zoomWindow.show(), b.isWindowActive = !0)), "hide" == a && b.isWindowActive && (b.options.zoomWindowFadeOut ? b.zoomWindow.stop(!0, !0).fadeOut(b.options.zoomWindowFadeOut, function() {
                    b.loop && (clearInterval(b.loop), b.loop = !1)
                }) : b.zoomWindow.hide(), b.isWindowActive = !1)
            },
            showHideLens: function(a) {
                var b = this;
                "show" == a && (b.isLensActive || (b.options.lensFadeIn ? b.zoomLens.stop(!0, !0, !1).fadeIn(b.options.lensFadeIn) : b.zoomLens.show(), b.isLensActive = !0)), "hide" == a && b.isLensActive && (b.options.lensFadeOut ? b.zoomLens.stop(!0, !0).fadeOut(b.options.lensFadeOut) : b.zoomLens.hide(), b.isLensActive = !1)
            },
            showHideTint: function(a) {
                var b = this;
                "show" == a && (b.isTintActive || (b.options.zoomTintFadeIn ? b.zoomTint.css({
                    opacity: b.options.tintOpacity
                }).animate().stop(!0, !0).fadeIn("slow") : (b.zoomTint.css({
                    opacity: b.options.tintOpacity
                }).animate(), b.zoomTint.show()), b.isTintActive = !0)), "hide" == a && b.isTintActive && (b.options.zoomTintFadeOut ? b.zoomTint.stop(!0, !0).fadeOut(b.options.zoomTintFadeOut) : b.zoomTint.hide(), b.isTintActive = !1)
            },
            setLensPostition: function() {},
            setWindowPostition: function(b) {
                var c = this;
                if (isNaN(c.options.zoomWindowPosition)) c.externalContainer = a("#" + c.options.zoomWindowPosition), c.externalContainerWidth = c.externalContainer.width(), c.externalContainerHeight = c.externalContainer.height(), c.externalContainerOffset = c.externalContainer.offset(), c.windowOffsetTop = c.externalContainerOffset.top, c.windowOffsetLeft = c.externalContainerOffset.left;
                else switch (c.options.zoomWindowPosition) {
                    case 1:
                        c.windowOffsetTop = c.options.zoomWindowOffety, c.windowOffsetLeft = +c.nzWidth;
                        break;
                    case 2:
                        c.options.zoomWindowHeight > c.nzHeight && (c.windowOffsetTop = -1 * (c.options.zoomWindowHeight / 2 - c.nzHeight / 2), c.windowOffsetLeft = c.nzWidth);
                        break;
                    case 3:
                        c.windowOffsetTop = c.nzHeight - c.zoomWindow.height() - 2 * c.options.borderSize, c.windowOffsetLeft = c.nzWidth;
                        break;
                    case 4:
                        c.windowOffsetTop = c.nzHeight, c.windowOffsetLeft = c.nzWidth;
                        break;
                    case 5:
                        c.windowOffsetTop = c.nzHeight, c.windowOffsetLeft = c.nzWidth - c.zoomWindow.width() - 2 * c.options.borderSize;
                        break;
                    case 6:
                        c.options.zoomWindowHeight > c.nzHeight && (c.windowOffsetTop = c.nzHeight, c.windowOffsetLeft = -1 * (c.options.zoomWindowWidth / 2 - c.nzWidth / 2 + 2 * c.options.borderSize));
                        break;
                    case 7:
                        c.windowOffsetTop = c.nzHeight, c.windowOffsetLeft = 0;
                        break;
                    case 8:
                        c.windowOffsetTop = c.nzHeight, c.windowOffsetLeft = -1 * (c.zoomWindow.width() + 2 * c.options.borderSize);
                        break;
                    case 9:
                        c.windowOffsetTop = c.nzHeight - c.zoomWindow.height() - 2 * c.options.borderSize, c.windowOffsetLeft = -1 * (c.zoomWindow.width() + 2 * c.options.borderSize);
                        break;
                    case 10:
                        c.options.zoomWindowHeight > c.nzHeight && (c.windowOffsetTop = -1 * (c.options.zoomWindowHeight / 2 - c.nzHeight / 2), c.windowOffsetLeft = -1 * (c.zoomWindow.width() + 2 * c.options.borderSize));
                        break;
                    case 11:
                        c.windowOffsetTop = c.options.zoomWindowOffety, c.windowOffsetLeft = -1 * (c.zoomWindow.width() + 2 * c.options.borderSize);
                        break;
                    case 12:
                        c.windowOffsetTop = -1 * (c.zoomWindow.height() + 2 * c.options.borderSize), c.windowOffsetLeft = -1 * (c.zoomWindow.width() + 2 * c.options.borderSize);
                        break;
                    case 13:
                        c.windowOffsetTop = -1 * (c.zoomWindow.height() + 2 * c.options.borderSize), c.windowOffsetLeft = 0;
                        break;
                    case 14:
                        c.options.zoomWindowHeight > c.nzHeight && (c.windowOffsetTop = -1 * (c.zoomWindow.height() + 2 * c.options.borderSize), c.windowOffsetLeft = -1 * (c.options.zoomWindowWidth / 2 - c.nzWidth / 2 + 2 * c.options.borderSize));
                        break;
                    case 15:
                        c.windowOffsetTop = -1 * (c.zoomWindow.height() + 2 * c.options.borderSize), c.windowOffsetLeft = c.nzWidth - c.zoomWindow.width() - 2 * c.options.borderSize;
                        break;
                    case 16:
                        c.windowOffsetTop = -1 * (c.zoomWindow.height() + 2 * c.options.borderSize), c.windowOffsetLeft = c.nzWidth;
                        break;
                    default:
                        c.windowOffsetTop = c.options.zoomWindowOffety, c.windowOffsetLeft = c.nzWidth
                }
                c.isWindowSet = !0, c.windowOffsetTop = c.windowOffsetTop + c.options.zoomWindowOffety, c.windowOffsetLeft = c.windowOffsetLeft + c.options.zoomWindowOffetx, c.zoomWindow.css({
                    top: c.windowOffsetTop
                }), c.zoomWindow.css({
                    left: c.windowOffsetLeft
                }), "inner" == c.options.zoomType && (c.zoomWindow.css({
                    top: 0
                }), c.zoomWindow.css({
                    left: 0
                })), c.windowLeftPos = String(-1 * ((b.pageX - c.nzOffset.left) * c.widthRatio - c.zoomWindow.width() / 2)), c.windowTopPos = String(-1 * ((b.pageY - c.nzOffset.top) * c.heightRatio - c.zoomWindow.height() / 2)), c.Etoppos && (c.windowTopPos = 0), c.Eloppos && (c.windowLeftPos = 0), c.Eboppos && (c.windowTopPos = -1 * (c.largeHeight / c.currentZoomLevel - c.zoomWindow.height())), c.Eroppos && (c.windowLeftPos = -1 * (c.largeWidth / c.currentZoomLevel - c.zoomWindow.width())), c.fullheight && (c.windowTopPos = 0), c.fullwidth && (c.windowLeftPos = 0), ("window" == c.options.zoomType || "inner" == c.options.zoomType) && (1 == c.zoomLock && (c.widthRatio <= 1 && (c.windowLeftPos = 0), c.heightRatio <= 1 && (c.windowTopPos = 0)), "window" == c.options.zoomType && (c.largeHeight < c.options.zoomWindowHeight && (c.windowTopPos = 0), c.largeWidth < c.options.zoomWindowWidth && (c.windowLeftPos = 0)), c.options.easing ? (c.xp || (c.xp = 0), c.yp || (c.yp = 0), c.loop || (c.loop = setInterval(function() {
                    c.xp += (c.windowLeftPos - c.xp) / c.options.easingAmount, c.yp += (c.windowTopPos - c.yp) / c.options.easingAmount, c.scrollingLock ? (clearInterval(c.loop), c.xp = c.windowLeftPos, c.yp = c.windowTopPos, c.xp = -1 * ((b.pageX - c.nzOffset.left) * c.widthRatio - c.zoomWindow.width() / 2), c.yp = -1 * ((b.pageY - c.nzOffset.top) * c.heightRatio - c.zoomWindow.height() / 2), c.changeBgSize && (c.nzHeight > c.nzWidth ? ("lens" == c.options.zoomType && c.zoomLens.css({
                        "background-size": c.largeWidth / c.newvalueheight + "px " + c.largeHeight / c.newvalueheight + "px"
                    }), c.zoomWindow.css({
                        "background-size": c.largeWidth / c.newvalueheight + "px " + c.largeHeight / c.newvalueheight + "px"
                    })) : ("lens" != c.options.zoomType && c.zoomLens.css({
                        "background-size": c.largeWidth / c.newvaluewidth + "px " + c.largeHeight / c.newvalueheight + "px"
                    }), c.zoomWindow.css({
                        "background-size": c.largeWidth / c.newvaluewidth + "px " + c.largeHeight / c.newvaluewidth + "px"
                    })), c.changeBgSize = !1), c.zoomWindow.css({
                        backgroundPosition: c.windowLeftPos + "px " + c.windowTopPos + "px"
                    }), c.scrollingLock = !1, c.loop = !1) : Math.round(Math.abs(c.xp - c.windowLeftPos) + Math.abs(c.yp - c.windowTopPos)) < 1 ? (clearInterval(c.loop), c.zoomWindow.css({
                        backgroundPosition: c.windowLeftPos + "px " + c.windowTopPos + "px"
                    }), c.loop = !1) : (c.changeBgSize && (c.nzHeight > c.nzWidth ? ("lens" == c.options.zoomType && c.zoomLens.css({
                        "background-size": c.largeWidth / c.newvalueheight + "px " + c.largeHeight / c.newvalueheight + "px"
                    }), c.zoomWindow.css({
                        "background-size": c.largeWidth / c.newvalueheight + "px " + c.largeHeight / c.newvalueheight + "px"
                    })) : ("lens" != c.options.zoomType && c.zoomLens.css({
                        "background-size": c.largeWidth / c.newvaluewidth + "px " + c.largeHeight / c.newvaluewidth + "px"
                    }), c.zoomWindow.css({
                        "background-size": c.largeWidth / c.newvaluewidth + "px " + c.largeHeight / c.newvaluewidth + "px"
                    })), c.changeBgSize = !1), c.zoomWindow.css({
                        backgroundPosition: c.xp + "px " + c.yp + "px"
                    }))
                }, 16))) : (c.changeBgSize && (c.nzHeight > c.nzWidth ? ("lens" == c.options.zoomType && c.zoomLens.css({
                    "background-size": c.largeWidth / c.newvalueheight + "px " + c.largeHeight / c.newvalueheight + "px"
                }), c.zoomWindow.css({
                    "background-size": c.largeWidth / c.newvalueheight + "px " + c.largeHeight / c.newvalueheight + "px"
                })) : ("lens" == c.options.zoomType && c.zoomLens.css({
                    "background-size": c.largeWidth / c.newvaluewidth + "px " + c.largeHeight / c.newvaluewidth + "px"
                }), c.zoomWindow.css(c.largeHeight / c.newvaluewidth < c.options.zoomWindowHeight ? {
                    "background-size": c.largeWidth / c.newvaluewidth + "px " + c.largeHeight / c.newvaluewidth + "px"
                } : {
                    "background-size": c.largeWidth / c.newvalueheight + "px " + c.largeHeight / c.newvalueheight + "px"
                })), c.changeBgSize = !1), c.zoomWindow.css({
                    backgroundPosition: c.windowLeftPos + "px " + c.windowTopPos + "px"
                })))
            },
            setTintPosition: function(a) {
                var b = this;
                b.nzOffset = b.$elem.offset(), b.tintpos = String(-1 * (a.pageX - b.nzOffset.left - b.zoomLens.width() / 2)), b.tintposy = String(-1 * (a.pageY - b.nzOffset.top - b.zoomLens.height() / 2)), b.Etoppos && (b.tintposy = 0), b.Eloppos && (b.tintpos = 0), b.Eboppos && (b.tintposy = -1 * (b.nzHeight - b.zoomLens.height() - 2 * b.options.lensBorderSize)), b.Eroppos && (b.tintpos = -1 * (b.nzWidth - b.zoomLens.width() - 2 * b.options.lensBorderSize)), b.options.tint && (b.fullheight && (b.tintposy = 0), b.fullwidth && (b.tintpos = 0), b.zoomTintImage.css({
                    left: b.tintpos + "px"
                }), b.zoomTintImage.css({
                    top: b.tintposy + "px"
                }))
            },
            swaptheimage: function(b, c) {
                var d = this,
                    e = new Image;
                d.options.loadingIcon && (d.spinner = a("<div style=\"background: url('" + d.options.loadingIcon + "') no-repeat center;height:" + d.nzHeight + "px;width:" + d.nzWidth + 'px;z-index: 2000;position: absolute; background-position: center center;"></div>'), d.$elem.after(d.spinner)), d.options.onImageSwap(d.$elem), e.onload = function() {
                    d.largeWidth = e.width, d.largeHeight = e.height, d.zoomImage = c, d.zoomWindow.css({
                        "background-size": d.largeWidth + "px " + d.largeHeight + "px"
                    }), d.swapAction(b, c)
                }, e.src = c
            },
            swapAction: function(b, c) {
                var d = this,
                    e = new Image;
                if (e.onload = function() {
                        d.nzHeight = e.height, d.nzWidth = e.width, d.options.onImageSwapComplete(d.$elem), d.doneCallback()
                    }, e.src = b, d.currentZoomLevel = d.options.zoomLevel, d.options.maxZoomLevel = !1, "lens" == d.options.zoomType && d.zoomLens.css({
                        backgroundImage: "url('" + c + "')"
                    }), "window" == d.options.zoomType && d.zoomWindow.css({
                        backgroundImage: "url('" + c + "')"
                    }), "inner" == d.options.zoomType && d.zoomWindow.css({
                        backgroundImage: "url('" + c + "')"
                    }), d.currentImage = c, d.options.imageCrossfade) {
                    var f = d.$elem,
                        g = f.clone();
                    if (d.$elem.attr("src", b), d.$elem.after(g), g.stop(!0).fadeOut(d.options.imageCrossfade, function() {
                            a(this).remove()
                        }), d.$elem.width("auto").removeAttr("width"), d.$elem.height("auto").removeAttr("height"), f.fadeIn(d.options.imageCrossfade), d.options.tint && "inner" != d.options.zoomType) {
                        var h = d.zoomTintImage,
                            i = h.clone();
                        d.zoomTintImage.attr("src", c), d.zoomTintImage.after(i), i.stop(!0).fadeOut(d.options.imageCrossfade, function() {
                            a(this).remove()
                        }), h.fadeIn(d.options.imageCrossfade), d.zoomTint.css({
                            height: d.$elem.height()
                        }), d.zoomTint.css({
                            width: d.$elem.width()
                        })
                    }
                    d.zoomContainer.css("height", d.$elem.height()), d.zoomContainer.css("width", d.$elem.width()), "inner" == d.options.zoomType && (d.options.constrainType || (d.zoomWrap.parent().css("height", d.$elem.height()), d.zoomWrap.parent().css("width", d.$elem.width()), d.zoomWindow.css("height", d.$elem.height()), d.zoomWindow.css("width", d.$elem.width()))), d.options.imageCrossfade && (d.zoomWrap.css("height", d.$elem.height()), d.zoomWrap.css("width", d.$elem.width()))
                } else d.$elem.attr("src", b), d.options.tint && (d.zoomTintImage.attr("src", c), d.zoomTintImage.attr("height", d.$elem.height()), d.zoomTintImage.css({
                    height: d.$elem.height()
                }), d.zoomTint.css({
                    height: d.$elem.height()
                })), d.zoomContainer.css("height", d.$elem.height()), d.zoomContainer.css("width", d.$elem.width()), d.options.imageCrossfade && (d.zoomWrap.css("height", d.$elem.height()), d.zoomWrap.css("width", d.$elem.width()));
                d.options.constrainType && ("height" == d.options.constrainType && (d.zoomContainer.css("height", d.options.constrainSize), d.zoomContainer.css("width", "auto"), d.options.imageCrossfade ? (d.zoomWrap.css("height", d.options.constrainSize), d.zoomWrap.css("width", "auto"), d.constwidth = d.zoomWrap.width()) : (d.$elem.css("height", d.options.constrainSize), d.$elem.css("width", "auto"), d.constwidth = d.$elem.width()), "inner" == d.options.zoomType && (d.zoomWrap.parent().css("height", d.options.constrainSize), d.zoomWrap.parent().css("width", d.constwidth), d.zoomWindow.css("height", d.options.constrainSize), d.zoomWindow.css("width", d.constwidth)), d.options.tint && (d.tintContainer.css("height", d.options.constrainSize), d.tintContainer.css("width", d.constwidth), d.zoomTint.css("height", d.options.constrainSize), d.zoomTint.css("width", d.constwidth), d.zoomTintImage.css("height", d.options.constrainSize), d.zoomTintImage.css("width", d.constwidth))), "width" == d.options.constrainType && (d.zoomContainer.css("height", "auto"), d.zoomContainer.css("width", d.options.constrainSize), d.options.imageCrossfade ? (d.zoomWrap.css("height", "auto"), d.zoomWrap.css("width", d.options.constrainSize), d.constheight = d.zoomWrap.height()) : (d.$elem.css("height", "auto"), d.$elem.css("width", d.options.constrainSize), d.constheight = d.$elem.height()), "inner" == d.options.zoomType && (d.zoomWrap.parent().css("height", d.constheight), d.zoomWrap.parent().css("width", d.options.constrainSize), d.zoomWindow.css("height", d.constheight), d.zoomWindow.css("width", d.options.constrainSize)), d.options.tint && (d.tintContainer.css("height", d.constheight), d.tintContainer.css("width", d.options.constrainSize), d.zoomTint.css("height", d.constheight), d.zoomTint.css("width", d.options.constrainSize), d.zoomTintImage.css("height", d.constheight), d.zoomTintImage.css("width", d.options.constrainSize))))
            },
            doneCallback: function() {
                var a = this;
                a.options.loadingIcon && a.spinner.hide(), a.nzOffset = a.$elem.offset(), a.nzWidth = a.$elem.width(), a.nzHeight = a.$elem.height(), a.currentZoomLevel = a.options.zoomLevel, a.widthRatio = a.largeWidth / a.nzWidth, a.heightRatio = a.largeHeight / a.nzHeight, "window" == a.options.zoomType && (lensHeight = a.nzHeight < a.options.zoomWindowWidth / a.widthRatio ? a.nzHeight : String(a.options.zoomWindowHeight / a.heightRatio), lensWidth = a.options.zoomWindowWidth < a.options.zoomWindowWidth ? a.nzWidth : a.options.zoomWindowWidth / a.widthRatio, a.zoomLens && (a.zoomLens.css("width", lensWidth), a.zoomLens.css("height", lensHeight)))
            },
            getCurrentImage: function() {
                var a = this;
                return a.zoomImage
            },
            getGalleryList: function() {
                var b = this;
                return b.gallerylist = [], b.options.gallery ? a("#" + b.options.gallery + " a").each(function() {
                    var c = "";
                    a(this).data("zoom-image") ? c = a(this).data("zoom-image") : a(this).data("image") && (c = a(this).data("image")), c == b.zoomImage ? b.gallerylist.unshift({
                        href: "" + c,
                        title: a(this).find("img").attr("title")
                    }) : b.gallerylist.push({
                        href: "" + c,
                        title: a(this).find("img").attr("title")
                    })
                }) : b.gallerylist.push({
                    href: "" + b.zoomImage,
                    title: a(this).find("img").attr("title")
                }), b.gallerylist
            },
            changeZoomLevel: function(a) {
                var b = this;
                b.scrollingLock = !0, b.newvalue = parseFloat(a).toFixed(2), newvalue = parseFloat(a).toFixed(2), maxheightnewvalue = b.largeHeight / (b.options.zoomWindowHeight / b.nzHeight * b.nzHeight), maxwidthtnewvalue = b.largeWidth / (b.options.zoomWindowWidth / b.nzWidth * b.nzWidth), "inner" != b.options.zoomType && (maxheightnewvalue <= newvalue ? (b.heightRatio = b.largeHeight / maxheightnewvalue / b.nzHeight, b.newvalueheight = maxheightnewvalue, b.fullheight = !0) : (b.heightRatio = b.largeHeight / newvalue / b.nzHeight, b.newvalueheight = newvalue, b.fullheight = !1), maxwidthtnewvalue <= newvalue ? (b.widthRatio = b.largeWidth / maxwidthtnewvalue / b.nzWidth, b.newvaluewidth = maxwidthtnewvalue, b.fullwidth = !0) : (b.widthRatio = b.largeWidth / newvalue / b.nzWidth, b.newvaluewidth = newvalue, b.fullwidth = !1), "lens" == b.options.zoomType && (maxheightnewvalue <= newvalue ? (b.fullwidth = !0, b.newvaluewidth = maxheightnewvalue) : (b.widthRatio = b.largeWidth / newvalue / b.nzWidth, b.newvaluewidth = newvalue, b.fullwidth = !1))), "inner" == b.options.zoomType && (maxheightnewvalue = parseFloat(b.largeHeight / b.nzHeight).toFixed(2), maxwidthtnewvalue = parseFloat(b.largeWidth / b.nzWidth).toFixed(2), newvalue > maxheightnewvalue && (newvalue = maxheightnewvalue), newvalue > maxwidthtnewvalue && (newvalue = maxwidthtnewvalue), maxheightnewvalue <= newvalue ? (b.heightRatio = b.largeHeight / newvalue / b.nzHeight, b.newvalueheight = newvalue > maxheightnewvalue ? maxheightnewvalue : newvalue, b.fullheight = !0) : (b.heightRatio = b.largeHeight / newvalue / b.nzHeight, b.newvalueheight = newvalue > maxheightnewvalue ? maxheightnewvalue : newvalue, b.fullheight = !1), maxwidthtnewvalue <= newvalue ? (b.widthRatio = b.largeWidth / newvalue / b.nzWidth, b.newvaluewidth = newvalue > maxwidthtnewvalue ? maxwidthtnewvalue : newvalue, b.fullwidth = !0) : (b.widthRatio = b.largeWidth / newvalue / b.nzWidth, b.newvaluewidth = newvalue, b.fullwidth = !1)), scrcontinue = !1, "inner" == b.options.zoomType && (b.nzWidth >= b.nzHeight && (b.newvaluewidth <= maxwidthtnewvalue ? scrcontinue = !0 : (scrcontinue = !1, b.fullheight = !0, b.fullwidth = !0)), b.nzHeight > b.nzWidth && (b.newvaluewidth <= maxwidthtnewvalue ? scrcontinue = !0 : (scrcontinue = !1, b.fullheight = !0, b.fullwidth = !0))), "inner" != b.options.zoomType && (scrcontinue = !0), scrcontinue && (b.zoomLock = 0, b.changeZoom = !0, b.options.zoomWindowHeight / b.heightRatio <= b.nzHeight && (b.currentZoomLevel = b.newvalueheight, "lens" != b.options.zoomType && "inner" != b.options.zoomType && (b.changeBgSize = !0, b.zoomLens.css({
                    height: String(b.options.zoomWindowHeight / b.heightRatio) + "px"
                })), ("lens" == b.options.zoomType || "inner" == b.options.zoomType) && (b.changeBgSize = !0)), b.options.zoomWindowWidth / b.widthRatio <= b.nzWidth && ("inner" != b.options.zoomType && b.newvaluewidth > b.newvalueheight && (b.currentZoomLevel = b.newvaluewidth), "lens" != b.options.zoomType && "inner" != b.options.zoomType && (b.changeBgSize = !0, b.zoomLens.css({
                    width: String(b.options.zoomWindowWidth / b.widthRatio) + "px"
                })), ("lens" == b.options.zoomType || "inner" == b.options.zoomType) && (b.changeBgSize = !0)), "inner" == b.options.zoomType && (b.changeBgSize = !0, b.nzWidth > b.nzHeight && (b.currentZoomLevel = b.newvaluewidth), b.nzHeight > b.nzWidth && (b.currentZoomLevel = b.newvaluewidth))), b.setPosition(b.currentLoc)
            },
            closeAll: function() {
                self.zoomWindow && self.zoomWindow.hide(), self.zoomLens && self.zoomLens.hide(),
                self.zoomTint && self.zoomTint.hide()
            },
            changeState: function(a) {
                var b = this;
                "enable" == a && (b.options.zoomEnabled = !0), "disable" == a && (b.options.zoomEnabled = !1)
            }
        };
        a.fn.elevateZoom = function(c) {
            return this.each(function() {
                var d = Object.create(b);
                d.init(c, this), a.data(this, "elevateZoom", d)
            })
        }, a.fn.elevateZoom.options = {
            zoomActivation: "hover",
            zoomEnabled: !0,
            preloading: 1,
            zoomLevel: 1,
            scrollZoom: !1,
            scrollZoomIncrement: .1,
            minZoomLevel: !1,
            maxZoomLevel: !1,
            easing: !1,
            easingAmount: 12,
            lensSize: 200,
            zoomWindowWidth: 400,
            zoomWindowHeight: 400,
            zoomWindowOffetx: 0,
            zoomWindowOffety: 0,
            zoomWindowPosition: 1,
            zoomWindowBgColour: "#fff",
            lensFadeIn: !1,
            lensFadeOut: !1,
            debug: !1,
            zoomWindowFadeIn: !1,
            zoomWindowFadeOut: !1,
            zoomWindowAlwaysShow: !1,
            zoomTintFadeIn: !1,
            zoomTintFadeOut: !1,
            borderSize: 4,
            showLens: !0,
            borderColour: "#888",
            lensBorderSize: 1,
            lensBorderColour: "#000",
            lensShape: "square",
            zoomType: "window",
            containLensZoom: !1,
            lensColour: "white",
            lensOpacity: .4,
            lenszoom: !1,
            tint: !1,
            tintColour: "#333",
            tintOpacity: .4,
            gallery: !1,
            galleryActiveClass: "zoomGalleryActive",
            imageCrossfade: !1,
            constrainType: !1,
            constrainSize: !1,
            loadingIcon: !1,
            cursor: "default",
            responsive: !0,
            onComplete: a.noop,
            onDestroy: function() {},
            onZoomedImageLoaded: function() {},
            onImageSwap: a.noop,
            onImageSwapComplete: a.noop
        }
    }(jQuery, window, document), ! function(a) {
    "undefined" != typeof module && module.exports ? module.exports = a : a(jQuery, window, document)
}(function(a) {
    ! function(b) {
        var c = "function" == typeof define && define.amd,
            d = "undefined" != typeof module && module.exports,
            e = "https:" == document.location.protocol ? "https:" : "http:",
            f = "cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js";
        c || (d ? require("jquery-mousewheel")(a) : a.event.special.mousewheel || a("head").append(decodeURI("%3Cscript src=" + e + "//" + f + "%3E%3C/script%3E"))), b()
    }(function() {
        var b, c = "mCustomScrollbar",
            d = "mCS",
            e = ".mCustomScrollbar",
            f = {
                setTop: 0,
                setLeft: 0,
                axis: "y",
                scrollbarPosition: "inside",
                scrollInertia: 950,
                autoDraggerLength: !0,
                alwaysShowScrollbar: 0,
                snapOffset: 0,
                mouseWheel: {
                    enable: !0,
                    scrollAmount: "auto",
                    axis: "y",
                    deltaFactor: "auto",
                    disableOver: ["select", "option", "keygen", "datalist", "textarea"]
                },
                scrollButtons: {
                    scrollType: "stepless",
                    scrollAmount: "auto"
                },
                keyboard: {
                    enable: !0,
                    scrollType: "stepless",
                    scrollAmount: "auto"
                },
                contentTouchScroll: 25,
                documentTouchScroll: !0,
                advanced: {
                    autoScrollOnFocus: "input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",
                    updateOnContentResize: !0,
                    updateOnImageLoad: "auto",
                    autoUpdateTimeout: 60
                },
                theme: "light",
                callbacks: {
                    onTotalScrollOffset: 0,
                    onTotalScrollBackOffset: 0,
                    alwaysTriggerOffsets: !0
                }
            },
            g = 0,
            h = {},
            i = window.attachEvent && !window.addEventListener ? 1 : 0,
            j = !1,
            k = ["mCSB_dragger_onDrag", "mCSB_scrollTools_onDrag", "mCS_img_loaded", "mCS_disabled", "mCS_destroyed", "mCS_no_scrollbar", "mCS-autoHide", "mCS-dir-rtl", "mCS_no_scrollbar_y", "mCS_no_scrollbar_x", "mCS_y_hidden", "mCS_x_hidden", "mCSB_draggerContainer", "mCSB_buttonUp", "mCSB_buttonDown", "mCSB_buttonLeft", "mCSB_buttonRight"],
            l = {
                init: function(b) {
                    var b = a.extend(!0, {}, f, b),
                        c = m.call(this);
                    if (b.live) {
                        var i = b.liveSelector || this.selector || e,
                            j = a(i);
                        if ("off" === b.live) return void o(i);
                        h[i] = setTimeout(function() {
                            j.mCustomScrollbar(b), "once" === b.live && j.length && o(i)
                        }, 500)
                    } else o(i);
                    return b.setWidth = b.set_width ? b.set_width : b.setWidth, b.setHeight = b.set_height ? b.set_height : b.setHeight, b.axis = b.horizontalScroll ? "x" : p(b.axis), b.scrollInertia = b.scrollInertia > 0 && b.scrollInertia < 17 ? 17 : b.scrollInertia, "object" != typeof b.mouseWheel && 1 == b.mouseWheel && (b.mouseWheel = {
                        enable: !0,
                        scrollAmount: "auto",
                        axis: "y",
                        preventDefault: !1,
                        deltaFactor: "auto",
                        normalizeDelta: !1,
                        invert: !1
                    }), b.mouseWheel.scrollAmount = b.mouseWheelPixels ? b.mouseWheelPixels : b.mouseWheel.scrollAmount, b.mouseWheel.normalizeDelta = b.advanced.normalizeMouseWheelDelta ? b.advanced.normalizeMouseWheelDelta : b.mouseWheel.normalizeDelta, b.scrollButtons.scrollType = q(b.scrollButtons.scrollType), n(b), a(c).each(function() {
                        var c = a(this);
                        if (!c.data(d)) {
                            c.data(d, {
                                idx: ++g,
                                opt: b,
                                scrollRatio: {
                                    y: null,
                                    x: null
                                },
                                overflowed: null,
                                contentReset: {
                                    y: null,
                                    x: null
                                },
                                bindEvents: !1,
                                tweenRunning: !1,
                                sequential: {},
                                langDir: c.css("direction"),
                                cbOffsets: null,
                                trigger: null,
                                poll: {
                                    size: {
                                        o: 0,
                                        n: 0
                                    },
                                    img: {
                                        o: 0,
                                        n: 0
                                    },
                                    change: {
                                        o: 0,
                                        n: 0
                                    }
                                }
                            });
                            var e = c.data(d),
                                f = e.opt,
                                h = c.data("mcs-axis"),
                                i = c.data("mcs-scrollbar-position"),
                                j = c.data("mcs-theme");
                            h && (f.axis = h), i && (f.scrollbarPosition = i), j && (f.theme = j, n(f)), r.call(this), e && f.callbacks.onCreate && "function" == typeof f.callbacks.onCreate && f.callbacks.onCreate.call(this), a("#mCSB_" + e.idx + "_container img:not(." + k[2] + ")").addClass(k[2]), l.update.call(null, c)
                        }
                    })
                },
                update: function(b, c) {
                    var e = b || m.call(this);
                    return a(e).each(function() {
                        var b = a(this);
                        if (b.data(d)) {
                            var e = b.data(d),
                                f = e.opt,
                                g = a("#mCSB_" + e.idx + "_container"),
                                h = a("#mCSB_" + e.idx),
                                i = [a("#mCSB_" + e.idx + "_dragger_vertical"), a("#mCSB_" + e.idx + "_dragger_horizontal")];
                            if (!g.length) return;
                            e.tweenRunning && U(b), c && e && f.callbacks.onBeforeUpdate && "function" == typeof f.callbacks.onBeforeUpdate && f.callbacks.onBeforeUpdate.call(this), b.hasClass(k[3]) && b.removeClass(k[3]), b.hasClass(k[4]) && b.removeClass(k[4]), h.css("max-height", "none"), h.height() !== b.height() && h.css("max-height", b.height()), t.call(this), "y" === f.axis || f.advanced.autoExpandHorizontalScroll || g.css("width", s(g)), e.overflowed = y.call(this), C.call(this), f.autoDraggerLength && v.call(this), w.call(this), A.call(this);
                            var j = [Math.abs(g[0].offsetTop), Math.abs(g[0].offsetLeft)];
                            "x" !== f.axis && (e.overflowed[0] ? i[0].height() > i[0].parent().height() ? z.call(this) : (V(b, j[0].toString(), {
                                dir: "y",
                                dur: 0,
                                overwrite: "none"
                            }), e.contentReset.y = null) : (z.call(this), "y" === f.axis ? B.call(this) : "yx" === f.axis && e.overflowed[1] && V(b, j[1].toString(), {
                                dir: "x",
                                dur: 0,
                                overwrite: "none"
                            }))), "y" !== f.axis && (e.overflowed[1] ? i[1].width() > i[1].parent().width() ? z.call(this) : (V(b, j[1].toString(), {
                                dir: "x",
                                dur: 0,
                                overwrite: "none"
                            }), e.contentReset.x = null) : (z.call(this), "x" === f.axis ? B.call(this) : "yx" === f.axis && e.overflowed[0] && V(b, j[0].toString(), {
                                dir: "y",
                                dur: 0,
                                overwrite: "none"
                            }))), c && e && (2 === c && f.callbacks.onImageLoad && "function" == typeof f.callbacks.onImageLoad ? f.callbacks.onImageLoad.call(this) : 3 === c && f.callbacks.onSelectorChange && "function" == typeof f.callbacks.onSelectorChange ? f.callbacks.onSelectorChange.call(this) : f.callbacks.onUpdate && "function" == typeof f.callbacks.onUpdate && f.callbacks.onUpdate.call(this)), S.call(this)
                        }
                    })
                },
                scrollTo: function(b, c) {
                    if ("undefined" != typeof b && null != b) {
                        var e = m.call(this);
                        return a(e).each(function() {
                            var e = a(this);
                            if (e.data(d)) {
                                var f = e.data(d),
                                    g = f.opt,
                                    h = {
                                        trigger: "external",
                                        scrollInertia: g.scrollInertia,
                                        scrollEasing: "mcsEaseInOut",
                                        moveDragger: !1,
                                        timeout: 60,
                                        callbacks: !0,
                                        onStart: !0,
                                        onUpdate: !0,
                                        onComplete: !0
                                    },
                                    i = a.extend(!0, {}, h, c),
                                    j = Q.call(this, b),
                                    k = i.scrollInertia > 0 && i.scrollInertia < 17 ? 17 : i.scrollInertia;
                                j[0] = R.call(this, j[0], "y"), j[1] = R.call(this, j[1], "x"), i.moveDragger && (j[0] *= f.scrollRatio.y, j[1] *= f.scrollRatio.x), i.dur = ca() ? 0 : k, setTimeout(function() {
                                    null !== j[0] && "undefined" != typeof j[0] && "x" !== g.axis && f.overflowed[0] && (i.dir = "y", i.overwrite = "all", V(e, j[0].toString(), i)), null !== j[1] && "undefined" != typeof j[1] && "y" !== g.axis && f.overflowed[1] && (i.dir = "x", i.overwrite = "none", V(e, j[1].toString(), i))
                                }, i.timeout)
                            }
                        })
                    }
                },
                stop: function() {
                    var b = m.call(this);
                    return a(b).each(function() {
                        var b = a(this);
                        b.data(d) && U(b)
                    })
                },
                disable: function(b) {
                    var c = m.call(this);
                    return a(c).each(function() {
                        var c = a(this);
                        if (c.data(d)) {
                            {
                                c.data(d)
                            }
                            S.call(this, "remove"), B.call(this), b && z.call(this), C.call(this, !0), c.addClass(k[3])
                        }
                    })
                },
                destroy: function() {
                    var b = m.call(this);
                    return a(b).each(function() {
                        var e = a(this);
                        if (e.data(d)) {
                            var f = e.data(d),
                                g = f.opt,
                                h = a("#mCSB_" + f.idx),
                                i = a("#mCSB_" + f.idx + "_container"),
                                j = a(".mCSB_" + f.idx + "_scrollbar");
                            g.live && o(g.liveSelector || a(b).selector), S.call(this, "remove"), B.call(this), z.call(this), e.removeData(d), Z(this, "mcs"), j.remove(), i.find("img." + k[2]).removeClass(k[2]), h.replaceWith(i.contents()), e.removeClass(c + " _" + d + "_" + f.idx + " " + k[6] + " " + k[7] + " " + k[5] + " " + k[3]).addClass(k[4])
                        }
                    })
                }
            },
            m = function() {
                return "object" != typeof a(this) || a(this).length < 1 ? e : this
            },
            n = function(b) {
                var c = ["rounded", "rounded-dark", "rounded-dots", "rounded-dots-dark"],
                    d = ["rounded-dots", "rounded-dots-dark", "3d", "3d-dark", "3d-thick", "3d-thick-dark", "inset", "inset-dark", "inset-2", "inset-2-dark", "inset-3", "inset-3-dark"],
                    e = ["minimal", "minimal-dark"],
                    f = ["minimal", "minimal-dark"],
                    g = ["minimal", "minimal-dark"];
                b.autoDraggerLength = a.inArray(b.theme, c) > -1 ? !1 : b.autoDraggerLength, b.autoExpandScrollbar = a.inArray(b.theme, d) > -1 ? !1 : b.autoExpandScrollbar, b.scrollButtons.enable = a.inArray(b.theme, e) > -1 ? !1 : b.scrollButtons.enable, b.autoHideScrollbar = a.inArray(b.theme, f) > -1 ? !0 : b.autoHideScrollbar, b.scrollbarPosition = a.inArray(b.theme, g) > -1 ? "outside" : b.scrollbarPosition
            },
            o = function(a) {
                h[a] && (clearTimeout(h[a]), Z(h, a))
            },
            p = function(a) {
                return "yx" === a || "xy" === a || "auto" === a ? "yx" : "x" === a || "horizontal" === a ? "x" : "y"
            },
            q = function(a) {
                return "stepped" === a || "pixels" === a || "step" === a || "click" === a ? "stepped" : "stepless"
            },
            r = function() {
                var b = a(this),
                    e = b.data(d),
                    f = e.opt,
                    g = f.autoExpandScrollbar ? " " + k[1] + "_expand" : "",
                    h = ["<div id='mCSB_" + e.idx + "_scrollbar_vertical' class='mCSB_scrollTools mCSB_" + e.idx + "_scrollbar mCS-" + f.theme + " mCSB_scrollTools_vertical" + g + "'><div class='" + k[12] + "'><div id='mCSB_" + e.idx + "_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>", "<div id='mCSB_" + e.idx + "_scrollbar_horizontal' class='mCSB_scrollTools mCSB_" + e.idx + "_scrollbar mCS-" + f.theme + " mCSB_scrollTools_horizontal" + g + "'><div class='" + k[12] + "'><div id='mCSB_" + e.idx + "_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],
                    i = "yx" === f.axis ? "mCSB_vertical_horizontal" : "x" === f.axis ? "mCSB_horizontal" : "mCSB_vertical",
                    j = "yx" === f.axis ? h[0] + h[1] : "x" === f.axis ? h[1] : h[0],
                    l = "yx" === f.axis ? "<div id='mCSB_" + e.idx + "_container_wrapper' class='mCSB_container_wrapper' />" : "",
                    m = f.autoHideScrollbar ? " " + k[6] : "",
                    n = "x" !== f.axis && "rtl" === e.langDir ? " " + k[7] : "";
                f.setWidth && b.css("width", f.setWidth), f.setHeight && b.css("height", f.setHeight), f.setLeft = "y" !== f.axis && "rtl" === e.langDir ? "989999px" : f.setLeft, b.addClass(c + " _" + d + "_" + e.idx + m + n).wrapInner("<div id='mCSB_" + e.idx + "' class='mCustomScrollBox mCS-" + f.theme + " " + i + "'><div id='mCSB_" + e.idx + "_container' class='mCSB_container' style='position:relative; top:" + f.setTop + "; left:" + f.setLeft + ";' dir=" + e.langDir + " /></div>");
                var o = a("#mCSB_" + e.idx),
                    p = a("#mCSB_" + e.idx + "_container");
                "y" === f.axis || f.advanced.autoExpandHorizontalScroll || p.css("width", s(p)), "outside" === f.scrollbarPosition ? ("static" === b.css("position") && b.css("position", "relative"), b.css("overflow", "visible"), o.addClass("mCSB_outside").after(j)) : (o.addClass("mCSB_inside").append(j), p.wrap(l)), u.call(this);
                var q = [a("#mCSB_" + e.idx + "_dragger_vertical"), a("#mCSB_" + e.idx + "_dragger_horizontal")];
                q[0].css("min-height", q[0].height()), q[1].css("min-width", q[1].width())
            },
            s = function(b) {
                var c = [b[0].scrollWidth, Math.max.apply(Math, b.children().map(function() {
                        return a(this).outerWidth(!0)
                    }).get())],
                    d = b.parent().width();
                return c[0] > d ? c[0] : c[1] > d ? c[1] : "100%"
            },
            t = function() {
                var b = a(this),
                    c = b.data(d),
                    e = c.opt,
                    f = a("#mCSB_" + c.idx + "_container");
                if (e.advanced.autoExpandHorizontalScroll && "y" !== e.axis) {
                    f.css({
                        width: "auto",
                        "min-width": 0,
                        "overflow-x": "scroll"
                    });
                    var g = Math.ceil(f[0].scrollWidth);
                    3 === e.advanced.autoExpandHorizontalScroll || 2 !== e.advanced.autoExpandHorizontalScroll && g > f.parent().width() ? f.css({
                        width: g,
                        "min-width": "100%",
                        "overflow-x": "inherit"
                    }) : f.css({
                        "overflow-x": "inherit",
                        position: "absolute"
                    }).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({
                        width: Math.ceil(f[0].getBoundingClientRect().right + .4) - Math.floor(f[0].getBoundingClientRect().left),
                        "min-width": "100%",
                        position: "relative"
                    }).unwrap()
                }
            },
            u = function() {
                var b = a(this),
                    c = b.data(d),
                    e = c.opt,
                    f = a(".mCSB_" + c.idx + "_scrollbar:first"),
                    g = aa(e.scrollButtons.tabindex) ? "tabindex='" + e.scrollButtons.tabindex + "'" : "",
                    h = ["<a href='#' class='" + k[13] + "' oncontextmenu='return false;' " + g + " />", "<a href='#' class='" + k[14] + "' oncontextmenu='return false;' " + g + " />", "<a href='#' class='" + k[15] + "' oncontextmenu='return false;' " + g + " />", "<a href='#' class='" + k[16] + "' oncontextmenu='return false;' " + g + " />"],
                    i = ["x" === e.axis ? h[2] : h[0], "x" === e.axis ? h[3] : h[1], h[2], h[3]];
                e.scrollButtons.enable && f.prepend(i[0]).append(i[1]).next(".mCSB_scrollTools").prepend(i[2]).append(i[3])
            },
            v = function() {
                var b = a(this),
                    c = b.data(d),
                    e = a("#mCSB_" + c.idx),
                    f = a("#mCSB_" + c.idx + "_container"),
                    g = [a("#mCSB_" + c.idx + "_dragger_vertical"), a("#mCSB_" + c.idx + "_dragger_horizontal")],
                    h = [e.height() / f.outerHeight(!1), e.width() / f.outerWidth(!1)],
                    j = [parseInt(g[0].css("min-height")), Math.round(h[0] * g[0].parent().height()), parseInt(g[1].css("min-width")), Math.round(h[1] * g[1].parent().width())],
                    k = i && j[1] < j[0] ? j[0] : j[1],
                    l = i && j[3] < j[2] ? j[2] : j[3];
                g[0].css({
                    height: k,
                    "max-height": g[0].parent().height() - 10
                }).find(".mCSB_dragger_bar").css({
                    "line-height": j[0] + "px"
                }), g[1].css({
                    width: l,
                    "max-width": g[1].parent().width() - 10
                })
            },
            w = function() {
                var b = a(this),
                    c = b.data(d),
                    e = a("#mCSB_" + c.idx),
                    f = a("#mCSB_" + c.idx + "_container"),
                    g = [a("#mCSB_" + c.idx + "_dragger_vertical"), a("#mCSB_" + c.idx + "_dragger_horizontal")],
                    h = [f.outerHeight(!1) - e.height(), f.outerWidth(!1) - e.width()],
                    i = [h[0] / (g[0].parent().height() - g[0].height()), h[1] / (g[1].parent().width() - g[1].width())];
                c.scrollRatio = {
                    y: i[0],
                    x: i[1]
                }
            },
            x = function(a, b, c) {
                var d = c ? k[0] + "_expanded" : "",
                    e = a.closest(".mCSB_scrollTools");
                "active" === b ? (a.toggleClass(k[0] + " " + d), e.toggleClass(k[1]), a[0]._draggable = a[0]._draggable ? 0 : 1) : a[0]._draggable || ("hide" === b ? (a.removeClass(k[0]), e.removeClass(k[1])) : (a.addClass(k[0]), e.addClass(k[1])))
            },
            y = function() {
                var b = a(this),
                    c = b.data(d),
                    e = a("#mCSB_" + c.idx),
                    f = a("#mCSB_" + c.idx + "_container"),
                    g = null == c.overflowed ? f.height() : f.outerHeight(!1),
                    h = null == c.overflowed ? f.width() : f.outerWidth(!1),
                    i = f[0].scrollHeight,
                    j = f[0].scrollWidth;
                return i > g && (g = i), j > h && (h = j), [g > e.height(), h > e.width()]
            },
            z = function() {
                var b = a(this),
                    c = b.data(d),
                    e = c.opt,
                    f = a("#mCSB_" + c.idx),
                    g = a("#mCSB_" + c.idx + "_container"),
                    h = [a("#mCSB_" + c.idx + "_dragger_vertical"), a("#mCSB_" + c.idx + "_dragger_horizontal")];
                if (U(b), ("x" !== e.axis && !c.overflowed[0] || "y" === e.axis && c.overflowed[0]) && (h[0].add(g).css("top", 0), V(b, "_resetY")), "y" !== e.axis && !c.overflowed[1] || "x" === e.axis && c.overflowed[1]) {
                    var i = dx = 0;
                    "rtl" === c.langDir && (i = f.width() - g.outerWidth(!1), dx = Math.abs(i / c.scrollRatio.x)), g.css("left", i), h[1].css("left", dx), V(b, "_resetX")
                }
            },
            A = function() {
                function b() {
                    g = setTimeout(function() {
                        a.event.special.mousewheel ? (clearTimeout(g), H.call(c[0])) : b()
                    }, 100)
                }
                var c = a(this),
                    e = c.data(d),
                    f = e.opt;
                if (!e.bindEvents) {
                    if (E.call(this), f.contentTouchScroll && F.call(this), G.call(this), f.mouseWheel.enable) {
                        var g;
                        b()
                    }
                    K.call(this), M.call(this), f.advanced.autoScrollOnFocus && L.call(this), f.scrollButtons.enable && N.call(this), f.keyboard.enable && O.call(this), e.bindEvents = !0
                }
            },
            B = function() {
                var b = a(this),
                    c = b.data(d),
                    e = c.opt,
                    f = d + "_" + c.idx,
                    g = ".mCSB_" + c.idx + "_scrollbar",
                    h = a("#mCSB_" + c.idx + ",#mCSB_" + c.idx + "_container,#mCSB_" + c.idx + "_container_wrapper," + g + " ." + k[12] + ",#mCSB_" + c.idx + "_dragger_vertical,#mCSB_" + c.idx + "_dragger_horizontal," + g + ">a"),
                    i = a("#mCSB_" + c.idx + "_container");
                e.advanced.releaseDraggableSelectors && h.add(a(e.advanced.releaseDraggableSelectors)), e.advanced.extraDraggableSelectors && h.add(a(e.advanced.extraDraggableSelectors)), c.bindEvents && (a(document).add(a(!I() || top.document)).unbind("." + f), h.each(function() {
                    a(this).unbind("." + f)
                }), clearTimeout(b[0]._focusTimeout), Z(b[0], "_focusTimeout"), clearTimeout(c.sequential.step), Z(c.sequential, "step"), clearTimeout(i[0].onCompleteTimeout), Z(i[0], "onCompleteTimeout"), c.bindEvents = !1)
            },
            C = function(b) {
                var c = a(this),
                    e = c.data(d),
                    f = e.opt,
                    g = a("#mCSB_" + e.idx + "_container_wrapper"),
                    h = g.length ? g : a("#mCSB_" + e.idx + "_container"),
                    i = [a("#mCSB_" + e.idx + "_scrollbar_vertical"), a("#mCSB_" + e.idx + "_scrollbar_horizontal")],
                    j = [i[0].find(".mCSB_dragger"), i[1].find(".mCSB_dragger")];
                "x" !== f.axis && (e.overflowed[0] && !b ? (i[0].add(j[0]).add(i[0].children("a")).css("display", "block"), h.removeClass(k[8] + " " + k[10])) : (f.alwaysShowScrollbar ? (2 !== f.alwaysShowScrollbar && j[0].css("display", "none"), h.removeClass(k[10])) : (i[0].css("display", "none"), h.addClass(k[10])), h.addClass(k[8]))), "y" !== f.axis && (e.overflowed[1] && !b ? (i[1].add(j[1]).add(i[1].children("a")).css("display", "block"), h.removeClass(k[9] + " " + k[11])) : (f.alwaysShowScrollbar ? (2 !== f.alwaysShowScrollbar && j[1].css("display", "none"), h.removeClass(k[11])) : (i[1].css("display", "none"), h.addClass(k[11])), h.addClass(k[9]))), e.overflowed[0] || e.overflowed[1] ? c.removeClass(k[5]) : c.addClass(k[5])
            },
            D = function(b) {
                var c = b.type,
                    d = b.target.ownerDocument !== document ? [a(frameElement).offset().top, a(frameElement).offset().left] : null,
                    e = I() && b.target.ownerDocument !== top.document ? [a(b.view.frameElement).offset().top, a(b.view.frameElement).offset().left] : [0, 0];
                switch (c) {
                    case "pointerdown":
                    case "MSPointerDown":
                    case "pointermove":
                    case "MSPointerMove":
                    case "pointerup":
                    case "MSPointerUp":
                        return d ? [b.originalEvent.pageY - d[0] + e[0], b.originalEvent.pageX - d[1] + e[1], !1] : [b.originalEvent.pageY, b.originalEvent.pageX, !1];
                    case "touchstart":
                    case "touchmove":
                    case "touchend":
                        var f = b.originalEvent.touches[0] || b.originalEvent.changedTouches[0],
                            g = b.originalEvent.touches.length || b.originalEvent.changedTouches.length;
                        return b.target.ownerDocument !== document ? [f.screenY, f.screenX, g > 1] : [f.pageY, f.pageX, g > 1];
                    default:
                        return d ? [b.pageY - d[0] + e[0], b.pageX - d[1] + e[1], !1] : [b.pageY, b.pageX, !1]
                }
            },
            E = function() {
                function b(a) {
                    var b = o.find("iframe");
                    if (b.length) {
                        var c = a ? "auto" : "none";
                        b.css("pointer-events", c)
                    }
                }

                function c(a, b, c, d) {
                    if (o[0].idleTimer = l.scrollInertia < 233 ? 250 : 0, e.attr("id") === n[1]) var f = "x",
                        g = (e[0].offsetLeft - b + d) * k.scrollRatio.x;
                    else var f = "y",
                        g = (e[0].offsetTop - a + c) * k.scrollRatio.y;
                    V(h, g.toString(), {
                        dir: f,
                        drag: !0
                    })
                }
                var e, f, g, h = a(this),
                    k = h.data(d),
                    l = k.opt,
                    m = d + "_" + k.idx,
                    n = ["mCSB_" + k.idx + "_dragger_vertical", "mCSB_" + k.idx + "_dragger_horizontal"],
                    o = a("#mCSB_" + k.idx + "_container"),
                    p = a("#" + n[0] + ",#" + n[1]),
                    q = l.advanced.releaseDraggableSelectors ? p.add(a(l.advanced.releaseDraggableSelectors)) : p,
                    r = l.advanced.extraDraggableSelectors ? a(!I() || top.document).add(a(l.advanced.extraDraggableSelectors)) : a(!I() || top.document);
                p.bind("mousedown." + m + " touchstart." + m + " pointerdown." + m + " MSPointerDown." + m, function(c) {
                    if (c.stopImmediatePropagation(), c.preventDefault(), $(c)) {
                        j = !0, i && (document.onselectstart = function() {
                            return !1
                        }), b(!1), U(h), e = a(this);
                        var d = e.offset(),
                            k = D(c)[0] - d.top,
                            m = D(c)[1] - d.left,
                            n = e.height() + d.top,
                            o = e.width() + d.left;
                        n > k && k > 0 && o > m && m > 0 && (f = k, g = m), x(e, "active", l.autoExpandScrollbar)
                    }
                }).bind("touchmove." + m, function(a) {
                    a.stopImmediatePropagation(), a.preventDefault();
                    var b = e.offset(),
                        d = D(a)[0] - b.top,
                        h = D(a)[1] - b.left;
                    c(f, g, d, h)
                }), a(document).add(r).bind("mousemove." + m + " pointermove." + m + " MSPointerMove." + m, function(a) {
                    if (e) {
                        var b = e.offset(),
                            d = D(a)[0] - b.top,
                            h = D(a)[1] - b.left;
                        if (f === d && g === h) return;
                        c(f, g, d, h)
                    }
                }).add(q).bind("mouseup." + m + " touchend." + m + " pointerup." + m + " MSPointerUp." + m, function() {
                    e && (x(e, "active", l.autoExpandScrollbar), e = null), j = !1, i && (document.onselectstart = null), b(!0)
                })
            },
            F = function() {
                function c(a) {
                    if (!_(a) || j || D(a)[2]) return void(b = 0);
                    b = 1, w = 0, x = 0, k = 1, y.removeClass("mCS_touch_action");
                    var c = E.offset();
                    l = D(a)[0] - c.top, m = D(a)[1] - c.left, L = [D(a)[0], D(a)[1]]
                }

                function e(a) {
                    if (_(a) && !j && !D(a)[2] && (A.documentTouchScroll || a.preventDefault(), a.stopImmediatePropagation(), (!x || w) && k)) {
                        q = X();
                        var b = C.offset(),
                            c = D(a)[0] - b.top,
                            d = D(a)[1] - b.left,
                            e = "mcsLinearOut";
                        if (G.push(c), H.push(d), L[2] = Math.abs(D(a)[0] - L[0]), L[3] = Math.abs(D(a)[1] - L[1]), z.overflowed[0]) var f = F[0].parent().height() - F[0].height(),
                            g = l - c > 0 && c - l > -(f * z.scrollRatio.y) && (2 * L[3] < L[2] || "yx" === A.axis);
                        if (z.overflowed[1]) var h = F[1].parent().width() - F[1].width(),
                            n = m - d > 0 && d - m > -(h * z.scrollRatio.x) && (2 * L[2] < L[3] || "yx" === A.axis);
                        g || n ? (O || a.preventDefault(), w = 1) : (x = 1, y.addClass("mCS_touch_action")), O && a.preventDefault(), u = "yx" === A.axis ? [l - c, m - d] : "x" === A.axis ? [null, m - d] : [l - c, null], E[0].idleTimer = 250, z.overflowed[0] && i(u[0], J, e, "y", "all", !0), z.overflowed[1] && i(u[1], J, e, "x", K, !0)
                    }
                }

                function f(a) {
                    if (!_(a) || j || D(a)[2]) return void(b = 0);
                    b = 1, a.stopImmediatePropagation(), U(y), p = X();
                    var c = C.offset();
                    n = D(a)[0] - c.top, o = D(a)[1] - c.left, G = [], H = []
                }

                function g(a) {
                    if (_(a) && !j && !D(a)[2]) {
                        k = 0, a.stopImmediatePropagation(), w = 0, x = 0, r = X();
                        var b = C.offset(),
                            c = D(a)[0] - b.top,
                            d = D(a)[1] - b.left;
                        if (!(r - q > 30)) {
                            t = 1e3 / (r - p);
                            var e = "mcsEaseOut",
                                f = 2.5 > t,
                                g = f ? [G[G.length - 2], H[H.length - 2]] : [0, 0];
                            s = f ? [c - g[0], d - g[1]] : [c - n, d - o];
                            var l = [Math.abs(s[0]), Math.abs(s[1])];
                            t = f ? [Math.abs(s[0] / 4), Math.abs(s[1] / 4)] : [t, t];
                            var m = [Math.abs(E[0].offsetTop) - s[0] * h(l[0] / t[0], t[0]), Math.abs(E[0].offsetLeft) - s[1] * h(l[1] / t[1], t[1])];
                            u = "yx" === A.axis ? [m[0], m[1]] : "x" === A.axis ? [null, m[1]] : [m[0], null], v = [4 * l[0] + A.scrollInertia, 4 * l[1] + A.scrollInertia];
                            var y = parseInt(A.contentTouchScroll) || 0;
                            u[0] = l[0] > y ? u[0] : 0, u[1] = l[1] > y ? u[1] : 0, z.overflowed[0] && i(u[0], v[0], e, "y", K, !1), z.overflowed[1] && i(u[1], v[1], e, "x", K, !1)
                        }
                    }
                }

                function h(a, b) {
                    var c = [1.5 * b, 2 * b, b / 1.5, b / 2];
                    return a > 90 ? b > 4 ? c[0] : c[3] : a > 60 ? b > 3 ? c[3] : c[2] : a > 30 ? b > 8 ? c[1] : b > 6 ? c[0] : b > 4 ? b : c[2] : b > 8 ? b : c[3]
                }

                function i(a, b, c, d, e, f) {
                    a && V(y, a.toString(), {
                        dur: b,
                        scrollEasing: c,
                        dir: d,
                        overwrite: e,
                        drag: f
                    })
                }
                var k, l, m, n, o, p, q, r, s, t, u, v, w, x, y = a(this),
                    z = y.data(d),
                    A = z.opt,
                    B = d + "_" + z.idx,
                    C = a("#mCSB_" + z.idx),
                    E = a("#mCSB_" + z.idx + "_container"),
                    F = [a("#mCSB_" + z.idx + "_dragger_vertical"), a("#mCSB_" + z.idx + "_dragger_horizontal")],
                    G = [],
                    H = [],
                    J = 0,
                    K = "yx" === A.axis ? "none" : "all",
                    L = [],
                    M = E.find("iframe"),
                    N = ["touchstart." + B + " pointerdown." + B + " MSPointerDown." + B, "touchmove." + B + " pointermove." + B + " MSPointerMove." + B, "touchend." + B + " pointerup." + B + " MSPointerUp." + B],
                    O = void 0 !== document.body.style.touchAction;
                E.bind(N[0], function(a) {
                    c(a)
                }).bind(N[1], function(a) {
                    e(a)
                }), C.bind(N[0], function(a) {
                    f(a)
                }).bind(N[2], function(a) {
                    g(a)
                }), M.length && M.each(function() {
                    a(this).load(function() {
                        I(this) && a(this.contentDocument || this.contentWindow.document).bind(N[0], function(a) {
                            c(a), f(a)
                        }).bind(N[1], function(a) {
                            e(a)
                        }).bind(N[2], function(a) {
                            g(a)
                        })
                    })
                })
            },
            G = function() {
                function c() {
                    return window.getSelection ? window.getSelection().toString() : document.selection && "Control" != document.selection.type ? document.selection.createRange().text : 0
                }

                function e(a, b, c) {
                    k.type = c && f ? "stepped" : "stepless", k.scrollAmount = 10, P(g, a, b, "mcsLinearOut", c ? 60 : null)
                }
                var f, g = a(this),
                    h = g.data(d),
                    i = h.opt,
                    k = h.sequential,
                    l = d + "_" + h.idx,
                    m = a("#mCSB_" + h.idx + "_container"),
                    n = m.parent();
                m.bind("mousedown." + l, function() {
                    b || f || (f = 1, j = !0)
                }).add(document).bind("mousemove." + l, function(a) {
                    if (!b && f && c()) {
                        var d = m.offset(),
                            g = D(a)[0] - d.top + m[0].offsetTop,
                            j = D(a)[1] - d.left + m[0].offsetLeft;
                        g > 0 && g < n.height() && j > 0 && j < n.width() ? k.step && e("off", null, "stepped") : ("x" !== i.axis && h.overflowed[0] && (0 > g ? e("on", 38) : g > n.height() && e("on", 40)), "y" !== i.axis && h.overflowed[1] && (0 > j ? e("on", 37) : j > n.width() && e("on", 39)))
                    }
                }).bind("mouseup." + l + " dragend." + l, function() {
                    b || (f && (f = 0, e("off", null)), j = !1)
                })
            },
            H = function() {
                function b(b, d) {
                    if (U(c), !J(c, b.target)) {
                        var g = "auto" !== f.mouseWheel.deltaFactor ? parseInt(f.mouseWheel.deltaFactor) : i && b.deltaFactor < 100 ? 100 : b.deltaFactor || 100,
                            k = f.scrollInertia;
                        if ("x" === f.axis || "x" === f.mouseWheel.axis) var l = "x",
                            m = [Math.round(g * e.scrollRatio.x), parseInt(f.mouseWheel.scrollAmount)],
                            n = "auto" !== f.mouseWheel.scrollAmount ? m[1] : m[0] >= h.width() ? .9 * h.width() : m[0],
                            o = Math.abs(a("#mCSB_" + e.idx + "_container")[0].offsetLeft),
                            p = j[1][0].offsetLeft,
                            q = j[1].parent().width() - j[1].width(),
                            r = b.deltaX || b.deltaY || d;
                        else var l = "y",
                            m = [Math.round(g * e.scrollRatio.y), parseInt(f.mouseWheel.scrollAmount)],
                            n = "auto" !== f.mouseWheel.scrollAmount ? m[1] : m[0] >= h.height() ? .9 * h.height() : m[0],
                            o = Math.abs(a("#mCSB_" + e.idx + "_container")[0].offsetTop),
                            p = j[0][0].offsetTop,
                            q = j[0].parent().height() - j[0].height(),
                            r = b.deltaY || d;
                        "y" === l && !e.overflowed[0] || "x" === l && !e.overflowed[1] || ((f.mouseWheel.invert || b.webkitDirectionInvertedFromDevice) && (r = -r), f.mouseWheel.normalizeDelta && (r = 0 > r ? -1 : 1), (r > 0 && 0 !== p || 0 > r && p !== q || f.mouseWheel.preventDefault) && (b.stopImmediatePropagation(), b.preventDefault()), b.deltaFactor < 2 && !f.mouseWheel.normalizeDelta && (n = b.deltaFactor, k = 17), V(c, (o - r * n).toString(), {
                            dir: l,
                            dur: k
                        }))
                    }
                }
                if (a(this).data(d)) {
                    var c = a(this),
                        e = c.data(d),
                        f = e.opt,
                        g = d + "_" + e.idx,
                        h = a("#mCSB_" + e.idx),
                        j = [a("#mCSB_" + e.idx + "_dragger_vertical"), a("#mCSB_" + e.idx + "_dragger_horizontal")],
                        k = a("#mCSB_" + e.idx + "_container").find("iframe");
                    k.length && k.each(function() {
                        a(this).load(function() {
                            I(this) && a(this.contentDocument || this.contentWindow.document).bind("mousewheel." + g, function(a, c) {
                                b(a, c)
                            })
                        })
                    }), h.bind("mousewheel." + g, function(a, c) {
                        b(a, c)
                    })
                }
            },
            I = function(a) {
                var b = null;
                if (a) {
                    try {
                        var c = a.contentDocument || a.contentWindow.document;
                        b = c.body.innerHTML
                    } catch (d) {}
                    return null !== b
                }
                try {
                    var c = top.document;
                    b = c.body.innerHTML
                } catch (d) {}
                return null !== b
            },
            J = function(b, c) {
                var e = c.nodeName.toLowerCase(),
                    f = b.data(d).opt.mouseWheel.disableOver,
                    g = ["select", "textarea"];
                return a.inArray(e, f) > -1 && !(a.inArray(e, g) > -1 && !a(c).is(":focus"))
            },
            K = function() {
                var b, c = a(this),
                    e = c.data(d),
                    f = d + "_" + e.idx,
                    g = a("#mCSB_" + e.idx + "_container"),
                    h = g.parent(),
                    i = a(".mCSB_" + e.idx + "_scrollbar ." + k[12]);
                i.bind("mousedown." + f + " touchstart." + f + " pointerdown." + f + " MSPointerDown." + f, function(c) {
                    j = !0, a(c.target).hasClass("mCSB_dragger") || (b = 1)
                }).bind("touchend." + f + " pointerup." + f + " MSPointerUp." + f, function() {
                    j = !1
                }).bind("click." + f, function(d) {
                    if (b && (b = 0, a(d.target).hasClass(k[12]) || a(d.target).hasClass("mCSB_draggerRail"))) {
                        U(c);
                        var f = a(this),
                            i = f.find(".mCSB_dragger");
                        if (f.parent(".mCSB_scrollTools_horizontal").length > 0) {
                            if (!e.overflowed[1]) return;
                            var j = "x",
                                l = d.pageX > i.offset().left ? -1 : 1,
                                m = Math.abs(g[0].offsetLeft) - .9 * l * h.width()
                        } else {
                            if (!e.overflowed[0]) return;
                            var j = "y",
                                l = d.pageY > i.offset().top ? -1 : 1,
                                m = Math.abs(g[0].offsetTop) - .9 * l * h.height()
                        }
                        V(c, m.toString(), {
                            dir: j,
                            scrollEasing: "mcsEaseInOut"
                        })
                    }
                })
            },
            L = function() {
                var b = a(this),
                    c = b.data(d),
                    e = c.opt,
                    f = d + "_" + c.idx,
                    g = a("#mCSB_" + c.idx + "_container"),
                    h = g.parent();
                g.bind("focusin." + f, function() {
                    var c = a(document.activeElement),
                        d = g.find(".mCustomScrollBox").length,
                        f = 0;
                    c.is(e.advanced.autoScrollOnFocus) && (U(b), clearTimeout(b[0]._focusTimeout), b[0]._focusTimer = d ? (f + 17) * d : 0, b[0]._focusTimeout = setTimeout(function() {
                        var a = [ba(c)[0], ba(c)[1]],
                            d = [g[0].offsetTop, g[0].offsetLeft],
                            i = [d[0] + a[0] >= 0 && d[0] + a[0] < h.height() - c.outerHeight(!1), d[1] + a[1] >= 0 && d[0] + a[1] < h.width() - c.outerWidth(!1)],
                            j = "yx" !== e.axis || i[0] || i[1] ? "all" : "none";
                        "x" === e.axis || i[0] || V(b, a[0].toString(), {
                            dir: "y",
                            scrollEasing: "mcsEaseInOut",
                            overwrite: j,
                            dur: f
                        }), "y" === e.axis || i[1] || V(b, a[1].toString(), {
                            dir: "x",
                            scrollEasing: "mcsEaseInOut",
                            overwrite: j,
                            dur: f
                        })
                    }, b[0]._focusTimer))
                })
            },
            M = function() {
                var b = a(this),
                    c = b.data(d),
                    e = d + "_" + c.idx,
                    f = a("#mCSB_" + c.idx + "_container").parent();
                f.bind("scroll." + e, function() {
                    (0 !== f.scrollTop() || 0 !== f.scrollLeft()) && a(".mCSB_" + c.idx + "_scrollbar").css("visibility", "hidden")
                })
            },
            N = function() {
                var b = a(this),
                    c = b.data(d),
                    e = c.opt,
                    f = c.sequential,
                    g = d + "_" + c.idx,
                    h = ".mCSB_" + c.idx + "_scrollbar",
                    i = a(h + ">a");
                i.bind("mousedown." + g + " touchstart." + g + " pointerdown." + g + " MSPointerDown." + g + " mouseup." + g + " touchend." + g + " pointerup." + g + " MSPointerUp." + g + " mouseout." + g + " pointerout." + g + " MSPointerOut." + g + " click." + g, function(d) {
                    function g(a, c) {
                        f.scrollAmount = e.scrollButtons.scrollAmount, P(b, a, c)
                    }
                    if (d.preventDefault(), $(d)) {
                        var h = a(this).attr("class");
                        switch (f.type = e.scrollButtons.scrollType, d.type) {
                            case "mousedown":
                            case "touchstart":
                            case "pointerdown":
                            case "MSPointerDown":
                                if ("stepped" === f.type) return;
                                j = !0, c.tweenRunning = !1, g("on", h);
                                break;
                            case "mouseup":
                            case "touchend":
                            case "pointerup":
                            case "MSPointerUp":
                            case "mouseout":
                            case "pointerout":
                            case "MSPointerOut":
                                if ("stepped" === f.type) return;
                                j = !1, f.dir && g("off", h);
                                break;
                            case "click":
                                if ("stepped" !== f.type || c.tweenRunning) return;
                                g("on", h)
                        }
                    }
                })
            },
            O = function() {
                function b(b) {
                    function d(a, b) {
                        g.type = f.keyboard.scrollType, g.scrollAmount = f.keyboard.scrollAmount, "stepped" === g.type && e.tweenRunning || P(c, a, b)
                    }
                    switch (b.type) {
                        case "blur":
                            e.tweenRunning && g.dir && d("off", null);
                            break;
                        case "keydown":
                        case "keyup":
                            var h = b.keyCode ? b.keyCode : b.which,
                                i = "on";
                            if ("x" !== f.axis && (38 === h || 40 === h) || "y" !== f.axis && (37 === h || 39 === h)) {
                                if ((38 === h || 40 === h) && !e.overflowed[0] || (37 === h || 39 === h) && !e.overflowed[1]) return;
                                "keyup" === b.type && (i = "off"), a(document.activeElement).is(l) || (b.preventDefault(), b.stopImmediatePropagation(), d(i, h))
                            } else if (33 === h || 34 === h) {
                                if ((e.overflowed[0] || e.overflowed[1]) && (b.preventDefault(), b.stopImmediatePropagation()), "keyup" === b.type) {
                                    U(c);
                                    var m = 34 === h ? -1 : 1;
                                    if ("x" === f.axis || "yx" === f.axis && e.overflowed[1] && !e.overflowed[0]) var n = "x",
                                        o = Math.abs(j[0].offsetLeft) - .9 * m * k.width();
                                    else var n = "y",
                                        o = Math.abs(j[0].offsetTop) - .9 * m * k.height();
                                    V(c, o.toString(), {
                                        dir: n,
                                        scrollEasing: "mcsEaseInOut"
                                    })
                                }
                            } else if ((35 === h || 36 === h) && !a(document.activeElement).is(l) && ((e.overflowed[0] || e.overflowed[1]) && (b.preventDefault(), b.stopImmediatePropagation()), "keyup" === b.type)) {
                                if ("x" === f.axis || "yx" === f.axis && e.overflowed[1] && !e.overflowed[0]) var n = "x",
                                    o = 35 === h ? Math.abs(k.width() - j.outerWidth(!1)) : 0;
                                else var n = "y",
                                    o = 35 === h ? Math.abs(k.height() - j.outerHeight(!1)) : 0;
                                V(c, o.toString(), {
                                    dir: n,
                                    scrollEasing: "mcsEaseInOut"
                                })
                            }
                    }
                }
                var c = a(this),
                    e = c.data(d),
                    f = e.opt,
                    g = e.sequential,
                    h = d + "_" + e.idx,
                    i = a("#mCSB_" + e.idx),
                    j = a("#mCSB_" + e.idx + "_container"),
                    k = j.parent(),
                    l = "input,textarea,select,datalist,keygen,[contenteditable='true']",
                    m = j.find("iframe"),
                    n = ["blur." + h + " keydown." + h + " keyup." + h];
                m.length && m.each(function() {
                    a(this).load(function() {
                        I(this) && a(this.contentDocument || this.contentWindow.document).bind(n[0], function(a) {
                            b(a)
                        })
                    })
                }), i.attr("tabindex", "0").bind(n[0], function(a) {
                    b(a)
                })
            },
            P = function(b, c, e, f, g) {
                function h(a) {
                    l.snapAmount && (m.scrollAmount = l.snapAmount instanceof Array ? "x" === m.dir[0] ? l.snapAmount[1] : l.snapAmount[0] : l.snapAmount);
                    var c = "stepped" !== m.type,
                        d = g ? g : a ? c ? p / 1.5 : q : 1e3 / 60,
                        e = a ? c ? 7.5 : 40 : 2.5,
                        i = [Math.abs(n[0].offsetTop), Math.abs(n[0].offsetLeft)],
                        k = [j.scrollRatio.y > 10 ? 10 : j.scrollRatio.y, j.scrollRatio.x > 10 ? 10 : j.scrollRatio.x],
                        o = "x" === m.dir[0] ? i[1] + m.dir[1] * k[1] * e : i[0] + m.dir[1] * k[0] * e,
                        r = "x" === m.dir[0] ? i[1] + m.dir[1] * parseInt(m.scrollAmount) : i[0] + m.dir[1] * parseInt(m.scrollAmount),
                        s = "auto" !== m.scrollAmount ? r : o,
                        t = f ? f : a ? c ? "mcsLinearOut" : "mcsEaseInOut" : "mcsLinear",
                        u = a ? !0 : !1;
                    return a && 17 > d && (s = "x" === m.dir[0] ? i[1] : i[0]), V(b, s.toString(), {
                        dir: m.dir[0],
                        scrollEasing: t,
                        dur: d,
                        onComplete: u
                    }), a ? void(m.dir = !1) : (clearTimeout(m.step), void(m.step = setTimeout(function() {
                        h()
                    }, d)))
                }

                function i() {
                    clearTimeout(m.step), Z(m, "step"), U(b)
                }
                var j = b.data(d),
                    l = j.opt,
                    m = j.sequential,
                    n = a("#mCSB_" + j.idx + "_container"),
                    o = "stepped" === m.type ? !0 : !1,
                    p = l.scrollInertia < 26 ? 26 : l.scrollInertia,
                    q = l.scrollInertia < 1 ? 17 : l.scrollInertia;
                switch (c) {
                    case "on":
                        if (m.dir = [e === k[16] || e === k[15] || 39 === e || 37 === e ? "x" : "y", e === k[13] || e === k[15] || 38 === e || 37 === e ? -1 : 1], U(b), aa(e) && "stepped" === m.type) return;
                        h(o);
                        break;
                    case "off":
                        i(), (o || j.tweenRunning && m.dir) && h(!0)
                }
            },
            Q = function(b) {
                var c = a(this).data(d).opt,
                    e = [];
                return "function" == typeof b && (b = b()), b instanceof Array ? e = b.length > 1 ? [b[0], b[1]] : "x" === c.axis ? [null, b[0]] : [b[0], null] : (e[0] = b.y ? b.y : b.x || "x" === c.axis ? null : b, e[1] = b.x ? b.x : b.y || "y" === c.axis ? null : b), "function" == typeof e[0] && (e[0] = e[0]()), "function" == typeof e[1] && (e[1] = e[1]()), e
            },
            R = function(b, c) {
                if (null != b && "undefined" != typeof b) {
                    var e = a(this),
                        f = e.data(d),
                        g = f.opt,
                        h = a("#mCSB_" + f.idx + "_container"),
                        i = h.parent(),
                        j = typeof b;
                    c || (c = "x" === g.axis ? "x" : "y");
                    var k = "x" === c ? h.outerWidth(!1) : h.outerHeight(!1),
                        m = "x" === c ? h[0].offsetLeft : h[0].offsetTop,
                        n = "x" === c ? "left" : "top";
                    switch (j) {
                        case "function":
                            return b();
                        case "object":
                            var o = b.jquery ? b : a(b);
                            if (!o.length) return;
                            return "x" === c ? ba(o)[1] : ba(o)[0];
                        case "string":
                        case "number":
                            if (aa(b)) return Math.abs(b);
                            if (-1 !== b.indexOf("%")) return Math.abs(k * parseInt(b) / 100);
                            if (-1 !== b.indexOf("-=")) return Math.abs(m - parseInt(b.split("-=")[1]));
                            if (-1 !== b.indexOf("+=")) {
                                var p = m + parseInt(b.split("+=")[1]);
                                return p >= 0 ? 0 : Math.abs(p)
                            }
                            if (-1 !== b.indexOf("px") && aa(b.split("px")[0])) return Math.abs(b.split("px")[0]);
                            if ("top" === b || "left" === b) return 0;
                            if ("bottom" === b) return Math.abs(i.height() - h.outerHeight(!1));
                            if ("right" === b) return Math.abs(i.width() - h.outerWidth(!1));
                            if ("first" === b || "last" === b) {
                                var o = h.find(":" + b);
                                return "x" === c ? ba(o)[1] : ba(o)[0]
                            }
                            return a(b).length ? "x" === c ? ba(a(b))[1] : ba(a(b))[0] : (h.css(n, b),
                                void l.update.call(null, e[0]))
                    }
                }
            },
            S = function(b) {
                function c() {
                    return clearTimeout(m[0].autoUpdate), 0 === h.parents("html").length ? void(h = null) : void(m[0].autoUpdate = setTimeout(function() {
                        return j.advanced.updateOnSelectorChange && (i.poll.change.n = f(), i.poll.change.n !== i.poll.change.o) ? (i.poll.change.o = i.poll.change.n, void g(3)) : j.advanced.updateOnContentResize && (i.poll.size.n = h[0].scrollHeight + h[0].scrollWidth + m[0].offsetHeight + h[0].offsetHeight + h[0].offsetWidth, i.poll.size.n !== i.poll.size.o) ? (i.poll.size.o = i.poll.size.n, void g(1)) : !j.advanced.updateOnImageLoad || "auto" === j.advanced.updateOnImageLoad && "y" === j.axis || (i.poll.img.n = m.find("img").length, i.poll.img.n === i.poll.img.o) ? void((j.advanced.updateOnSelectorChange || j.advanced.updateOnContentResize || j.advanced.updateOnImageLoad) && c()) : (i.poll.img.o = i.poll.img.n, void m.find("img").each(function() {
                            e(this)
                        }))
                    }, j.advanced.autoUpdateTimeout))
                }

                function e(b) {
                    function c(a, b) {
                        return function() {
                            return b.apply(a, arguments)
                        }
                    }

                    function d() {
                        this.onload = null, a(b).addClass(k[2]), g(2)
                    }
                    if (a(b).hasClass(k[2])) return void g();
                    var e = new Image;
                    e.onload = c(e, d), e.src = b.src
                }

                function f() {
                    j.advanced.updateOnSelectorChange === !0 && (j.advanced.updateOnSelectorChange = "*");
                    var a = 0,
                        b = m.find(j.advanced.updateOnSelectorChange);
                    return j.advanced.updateOnSelectorChange && b.length > 0 && b.each(function() {
                        a += this.offsetHeight + this.offsetWidth
                    }), a
                }

                function g(a) {
                    clearTimeout(m[0].autoUpdate), l.update.call(null, h[0], a)
                }
                var h = a(this),
                    i = h.data(d),
                    j = i.opt,
                    m = a("#mCSB_" + i.idx + "_container");
                return b ? (clearTimeout(m[0].autoUpdate), void Z(m[0], "autoUpdate")) : void c()
            },
            T = function(a, b, c) {
                return Math.round(a / b) * b - c
            },
            U = function(b) {
                var c = b.data(d),
                    e = a("#mCSB_" + c.idx + "_container,#mCSB_" + c.idx + "_container_wrapper,#mCSB_" + c.idx + "_dragger_vertical,#mCSB_" + c.idx + "_dragger_horizontal");
                e.each(function() {
                    Y.call(this)
                })
            },
            V = function(b, c, e) {
                function f(a) {
                    return i && j.callbacks[a] && "function" == typeof j.callbacks[a]
                }

                function g() {
                    return [j.callbacks.alwaysTriggerOffsets || u >= v[0] + y, j.callbacks.alwaysTriggerOffsets || -z >= u]
                }

                function h() {
                    var a = [n[0].offsetTop, n[0].offsetLeft],
                        c = [s[0].offsetTop, s[0].offsetLeft],
                        d = [n.outerHeight(!1), n.outerWidth(!1)],
                        f = [m.height(), m.width()];
                    b[0].mcs = {
                        content: n,
                        top: a[0],
                        left: a[1],
                        draggerTop: c[0],
                        draggerLeft: c[1],
                        topPct: Math.round(100 * Math.abs(a[0]) / (Math.abs(d[0]) - f[0])),
                        leftPct: Math.round(100 * Math.abs(a[1]) / (Math.abs(d[1]) - f[1])),
                        direction: e.dir
                    }
                }
                var i = b.data(d),
                    j = i.opt,
                    k = {
                        trigger: "internal",
                        dir: "y",
                        scrollEasing: "mcsEaseOut",
                        drag: !1,
                        dur: j.scrollInertia,
                        overwrite: "all",
                        callbacks: !0,
                        onStart: !0,
                        onUpdate: !0,
                        onComplete: !0
                    },
                    e = a.extend(k, e),
                    l = [e.dur, e.drag ? 0 : e.dur],
                    m = a("#mCSB_" + i.idx),
                    n = a("#mCSB_" + i.idx + "_container"),
                    o = n.parent(),
                    p = j.callbacks.onTotalScrollOffset ? Q.call(b, j.callbacks.onTotalScrollOffset) : [0, 0],
                    q = j.callbacks.onTotalScrollBackOffset ? Q.call(b, j.callbacks.onTotalScrollBackOffset) : [0, 0];
                if (i.trigger = e.trigger, (0 !== o.scrollTop() || 0 !== o.scrollLeft()) && (a(".mCSB_" + i.idx + "_scrollbar").css("visibility", "visible"), o.scrollTop(0).scrollLeft(0)), "_resetY" !== c || i.contentReset.y || (f("onOverflowYNone") && j.callbacks.onOverflowYNone.call(b[0]), i.contentReset.y = 1), "_resetX" !== c || i.contentReset.x || (f("onOverflowXNone") && j.callbacks.onOverflowXNone.call(b[0]), i.contentReset.x = 1), "_resetY" !== c && "_resetX" !== c) {
                    if (!i.contentReset.y && b[0].mcs || !i.overflowed[0] || (f("onOverflowY") && j.callbacks.onOverflowY.call(b[0]), i.contentReset.x = null), !i.contentReset.x && b[0].mcs || !i.overflowed[1] || (f("onOverflowX") && j.callbacks.onOverflowX.call(b[0]), i.contentReset.x = null), j.snapAmount) {
                        var r = j.snapAmount instanceof Array ? "x" === e.dir ? j.snapAmount[1] : j.snapAmount[0] : j.snapAmount;
                        c = T(c, r, j.snapOffset)
                    }
                    switch (e.dir) {
                        case "x":
                            var s = a("#mCSB_" + i.idx + "_dragger_horizontal"),
                                t = "left",
                                u = n[0].offsetLeft,
                                v = [m.width() - n.outerWidth(!1), s.parent().width() - s.width()],
                                w = [c, 0 === c ? 0 : c / i.scrollRatio.x],
                                y = p[1],
                                z = q[1],
                                A = y > 0 ? y / i.scrollRatio.x : 0,
                                B = z > 0 ? z / i.scrollRatio.x : 0;
                            break;
                        case "y":
                            var s = a("#mCSB_" + i.idx + "_dragger_vertical"),
                                t = "top",
                                u = n[0].offsetTop,
                                v = [m.height() - n.outerHeight(!1), s.parent().height() - s.height()],
                                w = [c, 0 === c ? 0 : c / i.scrollRatio.y],
                                y = p[0],
                                z = q[0],
                                A = y > 0 ? y / i.scrollRatio.y : 0,
                                B = z > 0 ? z / i.scrollRatio.y : 0
                    }
                    w[1] < 0 || 0 === w[0] && 0 === w[1] ? w = [0, 0] : w[1] >= v[1] ? w = [v[0], v[1]] : w[0] = -w[0], b[0].mcs || (h(), f("onInit") && j.callbacks.onInit.call(b[0])), clearTimeout(n[0].onCompleteTimeout), W(s[0], t, Math.round(w[1]), l[1], e.scrollEasing), (i.tweenRunning || !(0 === u && w[0] >= 0 || u === v[0] && w[0] <= v[0])) && W(n[0], t, Math.round(w[0]), l[0], e.scrollEasing, e.overwrite, {
                        onStart: function() {
                            e.callbacks && e.onStart && !i.tweenRunning && (f("onScrollStart") && (h(), j.callbacks.onScrollStart.call(b[0])), i.tweenRunning = !0, x(s), i.cbOffsets = g())
                        },
                        onUpdate: function() {
                            e.callbacks && e.onUpdate && f("whileScrolling") && (h(), j.callbacks.whileScrolling.call(b[0]))
                        },
                        onComplete: function() {
                            if (e.callbacks && e.onComplete) {
                                "yx" === j.axis && clearTimeout(n[0].onCompleteTimeout);
                                var a = n[0].idleTimer || 0;
                                n[0].onCompleteTimeout = setTimeout(function() {
                                    f("onScroll") && (h(), j.callbacks.onScroll.call(b[0])), f("onTotalScroll") && w[1] >= v[1] - A && i.cbOffsets[0] && (h(), j.callbacks.onTotalScroll.call(b[0])), f("onTotalScrollBack") && w[1] <= B && i.cbOffsets[1] && (h(), j.callbacks.onTotalScrollBack.call(b[0])), i.tweenRunning = !1, n[0].idleTimer = 0, x(s, "hide")
                                }, a)
                            }
                        }
                    })
                }
            },
            W = function(a, b, c, d, e, f, g) {
                function h() {
                    v.stop || (s || o.call(), s = X() - r, i(), s >= v.time && (v.time = s > v.time ? s + m - (s - v.time) : s + m - 1, v.time < s + 1 && (v.time = s + 1)), v.time < d ? v.id = n(h) : q.call())
                }

                function i() {
                    d > 0 ? (v.currVal = l(v.time, t, w, d, e), u[b] = Math.round(v.currVal) + "px") : u[b] = c + "px", p.call()
                }

                function j() {
                    m = 1e3 / 60, v.time = s + m, n = window.requestAnimationFrame ? window.requestAnimationFrame : function(a) {
                        return i(), setTimeout(a, .01)
                    }, v.id = n(h)
                }

                function k() {
                    null != v.id && (window.requestAnimationFrame ? window.cancelAnimationFrame(v.id) : clearTimeout(v.id), v.id = null)
                }

                function l(a, b, c, d, e) {
                    switch (e) {
                        case "linear":
                        case "mcsLinear":
                            return c * a / d + b;
                        case "mcsLinearOut":
                            return a /= d, a--, c * Math.sqrt(1 - a * a) + b;
                        case "easeInOutSmooth":
                            return a /= d / 2, 1 > a ? c / 2 * a * a + b : (a--, -c / 2 * (a * (a - 2) - 1) + b);
                        case "easeInOutStrong":
                            return a /= d / 2, 1 > a ? c / 2 * Math.pow(2, 10 * (a - 1)) + b : (a--, c / 2 * (-Math.pow(2, -10 * a) + 2) + b);
                        case "easeInOut":
                        case "mcsEaseInOut":
                            return a /= d / 2, 1 > a ? c / 2 * a * a * a + b : (a -= 2, c / 2 * (a * a * a + 2) + b);
                        case "easeOutSmooth":
                            return a /= d, a--, -c * (a * a * a * a - 1) + b;
                        case "easeOutStrong":
                            return c * (-Math.pow(2, -10 * a / d) + 1) + b;
                        case "easeOut":
                        case "mcsEaseOut":
                        default:
                            var f = (a /= d) * a,
                                g = f * a;
                            return b + c * (.499999999999997 * g * f + -2.5 * f * f + 5.5 * g + -6.5 * f + 4 * a)
                    }
                }
                a._mTween || (a._mTween = {
                    top: {},
                    left: {}
                });
                var m, n, g = g || {},
                    o = g.onStart || function() {},
                    p = g.onUpdate || function() {},
                    q = g.onComplete || function() {},
                    r = X(),
                    s = 0,
                    t = a.offsetTop,
                    u = a.style,
                    v = a._mTween[b];
                "left" === b && (t = a.offsetLeft);
                var w = c - t;
                v.stop = 0, "none" !== f && k(), j()
            },
            X = function() {
                return window.performance && window.performance.now ? window.performance.now() : window.performance && window.performance.webkitNow ? window.performance.webkitNow() : Date.now ? Date.now() : (new Date).getTime()
            },
            Y = function() {
                var a = this;
                a._mTween || (a._mTween = {
                    top: {},
                    left: {}
                });
                for (var b = ["top", "left"], c = 0; c < b.length; c++) {
                    var d = b[c];
                    a._mTween[d].id && (window.requestAnimationFrame ? window.cancelAnimationFrame(a._mTween[d].id) : clearTimeout(a._mTween[d].id), a._mTween[d].id = null, a._mTween[d].stop = 1)
                }
            },
            Z = function(a, b) {
                try {
                    delete a[b]
                } catch (c) {
                    a[b] = null
                }
            },
            $ = function(a) {
                return !(a.which && 1 !== a.which)
            },
            _ = function(a) {
                var b = a.originalEvent.pointerType;
                return !(b && "touch" !== b && 2 !== b)
            },
            aa = function(a) {
                return !isNaN(parseFloat(a)) && isFinite(a)
            },
            ba = function(a) {
                var b = a.parents(".mCSB_container");
                return [a.offset().top - b.offset().top, a.offset().left - b.offset().left]
            },
            ca = function() {
                function a() {
                    var a = ["webkit", "moz", "ms", "o"];
                    if ("hidden" in document) return "hidden";
                    for (var b = 0; b < a.length; b++)
                        if (a[b] + "Hidden" in document) return a[b] + "Hidden";
                    return null
                }
                var b = a();
                return b ? document[b] : !1
            };
        a.fn[c] = function(b) {
            return l[b] ? l[b].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof b && b ? void a.error("Method " + b + " does not exist") : l.init.apply(this, arguments)
        }, a[c] = function(b) {
            return l[b] ? l[b].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof b && b ? void a.error("Method " + b + " does not exist") : l.init.apply(this, arguments)
        }, a[c].defaults = f, window[c] = !0, a(window).load(function() {
            a(e)[c](), a.extend(a.expr[":"], {
                mcsInView: a.expr[":"].mcsInView || function(b) {
                    var c, d, e = a(b),
                        f = e.parents(".mCSB_container");
                    return f.length ? (c = f.parent(), d = [f[0].offsetTop, f[0].offsetLeft], d[0] + ba(e)[0] >= 0 && d[0] + ba(e)[0] < c.height() - e.outerHeight(!1) && d[1] + ba(e)[1] >= 0 && d[1] + ba(e)[1] < c.width() - e.outerWidth(!1)) : void 0
                },
                mcsOverflow: a.expr[":"].mcsOverflow || function(b) {
                    var c = a(b).data(d);
                    return c ? c.overflowed[0] || c.overflowed[1] : void 0
                }
            })
        })
    })
}), ! function(a, b, c) {
    function d(b, c) {
        this.bodyOverflowX, this.callbacks = {
            hide: [],
            show: []
        }, this.checkInterval = null, this.Content, this.$el = a(b), this.$elProxy, this.elProxyPosition, this.enabled = !0, this.options = a.extend({}, i, c), this.mouseIsOverProxy = !1, this.namespace = "tooltipster-" + Math.round(1e5 * Math.random()), this.Status = "hidden", this.timerHide = null, this.timerShow = null, this.$tooltip, this.options.iconTheme = this.options.iconTheme.replace(".", ""), this.options.theme = this.options.theme.replace(".", ""), this._init()
    }

    function e(b, c) {
        var d = !0;
        return a.each(b, function(a) {
            return "undefined" == typeof c[a] || b[a] !== c[a] ? (d = !1, !1) : void 0
        }), d
    }

    function f() {
        return !k && j
    }

    function g() {
        var a = c.body || c.documentElement,
            b = a.style,
            d = "transition";
        if ("string" == typeof b[d]) return !0;
        v = ["Moz", "Webkit", "Khtml", "O", "ms"], d = d.charAt(0).toUpperCase() + d.substr(1);
        for (var e = 0; e < v.length; e++)
            if ("string" == typeof b[v[e] + d]) return !0;
        return !1
    }
    var h = "tooltipster",
        i = {
            animation: "fade",
            arrow: !0,
            arrowColor: "",
            autoClose: !0,
            content: null,
            contentAsHTML: !1,
            contentCloning: !0,
            debug: !0,
            delay: 200,
            minWidth: 0,
            maxWidth: null,
            functionInit: function() {},
            functionBefore: function(a, b) {
                b()
            },
            functionReady: function() {},
            functionAfter: function() {},
            hideOnClick: !1,
            icon: "(?)",
            iconCloning: !0,
            iconDesktop: !1,
            iconTouch: !1,
            iconTheme: "tooltipster-icon",
            interactive: !1,
            interactiveTolerance: 350,
            multiple: !1,
            offsetX: 0,
            offsetY: 0,
            onlyOne: !1,
            position: "top",
            positionTracker: !1,
            positionTrackerCallback: function() {
                "hover" == this.option("trigger") && this.option("autoClose") && this.hide()
            },
            restoration: "current",
            speed: 350,
            timer: 0,
            theme: "tooltipster-default",
            touchDevices: !0,
            trigger: "hover",
            updateAnimation: !0
        };
    d.prototype = {
        _init: function() {
            var b = this;
            if (c.querySelector) {
                var d = null;
                void 0 === b.$el.data("tooltipster-initialTitle") && (d = b.$el.attr("title"), void 0 === d && (d = null), b.$el.data("tooltipster-initialTitle", d)), b._content_set(null !== b.options.content ? b.options.content : d);
                var e = b.options.functionInit.call(b.$el, b.$el, b.Content);
                "undefined" != typeof e && b._content_set(e), b.$el.removeAttr("title").addClass("tooltipstered"), !j && b.options.iconDesktop || j && b.options.iconTouch ? ("string" == typeof b.options.icon ? (b.$elProxy = a('<span class="' + b.options.iconTheme + '"></span>'), b.$elProxy.text(b.options.icon)) : b.$elProxy = b.options.iconCloning ? b.options.icon.clone(!0) : b.options.icon, b.$elProxy.insertAfter(b.$el)) : b.$elProxy = b.$el, "hover" == b.options.trigger ? (b.$elProxy.on("mouseenter." + b.namespace, function() {
                    (!f() || b.options.touchDevices) && (b.mouseIsOverProxy = !0, b._show())
                }).on("mouseleave." + b.namespace, function() {
                    (!f() || b.options.touchDevices) && (b.mouseIsOverProxy = !1)
                }), j && b.options.touchDevices && b.$elProxy.on("touchstart." + b.namespace, function() {
                    b._showNow()
                })) : "click" == b.options.trigger && b.$elProxy.on("click." + b.namespace, function() {
                    (!f() || b.options.touchDevices) && b._show()
                })
            }
        },
        _show: function() {
            var a = this;
            "shown" != a.Status && "appearing" != a.Status && (a.options.delay ? a.timerShow = setTimeout(function() {
                ("click" == a.options.trigger || "hover" == a.options.trigger && a.mouseIsOverProxy) && a._showNow()
            }, a.options.delay) : a._showNow())
        },
        _showNow: function(c) {
            var d = this;
            d.options.functionBefore.call(d.$el, d.$el, function() {
                if (d.enabled && null !== d.Content) {
                    c && d.callbacks.show.push(c), d.callbacks.hide = [], clearTimeout(d.timerShow), d.timerShow = null, clearTimeout(d.timerHide), d.timerHide = null, d.options.onlyOne && a(".tooltipstered").not(d.$el).each(function(b, c) {
                        var d = a(c),
                            e = d.data("tooltipster-ns");
                        a.each(e, function(a, b) {
                            var c = d.data(b),
                                e = c.status(),
                                f = c.option("autoClose");
                            "hidden" !== e && "disappearing" !== e && f && c.hide()
                        })
                    });
                    var e = function() {
                        d.Status = "shown", a.each(d.callbacks.show, function(a, b) {
                            b.call(d.$el)
                        }), d.callbacks.show = []
                    };
                    if ("hidden" !== d.Status) {
                        var f = 0;
                        "disappearing" === d.Status ? (d.Status = "appearing", g() ? (d.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-" + d.options.animation + "-show"), d.options.speed > 0 && d.$tooltip.delay(d.options.speed), d.$tooltip.queue(e)) : d.$tooltip.stop().fadeIn(e)) : "shown" === d.Status && e()
                    } else {
                        d.Status = "appearing";
                        var f = d.options.speed;
                        d.bodyOverflowX = a("body").css("overflow-x"), a("body").css("overflow-x", "hidden");
                        var h = "tooltipster-" + d.options.animation,
                            i = "-webkit-transition-duration: " + d.options.speed + "ms; -webkit-animation-duration: " + d.options.speed + "ms; -moz-transition-duration: " + d.options.speed + "ms; -moz-animation-duration: " + d.options.speed + "ms; -o-transition-duration: " + d.options.speed + "ms; -o-animation-duration: " + d.options.speed + "ms; -ms-transition-duration: " + d.options.speed + "ms; -ms-animation-duration: " + d.options.speed + "ms; transition-duration: " + d.options.speed + "ms; animation-duration: " + d.options.speed + "ms;",
                            k = d.options.minWidth ? "min-width:" + Math.round(d.options.minWidth) + "px;" : "",
                            l = d.options.maxWidth ? "max-width:" + Math.round(d.options.maxWidth) + "px;" : "",
                            m = d.options.interactive ? "pointer-events: auto;" : "";
                        if (d.$tooltip = a('<div class="tooltipster-base ' + d.options.theme + '" style="' + k + " " + l + " " + m + " " + i + '"><div class="tooltipster-content"></div></div>'), g() && d.$tooltip.addClass(h), d._content_insert(), d.$tooltip.appendTo("body"), d.reposition(), d.options.functionReady.call(d.$el, d.$el, d.$tooltip), g() ? (d.$tooltip.addClass(h + "-show"), d.options.speed > 0 && d.$tooltip.delay(d.options.speed), d.$tooltip.queue(e)) : d.$tooltip.css("display", "none").fadeIn(d.options.speed, e), d._interval_set(), a(b).on("scroll." + d.namespace + " resize." + d.namespace, function() {
                                d.reposition()
                            }), d.options.autoClose)
                            if (a("body").off("." + d.namespace), "hover" == d.options.trigger) {
                                if (j && setTimeout(function() {
                                        a("body").on("touchstart." + d.namespace, function() {
                                            d.hide()
                                        })
                                    }, 0), d.options.interactive) {
                                    j && d.$tooltip.on("touchstart." + d.namespace, function(a) {
                                        a.stopPropagation()
                                    });
                                    var n = null;
                                    d.$elProxy.add(d.$tooltip).on("mouseleave." + d.namespace + "-autoClose", function() {
                                        clearTimeout(n), n = setTimeout(function() {
                                            d.hide()
                                        }, d.options.interactiveTolerance)
                                    }).on("mouseenter." + d.namespace + "-autoClose", function() {
                                        clearTimeout(n)
                                    })
                                } else d.$elProxy.on("mouseleave." + d.namespace + "-autoClose", function() {
                                    d.hide()
                                });
                                d.options.hideOnClick && d.$elProxy.on("click." + d.namespace + "-autoClose", function() {
                                    d.hide()
                                })
                            } else "click" == d.options.trigger && (setTimeout(function() {
                                a("body").on("click." + d.namespace + " touchstart." + d.namespace, function() {
                                    d.hide()
                                })
                            }, 0), d.options.interactive && d.$tooltip.on("click." + d.namespace + " touchstart." + d.namespace, function(a) {
                                a.stopPropagation()
                            }))
                    }
                    d.options.timer > 0 && (d.timerHide = setTimeout(function() {
                        d.timerHide = null, d.hide()
                    }, d.options.timer + f))
                }
            })
        },
        _interval_set: function() {
            var b = this;
            b.checkInterval = setInterval(function() {
                if (0 === a("body").find(b.$el).length || 0 === a("body").find(b.$elProxy).length || "hidden" == b.Status || 0 === a("body").find(b.$tooltip).length)("shown" == b.Status || "appearing" == b.Status) && b.hide(), b._interval_cancel();
                else if (b.options.positionTracker) {
                    var c = b._repositionInfo(b.$elProxy),
                        d = !1;
                    e(c.dimension, b.elProxyPosition.dimension) && ("fixed" === b.$elProxy.css("position") ? e(c.position, b.elProxyPosition.position) && (d = !0) : e(c.offset, b.elProxyPosition.offset) && (d = !0)), d || (b.reposition(), b.options.positionTrackerCallback.call(b, b.$el))
                }
            }, 200)
        },
        _interval_cancel: function() {
            clearInterval(this.checkInterval), this.checkInterval = null
        },
        _content_set: function(a) {
            "object" == typeof a && null !== a && this.options.contentCloning && (a = a.clone(!0)), this.Content = a
        },
        _content_insert: function() {
            var a = this,
                b = this.$tooltip.find(".tooltipster-content");
            "string" != typeof a.Content || a.options.contentAsHTML ? b.empty().append(a.Content) : b.text(a.Content)
        },
        _update: function(a) {
            var b = this;
            b._content_set(a), null !== b.Content ? "hidden" !== b.Status && (b._content_insert(), b.reposition(), b.options.updateAnimation && (g() ? (b.$tooltip.css({
                width: "",
                "-webkit-transition": "all " + b.options.speed + "ms, width 0ms, height 0ms, left 0ms, top 0ms",
                "-moz-transition": "all " + b.options.speed + "ms, width 0ms, height 0ms, left 0ms, top 0ms",
                "-o-transition": "all " + b.options.speed + "ms, width 0ms, height 0ms, left 0ms, top 0ms",
                "-ms-transition": "all " + b.options.speed + "ms, width 0ms, height 0ms, left 0ms, top 0ms",
                transition: "all " + b.options.speed + "ms, width 0ms, height 0ms, left 0ms, top 0ms"
            }).addClass("tooltipster-content-changing"), setTimeout(function() {
                "hidden" != b.Status && (b.$tooltip.removeClass("tooltipster-content-changing"), setTimeout(function() {
                    "hidden" !== b.Status && b.$tooltip.css({
                        "-webkit-transition": b.options.speed + "ms",
                        "-moz-transition": b.options.speed + "ms",
                        "-o-transition": b.options.speed + "ms",
                        "-ms-transition": b.options.speed + "ms",
                        transition: b.options.speed + "ms"
                    })
                }, b.options.speed))
            }, b.options.speed)) : b.$tooltip.fadeTo(b.options.speed, .5, function() {
                "hidden" != b.Status && b.$tooltip.fadeTo(b.options.speed, 1)
            }))) : b.hide()
        },
        _repositionInfo: function(a) {
            return {
                dimension: {
                    height: a.outerHeight(!1),
                    width: a.outerWidth(!1)
                },
                offset: a.offset(),
                position: {
                    left: parseInt(a.css("left")),
                    top: parseInt(a.css("top"))
                }
            }
        },
        hide: function(c) {
            var d = this;
            c && d.callbacks.hide.push(c), d.callbacks.show = [], clearTimeout(d.timerShow), d.timerShow = null, clearTimeout(d.timerHide), d.timerHide = null;
            var e = function() {
                a.each(d.callbacks.hide, function(a, b) {
                    b.call(d.$el)
                }), d.callbacks.hide = []
            };
            if ("shown" == d.Status || "appearing" == d.Status) {
                d.Status = "disappearing";
                var f = function() {
                    d.Status = "hidden", "object" == typeof d.Content && null !== d.Content && d.Content.detach(), d.$tooltip.remove(), d.$tooltip = null, a(b).off("." + d.namespace), a("body").off("." + d.namespace).css("overflow-x", d.bodyOverflowX), a("body").off("." + d.namespace), d.$elProxy.off("." + d.namespace + "-autoClose"), d.options.functionAfter.call(d.$el, d.$el), e()
                };
                g() ? (d.$tooltip.clearQueue().removeClass("tooltipster-" + d.options.animation + "-show").addClass("tooltipster-dying"), d.options.speed > 0 && d.$tooltip.delay(d.options.speed), d.$tooltip.queue(f)) : d.$tooltip.stop().fadeOut(d.options.speed, f)
            } else "hidden" == d.Status && e();
            return d
        },
        show: function(a) {
            return this._showNow(a), this
        },
        update: function(a) {
            return this.content(a)
        },
        content: function(a) {
            return "undefined" == typeof a ? this.Content : (this._update(a), this)
        },
        reposition: function() {
            function c() {
                var c = a(b).scrollLeft();
                0 > C - c && (f = C - c, C = c), C + i - c > g && (f = C - (g + c - i), C = g + c - i)
            }

            function d(c, d) {
                h.offset.top - a(b).scrollTop() - j - F - 12 < 0 && d.indexOf("top") > -1 && (H = c), h.offset.top + h.dimension.height + j + 12 + F > a(b).scrollTop() + a(b).height() && d.indexOf("bottom") > -1 && (H = c, E = h.offset.top - j - F - 12)
            }
            var e = this;
            if (0 !== a("body").find(e.$tooltip).length) {
                e.$tooltip.css("width", ""), e.elProxyPosition = e._repositionInfo(e.$elProxy);
                var f = null,
                    g = a(b).width(),
                    h = e.elProxyPosition,
                    i = e.$tooltip.outerWidth(!1),
                    j = (e.$tooltip.innerWidth() + 1, e.$tooltip.outerHeight(!1));
                if (e.$elProxy.is("area")) {
                    var k = e.$elProxy.attr("shape"),
                        l = e.$elProxy.parent().attr("name"),
                        m = a('img[usemap="#' + l + '"]'),
                        n = m.offset().left,
                        o = m.offset().top,
                        p = void 0 !== e.$elProxy.attr("coords") ? e.$elProxy.attr("coords").split(",") : void 0;
                    if ("circle" == k) {
                        var q = parseInt(p[0]),
                            r = parseInt(p[1]),
                            s = parseInt(p[2]);
                        h.dimension.height = 2 * s, h.dimension.width = 2 * s, h.offset.top = o + r - s, h.offset.left = n + q - s
                    } else if ("rect" == k) {
                        var q = parseInt(p[0]),
                            r = parseInt(p[1]),
                            t = parseInt(p[2]),
                            u = parseInt(p[3]);
                        h.dimension.height = u - r, h.dimension.width = t - q, h.offset.top = o + r, h.offset.left = n + q
                    } else if ("poly" == k) {
                        for (var v = 0, w = 0, x = 0, y = 0, z = "even", A = 0; A < p.length; A++) {
                            var B = parseInt(p[A]);
                            "even" == z ? (B > x && (x = B, 0 === A && (v = x)), v > B && (v = B), z = "odd") : (B > y && (y = B, 1 == A && (w = y)), w > B && (w = B), z = "even")
                        }
                        h.dimension.height = y - w, h.dimension.width = x - v, h.offset.top = o + w, h.offset.left = n + v
                    } else h.dimension.height = m.outerHeight(!1), h.dimension.width = m.outerWidth(!1), h.offset.top = o, h.offset.left = n
                }
                var C = 0,
                    D = 0,
                    E = 0,
                    F = parseInt(e.options.offsetY),
                    G = parseInt(e.options.offsetX),
                    H = e.options.position;
                if ("top" == H) {
                    var I = h.offset.left + i - (h.offset.left + h.dimension.width);
                    C = h.offset.left + G - I / 2, E = h.offset.top - j - F - 12, c(), d("bottom", "top")
                }
                if ("top-left" == H && (C = h.offset.left + G, E = h.offset.top - j - F - 12, c(), d("bottom-left", "top-left")), "top-right" == H && (C = h.offset.left + h.dimension.width + G - i, E = h.offset.top - j - F - 12, c(), d("bottom-right", "top-right")), "bottom" == H) {
                    var I = h.offset.left + i - (h.offset.left + h.dimension.width);
                    C = h.offset.left - I / 2 + G, E = h.offset.top + h.dimension.height + F + 12, c(), d("top", "bottom")
                }
                if ("bottom-left" == H && (C = h.offset.left + G, E = h.offset.top + h.dimension.height + F + 12, c(), d("top-left", "bottom-left")), "bottom-right" == H && (C = h.offset.left + h.dimension.width + G - i, E = h.offset.top + h.dimension.height + F + 12, c(), d("top-right", "bottom-right")), "left" == H) {
                    C = h.offset.left - G - i - 12, D = h.offset.left + G + h.dimension.width + 12;
                    var J = h.offset.top + j - (h.offset.top + h.dimension.height);
                    if (E = h.offset.top - J / 2 - F, 0 > C && D + i > g) {
                        var K = 2 * parseFloat(e.$tooltip.css("border-width")),
                            L = i + C - K;
                        e.$tooltip.css("width", L + "px"), j = e.$tooltip.outerHeight(!1), C = h.offset.left - G - L - 12 - K, J = h.offset.top + j - (h.offset.top + h.dimension.height), E = h.offset.top - J / 2 - F
                    } else 0 > C && (C = h.offset.left + G + h.dimension.width + 12, f = "left")
                }
                if ("right" == H) {
                    C = h.offset.left + G + h.dimension.width + 12, D = h.offset.left - G - i - 12;
                    var J = h.offset.top + j - (h.offset.top + h.dimension.height);
                    if (E = h.offset.top - J / 2 - F, C + i > g && 0 > D) {
                        var K = 2 * parseFloat(e.$tooltip.css("border-width")),
                            L = g - C - K;
                        e.$tooltip.css("width", L + "px"), j = e.$tooltip.outerHeight(!1), J = h.offset.top + j - (h.offset.top + h.dimension.height), E = h.offset.top - J / 2 - F
                    } else C + i > g && (C = h.offset.left - G - i - 12, f = "right")
                }
                if (e.options.arrow) {
                    var M = "tooltipster-arrow-" + H;
                    if (e.options.arrowColor.length < 1) var N = e.$tooltip.css("background-color");
                    else var N = e.options.arrowColor;
                    if (f ? "left" == f ? (M = "tooltipster-arrow-right", f = "") : "right" == f ? (M = "tooltipster-arrow-left", f = "") : f = "left:" + Math.round(f) + "px;" : f = "", "top" == H || "top-left" == H || "top-right" == H) var O = parseFloat(e.$tooltip.css("border-bottom-width")),
                        P = e.$tooltip.css("border-bottom-color");
                    else if ("bottom" == H || "bottom-left" == H || "bottom-right" == H) var O = parseFloat(e.$tooltip.css("border-top-width")),
                        P = e.$tooltip.css("border-top-color");
                    else if ("left" == H) var O = parseFloat(e.$tooltip.css("border-right-width")),
                        P = e.$tooltip.css("border-right-color");
                    else if ("right" == H) var O = parseFloat(e.$tooltip.css("border-left-width")),
                        P = e.$tooltip.css("border-left-color");
                    else var O = parseFloat(e.$tooltip.css("border-bottom-width")),
                            P = e.$tooltip.css("border-bottom-color");
                    O > 1 && O++;
                    var Q = "";
                    if (0 !== O) {
                        var R = "",
                            S = "border-color: " + P + ";"; - 1 !== M.indexOf("bottom") ? R = "margin-top: -" + Math.round(O) + "px;" : -1 !== M.indexOf("top") ? R = "margin-bottom: -" + Math.round(O) + "px;" : -1 !== M.indexOf("left") ? R = "margin-right: -" + Math.round(O) + "px;" : -1 !== M.indexOf("right") && (R = "margin-left: -" + Math.round(O) + "px;"), Q = '<span class="tooltipster-arrow-border" style="' + R + " " + S + ';"></span>'
                    }
                    e.$tooltip.find(".tooltipster-arrow").remove();
                    var T = '<div class="' + M + ' tooltipster-arrow" style="' + f + '">' + Q + '<span style="border-color:' + N + ';"></span></div>';
                    e.$tooltip.append(T)
                }
                e.$tooltip.css({
                    top: Math.round(E) + "px",
                    left: Math.round(C) + "px"
                })
            }
            return e
        },
        enable: function() {
            return this.enabled = !0, this
        },
        disable: function() {
            return this.hide(), this.enabled = !1, this
        },
        destroy: function() {
            var b = this;
            b.hide(), b.$el[0] !== b.$elProxy[0] && b.$elProxy.remove(), b.$el.removeData(b.namespace).off("." + b.namespace);
            var c = b.$el.data("tooltipster-ns");
            if (1 === c.length) {
                var d = null;
                "previous" === b.options.restoration ? d = b.$el.data("tooltipster-initialTitle") : "current" === b.options.restoration && (d = "string" == typeof b.Content ? b.Content : a("<div></div>").append(b.Content).html()), d && b.$el.attr("title", d), b.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")
            } else c = a.grep(c, function(a) {
                return a !== b.namespace
            }), b.$el.data("tooltipster-ns", c);
            return b
        },
        elementIcon: function() {
            return this.$el[0] !== this.$elProxy[0] ? this.$elProxy[0] : void 0
        },
        elementTooltip: function() {
            return this.$tooltip ? this.$tooltip[0] : void 0
        },
        option: function(a, b) {
            return "undefined" == typeof b ? this.options[a] : (this.options[a] = b, this)
        },
        status: function() {
            return this.Status
        }
    }, a.fn[h] = function() {
        var b = arguments;
        if (0 === this.length) {
            if ("string" == typeof b[0]) {
                var c = !0;
                switch (b[0]) {
                    case "setDefaults":
                        a.extend(i, b[1]);
                        break;
                    default:
                        c = !1
                }
                return c ? !0 : this
            }
            return this
        }
        if ("string" == typeof b[0]) {
            var e = "#*$~&";
            return this.each(function() {
                var c = a(this).data("tooltipster-ns"),
                    d = c ? a(this).data(c[0]) : null;
                if (!d) throw new Error("You called Tooltipster's \"" + b[0] + '" method on an uninitialized element');
                if ("function" != typeof d[b[0]]) throw new Error('Unknown method .tooltipster("' + b[0] + '")');
                var f = d[b[0]](b[1], b[2]);
                return f !== d ? (e = f, !1) : void 0
            }), "#*$~&" !== e ? e : this
        }
        var f = [],
            g = b[0] && "undefined" != typeof b[0].multiple,
            h = g && b[0].multiple || !g && i.multiple,
            j = b[0] && "undefined" != typeof b[0].debug,
            k = j && b[0].debug || !j && i.debug;
        return this.each(function() {
            var c = !1,
                e = a(this).data("tooltipster-ns"),
                g = null;
            e ? h ? c = !0 : k && console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.') : c = !0, c && (g = new d(this, b[0]), e || (e = []), e.push(g.namespace), a(this).data("tooltipster-ns", e), a(this).data(g.namespace, g)), f.push(g)
        }), h ? f : this
    };
    var j = !!("ontouchstart" in b),
        k = !1;
    a("body").one("mousemove", function() {
        k = !0
    })
}(jQuery, window, document);
var jsPDF = function() {
    function a(d, e, f, g) {
        d = "undefined" == typeof d ? "p" : d.toString().toLowerCase(), "undefined" == typeof e && (e = "mm"), "undefined" == typeof f && (f = "a4"), "undefined" == typeof g && "undefined" == typeof zpipe && (g = !1);
        var h = f.toString().toLowerCase(),
            i = [],
            j = 0,
            k = g;
        g = {
            a0: [2383.94, 3370.39],
            a1: [1683.78, 2383.94],
            a2: [1190.55, 1683.78],
            a3: [841.89, 1190.55],
            a4: [595.28, 841.89],
            a5: [419.53, 595.28],
            a6: [297.64, 419.53],
            a7: [209.76, 297.64],
            a8: [147.4, 209.76],
            a9: [104.88, 147.4],
            a10: [73.7, 104.88],
            b0: [2834.65, 4008.19],
            b1: [2004.09, 2834.65],
            b2: [1417.32, 2004.09],
            b3: [1000.63, 1417.32],
            b4: [708.66, 1000.63],
            b5: [498.9, 708.66],
            b6: [354.33, 498.9],
            b7: [249.45, 354.33],
            b8: [175.75, 249.45],
            b9: [124.72, 175.75],
            b10: [87.87, 124.72],
            c0: [2599.37, 3676.54],
            c1: [1836.85, 2599.37],
            c2: [1298.27, 1836.85],
            c3: [918.43, 1298.27],
            c4: [649.13, 918.43],
            c5: [459.21, 649.13],
            c6: [323.15, 459.21],
            c7: [229.61, 323.15],
            c8: [161.57, 229.61],
            c9: [113.39, 161.57],
            c10: [79.37, 113.39],
            letter: [612, 792],
            "government-letter": [576, 756],
            legal: [612, 1008],
            "junior-legal": [576, 360],
            ledger: [1224, 792],
            tabloid: [792, 1224]
        };
        var l, m, n, o, p, q, r, s, t = "0 g",
            u = 0,
            v = [],
            w = 2,
            x = !1,
            y = [],
            z = {},
            A = {},
            B = 16,
            C = {
                title: "",
                subject: "",
                author: "",
                keywords: "",
                creator: ""
            },
            D = 0,
            E = 0,
            F = {},
            G = new c(F),
            H = function(a) {
                return a.toFixed(2)
            },
            I = function(a) {
                var b = a.toFixed(0);
                return 10 > a ? "0" + b : b
            },
            J = function(a) {
                x ? v[u].push(a) : (i.push(a), j += a.length + 1)
            },
            K = function() {
                return w++, y[w] = j, J(w + " 0 obj"), w
            },
            L = function(a) {
                J("stream"), J(a), J("endstream")
            },
            M = function(a, b) {
                var c;
                c = a;
                var d, e, f, g, h, i, j = b;
                if (void 0 === j && (j = {}), d = j.sourceEncoding ? d : "Unicode", f = j.outputEncoding, (j.autoencode || f) && z[l].metadata && z[l].metadata[d] && z[l].metadata[d].encoding && (d = z[l].metadata[d].encoding, !f && z[l].encoding && (f = z[l].encoding), !f && d.codePages && (f = d.codePages[0]), "string" == typeof f && (f = d[f]), f)) {
                    for (h = !1, g = [], d = 0, e = c.length; e > d; d++) g.push((i = f[c.charCodeAt(d)]) ? String.fromCharCode(i) : c[d]), g[d].charCodeAt(0) >> 8 && (h = !0);
                    c = g.join("")
                }
                for (d = c.length; void 0 === h && 0 !== d;) c.charCodeAt(d - 1) >> 8 && (h = !0), d--;
                if (h) {
                    for (g = j.noBOM ? [] : [254, 255], d = 0, e = c.length; e > d; d++) {
                        if (i = c.charCodeAt(d), j = i >> 8, j >> 8) throw Error("Character at position " + d.toString(10) + " of string '" + c + "' exceeds 16bits. Cannot be encoded into UCS-2 BE");
                        g.push(j), g.push(i - (j << 8))
                    }
                    c = String.fromCharCode.apply(void 0, g)
                }
                return c.replace(/\\/g, "\\\\").replace(/\(/g, "\\(").replace(/\)/g, "\\)")
            },
            N = function() {
                u++, x = !0, v[u] = [], J(H(.200025 * o) + " w"), J("0 G"), 0 !== D && J(D.toString(10) + " J"), 0 !== E && J(E.toString(10) + " j"), G.publish("addPage", {
                    pageNumber: u
                })
            },
            O = function(a, b) {
                var c;
                void 0 === a && (a = z[l].fontName), void 0 === b && (b = z[l].fontStyle);
                try {
                    c = A[a][b]
                } catch (d) {
                    c = void 0
                }
                if (!c) throw Error("Unable to look up font label for font '" + a + "', '" + b + "'. Refer to getFontList() for available fonts.");
                return c
            },
            P = function() {
                x = !1, i = [], y = [], J("%PDF-1.3"), q = n * o, r = m * o;
                var a, b, c, d, e;
                for (a = 1; u >= a; a++) {
                    if (K(), J("<</Type /Page"), J("/Parent 1 0 R"), J("/Resources 2 0 R"), J("/Contents " + (w + 1) + " 0 R>>"), J("endobj"), b = v[a].join("\n"), K(), k) {
                        for (c = [], d = 0; d < b.length; ++d) c[d] = b.charCodeAt(d);
                        e = adler32cs.from(b), b = new Deflater(6), b.append(new Uint8Array(c)), b = b.flush(), c = [new Uint8Array([120, 156]), new Uint8Array(b), new Uint8Array([255 & e, e >> 8 & 255, e >> 16 & 255, e >> 24 & 255])], b = "";
                        for (d in c) c.hasOwnProperty(d) && (b += String.fromCharCode.apply(null, c[d]));
                        J("<</Length " + b.length + " /Filter [/FlateDecode]>>")
                    } else J("<</Length " + b.length + ">>");
                    L(b), J("endobj")
                }
                for (y[1] = j, J("1 0 obj"), J("<</Type /Pages"), s = "/Kids [", d = 0; u > d; d++) s += 3 + 2 * d + " 0 R ";
                J(s + "]"), J("/Count " + u), J("/MediaBox [0 0 " + H(q) + " " + H(r) + "]"), J(">>"), J("endobj");
                for (var f in z) z.hasOwnProperty(f) && (a = z[f], a.objectNumber = K(), J("<</BaseFont/" + a.PostScriptName + "/Type/Font"), "string" == typeof a.encoding && J("/Encoding/" + a.encoding), J("/Subtype/Type1>>"), J("endobj"));
                G.publish("putResources"), y[2] = j, J("2 0 obj"), J("<<"), J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"), J("/Font <<");
                for (var g in z) z.hasOwnProperty(g) && J("/" + g + " " + z[g].objectNumber + " 0 R");
                for (J(">>"), J("/XObject <<"), G.publish("putXobjectDict"), J(">>"), J(">>"), J("endobj"), G.publish("postPutResources"), K(), J("<<"), J("/Producer (jsPDF 0.9.0rc2)"), C.title && J("/Title (" + M(C.title) + ")"), C.subject && J("/Subject (" + M(C.subject) + ")"), C.author && J("/Author (" + M(C.author) + ")"), C.keywords && J("/Keywords (" + M(C.keywords) + ")"), C.creator && J("/Creator (" + M(C.creator) + ")"), f = new Date, J("/CreationDate (D:" + [f.getFullYear(), I(f.getMonth() + 1), I(f.getDate()), I(f.getHours()), I(f.getMinutes()), I(f.getSeconds())].join("") + ")"), J(">>"), J("endobj"), K(), J("<<"), J("/Type /Catalog"), J("/Pages 1 0 R"), J("/OpenAction [3 0 R /FitH null]"), J("/PageLayout /OneColumn"), G.publish("putCatalog"), J(">>"), J("endobj"), f = j, J("xref"), J("0 " + (w + 1)), J("0000000000 65535 f "), g = 1; w >= g; g++) a = y[g].toFixed(0), a = 10 > a.length ? Array(11 - a.length).join("0") + a : a, J(a + " 00000 n ");
                return J("trailer"), J("<<"), J("/Size " + (w + 1)), J("/Root " + w + " 0 R"), J("/Info " + (w - 1) + " 0 R"), J(">>"), J("startxref"), J(f), J("%%EOF"), x = !0, i.join("\n")
            },
            Q = function(a) {
                var b = "S";
                return "F" === a ? b = "f" : ("FD" === a || "DF" === a) && (b = "B"), b
            },
            R = function(a, b) {
                var c, d, e, f;
                switch (a) {
                    case void 0:
                        return P();
                    case "save":
                        if (navigator.getUserMedia && (void 0 === window.URL || void 0 === window.URL.createObjectURL)) return F.output("dataurlnewwindow");
                        for (c = P(), d = c.length, e = new Uint8Array(new ArrayBuffer(d)), f = 0; d > f; f++) e[f] = c.charCodeAt(f);
                        c = new Blob([e], {
                            type: "application/pdf"
                        }), saveAs(c, b);
                        break;
                    case "datauristring":
                    case "dataurlstring":
                        return "data:application/pdf;base64," + btoa(P());
                    case "datauri":
                    case "dataurl":
                        document.location.href = "data:application/pdf;base64," + btoa(P());
                        break;
                    case "dataurlnewwindow":
                        window.open("data:application/pdf;base64," + btoa(P()));
                        break;
                    default:
                        throw Error('Output type "' + a + '" is not supported.')
                }
            };
        if ("pt" === e) o = 1;
        else if ("mm" === e) o = 72 / 25.4;
        else if ("cm" === e) o = 72 / 2.54;
        else {
            if ("in" !== e) throw "Invalid unit: " + e;
            o = 72
        }
        if (g.hasOwnProperty(h)) m = g[h][1] / o, n = g[h][0] / o;
        else try {
            m = f[1], n = f[0]
        } catch (S) {
            throw "Invalid format: " + f
        }
        if ("p" === d || "portrait" === d) d = "p", n > m && (d = n, n = m, m = d);
        else {
            if ("l" !== d && "landscape" !== d) throw "Invalid orientation: " + d;
            d = "l", m > n && (d = n, n = m, m = d)
        }
        F.internal = {
            pdfEscape: M,
            getStyle: Q,
            getFont: function() {
                return z[O.apply(F, arguments)]
            },
            getFontSize: function() {
                return B
            },
            getLineHeight: function() {
                return 1.15 * B
            },
            btoa: btoa,
            write: function(a) {
                J(1 === arguments.length ? a : Array.prototype.join.call(arguments, " "))
            },
            getCoordinateString: function(a) {
                return H(a * o)
            },
            getVerticalCoordinateString: function(a) {
                return H((m - a) * o)
            },
            collections: {},
            newObject: K,
            putStream: L,
            events: G,
            scaleFactor: o,
            pageSize: {
                width: n,
                height: m
            },
            output: function(a, b) {
                return R(a, b)
            },
            getNumberOfPages: function() {
                return v.length - 1
            },
            pages: v
        }, F.addPage = function() {
            return N(), this
        }, F.text = function(a, b, c, d) {
            var e, f;
            if ("number" == typeof a && (e = a, f = b, a = c, b = e, c = f), "string" == typeof a && a.match(/[\n\r]/) && (a = a.split(/\r\n|\r|\n/g)), "undefined" == typeof d ? d = {
                    noBOM: !0,
                    autoencode: !0
                } : (void 0 === d.noBOM && (d.noBOM = !0), void 0 === d.autoencode && (d.autoencode = !0)), "string" == typeof a) d = M(a, d);
            else {
                if (!(a instanceof Array)) throw Error('Type of text must be string or Array. "' + a + '" is not recognized.');
                for (a = a.concat(), e = a.length - 1; - 1 !== e; e--) a[e] = M(a[e], d);
                d = a.join(") Tj\nT* (")
            }
            return J("BT\n/" + l + " " + B + " Tf\n" + 1.15 * B + " TL\n" + t + "\n" + H(b * o) + " " + H((m - c) * o) + " Td\n(" + d + ") Tj\nET"), this
        }, F.line = function(a, b, c, d) {
            return J(H(a * o) + " " + H((m - b) * o) + " m " + H(c * o) + " " + H((m - d) * o) + " l S"), this
        }, F.lines = function(a, b, c, d, e, f) {
            var g, h, i, j, k, l, n, p;
            for ("number" == typeof a && (g = a, h = b, a = c, b = g, c = h), e = Q(e), d = void 0 === d ? [1, 1] : d, J((b * o).toFixed(3) + " " + ((m - c) * o).toFixed(3) + " m "), g = d[0], d = d[1], h = a.length, p = c, c = 0; h > c; c++) i = a[c], 2 === i.length ? (b = i[0] * g + b, p = i[1] * d + p, J((b * o).toFixed(3) + " " + ((m - p) * o).toFixed(3) + " l")) : (j = i[0] * g + b, k = i[1] * d + p, l = i[2] * g + b, n = i[3] * d + p, b = i[4] * g + b, p = i[5] * d + p, J((j * o).toFixed(3) + " " + ((m - k) * o).toFixed(3) + " " + (l * o).toFixed(3) + " " + ((m - n) * o).toFixed(3) + " " + (b * o).toFixed(3) + " " + ((m - p) * o).toFixed(3) + " c"));
            return 1 == f && J(" h"), J(e), this
        }, F.rect = function(a, b, c, d, e) {
            return e = Q(e), J([H(a * o), H((m - b) * o), H(c * o), H(-d * o), "re", e].join(" ")), this
        }, F.triangle = function(a, b, c, d, e, f, g) {
            return this.lines([
                [c - a, d - b],
                [e - c, f - d],
                [a - e, b - f]
            ], a, b, [1, 1], g, !0), this
        }, F.roundedRect = function(a, b, c, d, e, f, g) {
            var h = 4 / 3 * (Math.SQRT2 - 1);
            return this.lines([
                [c - 2 * e, 0],
                [e * h, 0, e, f - f * h, e, f],
                [0, d - 2 * f],
                [0, f * h, -(e * h), f, -e, f],
                [-c + 2 * e, 0],
                [-(e * h), 0, -e, -(f * h), -e, -f],
                [0, -d + 2 * f],
                [0, -(f * h), e * h, -f, e, -f]
            ], a + e, b, [1, 1], g), this
        }, F.ellipse = function(a, b, c, d, e) {
            e = Q(e);
            var f = 4 / 3 * (Math.SQRT2 - 1) * c,
                g = 4 / 3 * (Math.SQRT2 - 1) * d;
            return J([H((a + c) * o), H((m - b) * o), "m", H((a + c) * o), H((m - (b - g)) * o), H((a + f) * o), H((m - (b - d)) * o), H(a * o), H((m - (b - d)) * o), "c"].join(" ")), J([H((a - f) * o), H((m - (b - d)) * o), H((a - c) * o), H((m - (b - g)) * o), H((a - c) * o), H((m - b) * o), "c"].join(" ")), J([H((a - c) * o), H((m - (b + g)) * o), H((a - f) * o), H((m - (b + d)) * o), H(a * o), H((m - (b + d)) * o), "c"].join(" ")), J([H((a + f) * o), H((m - (b + d)) * o), H((a + c) * o), H((m - (b + g)) * o), H((a + c) * o), H((m - b) * o), "c", e].join(" ")), this
        }, F.circle = function(a, b, c, d) {
            return this.ellipse(a, b, c, c, d)
        }, F.setProperties = function(a) {
            for (var b in C) C.hasOwnProperty(b) && a[b] && (C[b] = a[b]);
            return this
        }, F.setFontSize = function(a) {
            return B = a, this
        }, F.setFont = function(a, b) {
            return l = O(a, b), this
        }, F.setFontStyle = F.setFontType = function(a) {
            return l = O(void 0, a), this
        }, F.getFontList = function() {
            var a, b, c, d = {};
            for (a in A)
                if (A.hasOwnProperty(a))
                    for (b in d[a] = c = [], A[a]) A[a].hasOwnProperty(b) && c.push(b);
            return d
        }, F.setLineWidth = function(a) {
            return J((a * o).toFixed(2) + " w"), this
        }, F.setDrawColor = function(a, b, c, d) {
            return a = void 0 === b || void 0 === d && a === b === c ? "string" == typeof a ? a + " G" : H(a / 255) + " G" : void 0 === d ? "string" == typeof a ? [a, b, c, "RG"].join(" ") : [H(a / 255), H(b / 255), H(c / 255), "RG"].join(" ") : "string" == typeof a ? [a, b, c, d, "K"].join(" ") : [H(a), H(b), H(c), H(d), "K"].join(" "), J(a), this
        }, F.setFillColor = function(a, b, c, d) {
            return a = void 0 === b || void 0 === d && a === b === c ? "string" == typeof a ? a + " g" : H(a / 255) + " g" : void 0 === d ? "string" == typeof a ? [a, b, c, "rg"].join(" ") : [H(a / 255), H(b / 255), H(c / 255), "rg"].join(" ") : "string" == typeof a ? [a, b, c, d, "k"].join(" ") : [H(a), H(b), H(c), H(d), "k"].join(" "), J(a), this
        }, F.setTextColor = function(a, b, c) {
            return t = 0 === a && 0 === b && 0 === c || "undefined" == typeof b ? (a / 255).toFixed(3) + " g" : [(a / 255).toFixed(3), (b / 255).toFixed(3), (c / 255).toFixed(3), "rg"].join(" "), this
        }, F.CapJoinStyles = {
            0: 0,
            butt: 0,
            but: 0,
            miter: 0,
            1: 1,
            round: 1,
            rounded: 1,
            circle: 1,
            2: 2,
            projecting: 2,
            project: 2,
            square: 2,
            bevel: 2
        }, F.setLineCap = function(a) {
            var b = this.CapJoinStyles[a];
            if (void 0 === b) throw Error("Line cap style of '" + a + "' is not recognized. See or extend .CapJoinStyles property for valid styles");
            return D = b, J(b.toString(10) + " J"), this
        }, F.setLineJoin = function(a) {
            var b = this.CapJoinStyles[a];
            if (void 0 === b) throw Error("Line join style of '" + a + "' is not recognized. See or extend .CapJoinStyles property for valid styles");
            return E = b, J(b.toString(10) + " j"), this
        }, F.output = R, F.save = function(a) {
            F.output("save", a)
        };
        for (p in a.API) a.API.hasOwnProperty(p) && ("events" === p && a.API.events.length ? function(a, b) {
            var c, d, e;
            for (e = b.length - 1; - 1 !== e; e--) c = b[e][0], d = b[e][1], a.subscribe.apply(a, [c].concat("function" == typeof d ? [d] : d))
        }(G, a.API.events) : F[p] = a.API[p]);
        return function() {
            var a, c, d, e, f = [
                ["Helvetica", "helvetica", "normal"],
                ["Helvetica-Bold", "helvetica", "bold"],
                ["Helvetica-Oblique", "helvetica", "italic"],
                ["Helvetica-BoldOblique", "helvetica", "bolditalic"],
                ["Courier", "courier", "normal"],
                ["Courier-Bold", "courier", "bold"],
                ["Courier-Oblique", "courier", "italic"],
                ["Courier-BoldOblique", "courier", "bolditalic"],
                ["Times-Roman", "times", "normal"],
                ["Times-Bold", "times", "bold"],
                ["Times-Italic", "times", "italic"],
                ["Times-BoldItalic", "times", "bolditalic"]
            ];
            for (a = 0, c = f.length; c > a; a++) {
                var g = f[a][0],
                    h = f[a][1];
                d = f[a][2], e = "F" + (b(z) + 1).toString(10);
                var g = z[e] = {
                        id: e,
                        PostScriptName: g,
                        fontName: h,
                        fontStyle: d,
                        encoding: "StandardEncoding",
                        metadata: {}
                    },
                    i = e;
                void 0 === A[h] && (A[h] = {}), A[h][d] = i, G.publish("addFont", g), d = e, e = f[a][0].split("-"), g = e[0], e = e[1] || "", void 0 === A[g] && (A[g] = {}), A[g][e] = d
            }
            G.publish("addFonts", {
                fonts: z,
                dictionary: A
            })
        }(), l = "F1", N(), G.publish("initialized"), F
    }
    "undefined" == typeof btoa && (window.btoa = function(a) {
        var b, c, d, e, f = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),
            g = 0,
            h = 0,
            i = "",
            i = [];
        do b = a.charCodeAt(g++), c = a.charCodeAt(g++), d = a.charCodeAt(g++), e = b << 16 | c << 8 | d, b = e >> 18 & 63, c = e >> 12 & 63, d = e >> 6 & 63, e &= 63, i[h++] = f[b] + f[c] + f[d] + f[e]; while (g < a.length);
        return i = i.join(""), a = a.length % 3, (a ? i.slice(0, a - 3) : i) + "===".slice(a || 3)
    }), "undefined" == typeof atob && (window.atob = function(a) {
        var b, c, d, e, f, g = 0,
            h = 0;
        e = "";
        var i = [];
        if (!a) return a;
        a += "";
        do b = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)), c = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)), e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)), f = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(g++)), d = b << 18 | c << 12 | e << 6 | f, b = d >> 16 & 255, c = d >> 8 & 255, d &= 255, i[h++] = 64 === e ? String.fromCharCode(b) : 64 === f ? String.fromCharCode(b, c) : String.fromCharCode(b, c, d); while (g < a.length);
        return e = i.join("")
    });
    var b = "function" == typeof Object.keys ? function(a) {
            return Object.keys(a).length
        } : function(a) {
            var b, c = 0;
            for (b in a) a.hasOwnProperty(b) && c++;
            return c
        },
        c = function(a) {
            this.topics = {}, this.context = a, this.publish = function(a, b) {
                if (this.topics[a]) {
                    var c, d, e, f, g = this.topics[a],
                        h = [],
                        i = function() {};
                    for (b = Array.prototype.slice.call(arguments, 1), d = 0, e = g.length; e > d; d++) f = g[d], c = f[0], f[1] && (f[0] = i, h.push(d)), c.apply(this.context, b);
                    for (d = 0, e = h.length; e > d; d++) g.splice(h[d], 1)
                }
            }, this.subscribe = function(a, b, c) {
                return this.topics[a] ? this.topics[a].push([b, c]) : this.topics[a] = [
                    [b, c]
                ], {
                    topic: a,
                    callback: b
                }
            }, this.unsubscribe = function(a) {
                if (this.topics[a.topic]) {
                    var b, c, d = this.topics[a.topic];
                    for (b = 0, c = d.length; c > b; b++) d[b][0] === a.callback && d.splice(b, 1)
                }
            }
        };
    return a.API = {
        events: []
    }, a
}();
! function(a) {
    var b = function() {
            var a, b = this.internal.collections.addImage_images;
            for (a in b) {
                var c = b[a],
                    d = this.internal.newObject(),
                    e = this.internal.write,
                    f = this.internal.putStream;
                if (c.n = d, e("<</Type /XObject"), e("/Subtype /Image"), e("/Width " + c.w), e("/Height " + c.h), "Indexed" === c.cs ? e("/ColorSpace [/Indexed /DeviceRGB " + (c.pal.length / 3 - 1) + " " + (d + 1) + " 0 R]") : (e("/ColorSpace /" + c.cs), "DeviceCMYK" === c.cs && e("/Decode [1 0 1 0 1 0 1 0]")), e("/BitsPerComponent " + c.bpc), "f" in c && e("/Filter /" + c.f), "dp" in c && e("/DecodeParms <<" + c.dp + ">>"), "trns" in c && c.trns.constructor == Array)
                    for (var g = "", h = 0; h < c.trns.length; h++) g += c[g][h] + " " + c.trns[h] + " ", e("/Mask [" + g + "]");
                "smask" in c && e("/SMask " + (d + 1) + " 0 R"), e("/Length " + c.data.length + ">>"), f(c.data), e("endobj")
            }
        },
        c = function() {
            var a, b, c = this.internal.collections.addImage_images,
                d = this.internal.write;
            for (b in c) a = c[b], d("/I" + a.i, a.n, "0", "R")
        };
    a.addImage = function(a, d, e, f, g, h) {
        if ("object" == typeof a && 1 === a.nodeType) {
            d = document.createElement("canvas"), d.width = a.clientWidth, d.height = a.clientHeight;
            var i = d.getContext("2d");
            if (!i) throw "addImage requires canvas to be supported by browser.";
            i.drawImage(a, 0, 0, d.width, d.height), a = d.toDataURL("image/jpeg"), d = "JPEG"
        }
        if ("JPEG" !== d.toUpperCase()) throw Error("addImage currently only supports format 'JPEG', not '" + d + "'");
        var j;
        d = this.internal.collections.addImage_images;
        var i = this.internal.getCoordinateString,
            k = this.internal.getVerticalCoordinateString;
        if ("data:image/jpeg;base64," === a.substring(0, 23) && (a = atob(a.replace("data:image/jpeg;base64,", ""))), d)
            if (Object.keys) j = Object.keys(d).length;
            else {
                var l = d,
                    m = 0;
                for (j in l) l.hasOwnProperty(j) && m++;
                j = m
            } else j = 0, this.internal.collections.addImage_images = d = {}, this.internal.events.subscribe("putResources", b), this.internal.events.subscribe("putXobjectDict", c);
        a: {
            var n, l = a;
            if (255 === !l.charCodeAt(0) || 216 === !l.charCodeAt(1) || 255 === !l.charCodeAt(2) || 224 === !l.charCodeAt(3) || 74 === !l.charCodeAt(6) || 70 === !l.charCodeAt(7) || 73 === !l.charCodeAt(8) || 70 === !l.charCodeAt(9) || 0 === !l.charCodeAt(10)) throw Error("getJpegSize requires a binary jpeg file");
            n = 256 * l.charCodeAt(4) + l.charCodeAt(5);
            for (var m = 4, o = l.length; o > m;) {
                if (m += n, 255 !== l.charCodeAt(m)) throw Error("getJpegSize could not find the size of the image");
                if (192 === l.charCodeAt(m + 1) || 193 === l.charCodeAt(m + 1) || 194 === l.charCodeAt(m + 1) || 195 === l.charCodeAt(m + 1) || 196 === l.charCodeAt(m + 1) || 197 === l.charCodeAt(m + 1) || 198 === l.charCodeAt(m + 1) || 199 === l.charCodeAt(m + 1)) {
                    n = 256 * l.charCodeAt(m + 5) + l.charCodeAt(m + 6), l = 256 * l.charCodeAt(m + 7) + l.charCodeAt(m + 8), l = [l, n];
                    break a
                }
                m += 2, n = 256 * l.charCodeAt(m) + l.charCodeAt(m + 1)
            }
            l = void 0
        }
        return a = {
            w: l[0],
            h: l[1],
            cs: "DeviceRGB",
            bpc: 8,
            f: "DCTDecode",
            i: j,
            data: a
        }, d[j] = a, g || h || (h = g = -96), 0 > g && (g = -72 * a.w / g / this.internal.scaleFactor), 0 > h && (h = -72 * a.h / h / this.internal.scaleFactor), 0 === g && (g = h * a.w / a.h), 0 === h && (h = g * a.h / a.w), this.internal.write("q", i(g), "0 0", i(h), i(e), k(f + h), "cm /I" + a.i, "Do Q"), this
    }
}(jsPDF.API),
    function(a) {
        function b(a, b, c, d) {
            return this.pdf = a, this.x = b, this.y = c, this.settings = d, this.init(), this
        }

        function c(a) {
            var b = h[a];
            return b ? b : (b = {
                "xx-small": 9,
                "x-small": 11,
                small: 13,
                medium: 16,
                large: 19,
                "x-large": 23,
                "xx-large": 28,
                auto: 0
            }[a], void 0 !== b || (b = parseFloat(a)) ? h[a] = b / 16 : (b = a.match(/([\d\.]+)(px)/), h[a] = 3 === b.length ? parseFloat(b[1]) / 16 : 1))
        }

        function d(a, b, h) {
            var i, j = a.childNodes;
            i = $(a), a = {};
            for (var k, l = i.css("font-family").split(","), m = l.shift(); !k && m;) k = e[m.trim().toLowerCase()], m = l.shift();
            for (a["font-family"] = k || "times", a["font-style"] = g[i.css("font-style")] || "normal", k = f[i.css("font-weight")] || "normal", "bold" === k && (a["font-style"] = "normal" === a["font-style"] ? k : k + a["font-style"]), a["font-size"] = c(i.css("font-size")) || 1, a["line-height"] = c(i.css("line-height")) || 1, a.display = "inline" === i.css("display") ? "inline" : "block", "block" === a.display && (a["margin-top"] = c(i.css("margin-top")) || 0, a["margin-bottom"] = c(i.css("margin-bottom")) || 0, a["padding-top"] = c(i.css("padding-top")) || 0, a["padding-bottom"] = c(i.css("padding-bottom")) || 0), (k = "block" === a.display) && (b.setBlockBoundary(), b.setBlockStyle(a)), l = 0, m = j.length; m > l; l++)
                if (i = j[l], "object" == typeof i)
                    if (1 === i.nodeType && "SCRIPT" != i.nodeName) {
                        var n = i,
                            o = b,
                            p = h,
                            q = !1,
                            r = void 0,
                            s = void 0,
                            t = p["#" + n.id];
                        if (t)
                            if ("function" == typeof t) q = t(n, o);
                            else
                                for (r = 0, s = t.length; !q && r !== s;) q = t[r](n, o), r++;
                        if (t = p[n.nodeName], !q && t)
                            if ("function" == typeof t) q = t(n, o);
                            else
                                for (r = 0, s = t.length; !q && r !== s;) q = t[r](n, o), r++;
                        q || d(i, b, h)
                    } else 3 === i.nodeType && b.addText(i.nodeValue, a);
                else "string" == typeof i && b.addText(i, a);
            k && b.setBlockBoundary()
        }
        String.prototype.trim || (String.prototype.trim = function() {
            return this.replace(/^\s+|\s+$/g, "")
        }), String.prototype.trimLeft || (String.prototype.trimLeft = function() {
            return this.replace(/^\s+/g, "")
        }), String.prototype.trimRight || (String.prototype.trimRight = function() {
            return this.replace(/\s+$/g, "")
        }), b.prototype.init = function() {
            this.paragraph = {
                text: [],
                style: []
            }, this.pdf.internal.write("q")
        }, b.prototype.dispose = function() {
            return this.pdf.internal.write("Q"), {
                x: this.x,
                y: this.y
            }
        }, b.prototype.splitFragmentsIntoLines = function(a, b) {
            for (var c, d, e, f, g, h = this.pdf.internal.scaleFactor, i = {}, j = [], k = [j], l = 0, m = this.settings.width; a.length;)
                if (f = a.shift(), g = b.shift(), f)
                    if (c = g["font-family"], d = g["font-style"], e = i[c + d], e || (e = this.pdf.internal.getFont(c, d).metadata.Unicode, i[c + d] = e), c = {
                            widths: e.widths,
                            kerning: e.kerning,
                            fontSize: 12 * g["font-size"],
                            textIndent: l
                        }, d = this.pdf.getStringUnitWidth(f, c) * c.fontSize / h, l + d > m) {
                        for (f = this.pdf.splitTextToSize(f, m, c), j.push([f.shift(), g]); f.length;) j = [
                            [f.shift(), g]
                        ], k.push(j);
                        l = this.pdf.getStringUnitWidth(j[0][0], c) * c.fontSize / h
                    } else j.push([f, g]), l += d;
            return k
        }, b.prototype.RenderTextFragment = function(a, b) {
            var c = this.pdf.internal.getFont(b["font-family"], b["font-style"]);
            this.pdf.internal.write("/" + c.id, (12 * b["font-size"]).toFixed(2), "Tf", "(" + this.pdf.internal.pdfEscape(a) + ") Tj")
        }, b.prototype.renderParagraph = function() {
            for (var a, b = this.paragraph.text, c = 0, d = b.length, e = !1, f = !1; !e && c !== d;)(a = b[c] = b[c].trimLeft()) && (e = !0), c++;
            for (c = d - 1; d && !f && -1 !== c;)(a = b[c] = b[c].trimRight()) && (f = !0), c--;
            for (e = /\s+$/g, f = !0, c = 0; c !== d; c++) a = b[c].replace(/\s+/g, " "), f && (a = a.trimLeft()), a && (f = e.test(a)), b[c] = a;
            if (c = this.paragraph.style, a = (d = this.paragraph.blockstyle) || {}, this.paragraph = {
                    text: [],
                    style: [],
                    blockstyle: {},
                    priorblockstyle: d
                }, b.join("").trim()) {
                b = this.splitFragmentsIntoLines(b, c), c = 12 / this.pdf.internal.scaleFactor, e = (Math.max((d["margin-top"] || 0) - (a["margin-bottom"] || 0), 0) + (d["padding-top"] || 0)) * c, d = ((d["margin-bottom"] || 0) + (d["padding-bottom"] || 0)) * c, a = this.pdf.internal.write;
                var g, h;
                for (this.y += e, a("q", "BT", this.pdf.internal.getCoordinateString(this.x), this.pdf.internal.getVerticalCoordinateString(this.y), "Td"); b.length;) {
                    for (e = b.shift(), g = f = 0, h = e.length; g !== h; g++) e[g][0].trim() && (f = Math.max(f, e[g][1]["line-height"], e[g][1]["font-size"]));
                    for (a(0, (-12 * f).toFixed(2), "Td"), g = 0, h = e.length; g !== h; g++) e[g][0] && this.RenderTextFragment(e[g][0], e[g][1]);
                    this.y += f * c
                }
                a("ET", "Q"), this.y += d
            }
        }, b.prototype.setBlockBoundary = function() {
            this.renderParagraph()
        }, b.prototype.setBlockStyle = function(a) {
            this.paragraph.blockstyle = a
        }, b.prototype.addText = function(a, b) {
            this.paragraph.text.push(a), this.paragraph.style.push(b)
        };
        var e = {
                helvetica: "helvetica",
                "sans-serif": "helvetica",
                serif: "times",
                times: "times",
                "times new roman": "times",
                monospace: "courier",
                courier: "courier"
            },
            f = {
                100: "normal",
                200: "normal",
                300: "normal",
                400: "normal",
                500: "bold",
                600: "bold",
                700: "bold",
                800: "bold",
                900: "bold",
                normal: "normal",
                bold: "bold",
                bolder: "bold",
                lighter: "normal"
            },
            g = {
                normal: "normal",
                italic: "italic",
                oblique: "italic"
            },
            h = {
                normal: 1
            };
        a.fromHTML = function(a, c, e, f) {
            if ("string" == typeof a) {
                var g = "jsPDFhtmlText" + Date.now().toString() + (1e3 * Math.random()).toFixed(0);
                $('<div style="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;"><iframe style="height:1px;width:1px" name="' + g + '" /></div>').appendTo(document.body), a = $(window.frames[g].document.body).html(a)[0]
            }
            return c = new b(this, c, e, f), d(a, c, f.elementHandlers), c.dispose()
        }
    }(jsPDF.API),
    function(a) {
        a.addSVG = function(a, b, c, d, e) {
            function f(a) {
                for (var b = parseFloat(a[1]), c = parseFloat(a[2]), d = [], e = 3, f = a.length; f > e;) "c" === a[e] ? (d.push([parseFloat(a[e + 1]), parseFloat(a[e + 2]), parseFloat(a[e + 3]), parseFloat(a[e + 4]), parseFloat(a[e + 5]), parseFloat(a[e + 6])]), e += 7) : "l" === a[e] ? (d.push([parseFloat(a[e + 1]), parseFloat(a[e + 2])]), e += 3) : e += 1;
                return [b, c, d]
            }
            if (void 0 === b || void 0 === b) throw Error("addSVG needs values for 'x' and 'y'");
            var g = function(a) {
                    var b = a.createElement("iframe"),
                        c = a.createElement("style");
                    return c.type = "text/css", c.styleSheet ? c.styleSheet.cssText = ".jsPDF_sillysvg_iframe {display:none;position:absolute;}" : c.appendChild(a.createTextNode(".jsPDF_sillysvg_iframe {display:none;position:absolute;}")), a.getElementsByTagName("head")[0].appendChild(c), b.name = "childframe", b.setAttribute("width", 0), b.setAttribute("height", 0), b.setAttribute("frameborder", "0"), b.setAttribute("scrolling", "no"), b.setAttribute("seamless", "seamless"), b.setAttribute("class", "jsPDF_sillysvg_iframe"), a.body.appendChild(b), b
                }(document),
                g = function(a, b) {
                    var c = (b.contentWindow || b.contentDocument).document;
                    return c.write(a), c.close(), c.getElementsByTagName("svg")[0]
                }(a, g);
            a = [1, 1];
            var h = parseFloat(g.getAttribute("width")),
                i = parseFloat(g.getAttribute("height"));
            for (h && i && (d && e ? a = [d / h, e / i] : d ? a = [d / h, d / h] : e && (a = [e / i, e / i])), g = g.childNodes, d = 0, e = g.length; e > d; d++) h = g[d], h.tagName && "PATH" === h.tagName.toUpperCase() && (h = f(h.getAttribute("d").split(" ")), h[0] = h[0] * a[0] + b, h[1] = h[1] * a[1] + c, this.lines.call(this, h[2], h[0], h[1], a));
            return this
        }
    }(jsPDF.API),
    function(a) {
        var b = a.getCharWidthsArray = function(a, b) {
                b || (b = {});
                var c, d, e, f = b.widths ? b.widths : this.internal.getFont().metadata.Unicode.widths,
                    g = f.fof ? f.fof : 1,
                    h = b.kerning ? b.kerning : this.internal.getFont().metadata.Unicode.kerning,
                    i = h.fof ? h.fof : 1,
                    j = 0,
                    k = f[0] || g,
                    l = [];
                for (c = 0, d = a.length; d > c; c++) e = a.charCodeAt(c), l.push((f[e] || k) / g + (h[e] && h[e][j] || 0) / i), j = e;
                return l
            },
            c = function(a) {
                for (var b = a.length, c = 0; b;) b--, c += a[b];
                return c
            };
        a.getStringUnitWidth = function(a, d) {
            return c(b.call(this, a, d))
        };
        var d = function(a, d, e) {
            e || (e = {});
            var f = b(" ", e)[0],
                g = a.split(" "),
                h = [];
            a = [h];
            var i, j, k, l, m = e.textIndent || 0,
                n = 0,
                o = 0;
            for (k = 0, l = g.length; l > k; k++) {
                if (i = g[k], j = b(i, e), o = c(j), m + n + o > d) {
                    if (o > d) {
                        for (var o = i, p = j, q = d, r = [], s = 0, t = o.length, u = 0; s !== t && u + p[s] < d - (m + n);) u += p[s], s++;
                        for (r.push(o.slice(0, s)), m = s, u = 0; s !== t;) u + p[s] > q && (r.push(o.slice(m, s)), u = 0, m = s), u += p[s], s++;
                        for (m !== s && r.push(o.slice(m, s)), m = r, h.push(m.shift()), h = [m.pop()]; m.length;) a.push([m.shift()]);
                        o = c(j.slice(i.length - h[0].length))
                    } else h = [i];
                    a.push(h), m = o
                } else h.push(i), m += n + o;
                n = f
            }
            for (d = [], k = 0, l = a.length; l > k; k++) d.push(a[k].join(" "));
            return d
        };
        a.splitTextToSize = function(a, b, c) {
            c || (c = {});
            var e, f = c.fontSize || this.internal.getFontSize(),
                g = c;
            e = {
                0: 1
            };
            var h = {};
            for (g.widths && g.kerning ? e = {
                widths: g.widths,
                kerning: g.kerning
            } : (g = this.internal.getFont(g.fontName, g.fontStyle), e = g.metadata.Unicode ? {
                widths: g.metadata.Unicode.widths || e,
                kerning: g.metadata.Unicode.kerning || h
            } : {
                widths: e,
                kerning: h
            }), a = a.match(/[\n\r]/) ? a.split(/\r\n|\r|\n/g) : [a], b = 1 * this.internal.scaleFactor * b / f, e.textIndent = c.textIndent ? 1 * c.textIndent * this.internal.scaleFactor / f : 0, h = [], c = 0, f = a.length; f > c; c++) h = h.concat(d(a[c], b, e));
            return h
        }
    }(jsPDF.API),
    function(a) {
        var b = function(a) {
                for (var b = {}, c = 0; 16 > c; c++) b["klmnopqrstuvwxyz" [c]] = "0123456789abcdef" [c];
                for (var d, e, f, g = {}, h = 1, i = g, j = [], k = "", l = "", m = a.length - 1, c = 1; c != m;) e = a[c], c += 1, "'" == e ? d ? (f = d.join(""), d = void 0) : d = [] : d ? d.push(e) : "{" == e ? (j.push([i, f]), i = {}, f = void 0) : "}" == e ? (e = j.pop(), e[0][e[1]] = i, f = void 0, i = e[0]) : "-" == e ? h = -1 : void 0 === f ? b.hasOwnProperty(e) ? (k += b[e], f = parseInt(k, 16) * h, h = 1, k = "") : k += e : b.hasOwnProperty(e) ? (l += b[e], i[f] = parseInt(l, 16) * h, h = 1, f = void 0, l = "") : l += e;
                return g
            },
            c = {
                codePages: ["WinAnsiEncoding"],
                WinAnsiEncoding: b("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")
            },
            d = {
                Unicode: {
                    Courier: c,
                    "Courier-Bold": c,
                    "Courier-BoldOblique": c,
                    "Courier-Oblique": c,
                    Helvetica: c,
                    "Helvetica-Bold": c,
                    "Helvetica-BoldOblique": c,
                    "Helvetica-Oblique": c,
                    "Times-Roman": c,
                    "Times-Bold": c,
                    "Times-BoldItalic": c,
                    "Times-Italic": c
                }
            },
            e = {
                Unicode: {
                    "Courier-Oblique": b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
                    "Times-BoldItalic": b("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),
                    "Helvetica-Bold": b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),
                    Courier: b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
                    "Courier-BoldOblique": b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
                    "Times-Bold": b("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),
                    Helvetica: b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),
                    "Helvetica-BoldOblique": b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),
                    "Courier-Bold": b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
                    "Times-Italic": b("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),
                    "Times-Roman": b("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),
                    "Helvetica-Oblique": b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")
                }
            };
        a.events.push(["addFonts", function(a) {
            var b, c, f, g;
            for (c in a.fonts) a.fonts.hasOwnProperty(c) && (b = a.fonts[c], (f = e.Unicode[b.PostScriptName]) && (g = b.metadata.Unicode ? b.metadata.Unicode : b.metadata.Unicode = {}, g.widths = f.widths, g.kerning = f.kerning), (f = d.Unicode[b.PostScriptName]) && (g = b.metadata.Unicode ? b.metadata.Unicode : b.metadata.Unicode = {}, g.encoding = f, f.codePages && f.codePages.length && (b.encoding = f.codePages[0])))
        }])
    }(jsPDF.API),
    function(a) {
        var b, c, d, e, f = {
                x: void 0,
                y: void 0,
                w: void 0,
                h: void 0,
                ln: void 0
            },
            g = 1;
        a.setHeaderFunction = function(a) {
            e = a
        }, a.getTextDimensions = function(a) {
            b = this.internal.getFont().fontName, c = this.internal.getFontSize(), d = this.internal.getFont().fontStyle;
            var e, f = 19.049976 / 25.4;
            return e = document.createElement("font"), e.id = "jsPDFCell", e.style.fontStyle = d, e.style.fontName = b, e.style.fontSize = c + "pt", e.innerText = a, document.body.appendChild(e), a = {
                w: (e.offsetWidth + 1) * f,
                h: (e.offsetHeight + 1) * f
            }, document.body.removeChild(e), a
        }, a.cellAddPage = function() {
            this.addPage(), f = {
                x: void 0,
                y: void 0,
                w: void 0,
                h: void 0,
                ln: void 0
            }, g += 1
        }, a.cellInitialize = function() {
            f = {
                x: void 0,
                y: void 0,
                w: void 0,
                h: void 0,
                ln: void 0
            }, g = 1
        }, a.cell = function(a, b, c, d, e, g, h) {
            var i = f;
            if (void 0 !== i.ln && (i.ln === g ? (a = i.x + i.w, b = i.y) : (i.y + i.h + d + 13 >= this.internal.pageSize.height && (this.cellAddPage(), this.printHeaders && this.tableHeaderRow && this.printHeaderRow(g)), b = f.y + f.h)), "" !== e[0])
                if (this.printingHeaderRow ? this.rect(a, b, c, d, "FD") : this.rect(a, b, c, d), "right" === h) {
                    if (e instanceof Array)
                        for (h = 0; h < e.length; h++) {
                            var i = e[h],
                                j = this.getStringUnitWidth(i) * this.internal.getFontSize();
                            this.text(i, a + c - j - 3, b + this.internal.getLineHeight() * (h + 1))
                        }
                } else this.text(e, a + 3, b + this.internal.getLineHeight());
            return f = {
                x: a,
                y: b,
                w: c,
                h: d,
                ln: g
            }, this
        }, a.getKeys = "function" == typeof Object.keys ? function(a) {
            return a ? Object.keys(a) : []
        } : function(a) {
            var b, c = [];
            for (b in a) a.hasOwnProperty(b) && c.push(b);
            return c
        }, a.arrayMax = function(a, b) {
            var c, d, e, f = a[0];
            for (c = 0, d = a.length; d > c; c += 1) e = a[c], b ? -1 === b(f, e) && (f = e) : e > f && (f = e);
            return f
        }, a.table = function(b, c, d) {
            var e, f, g, h, i, j, k, l = [],
                m = [],
                n = {},
                o = {},
                p = [],
                q = [];
            if (this.lnMod = 0, d && (this.printHeaders = d.printHeaders || !0), !b) throw "No data for PDF table";
            if (void 0 === c || null === c) l = this.getKeys(b[0]);
            else if (c[0] && "string" != typeof c[0])
                for (f = 0, g = c.length; g > f; f += 1) e = c[f], l.push(e.name), m.push(e.prompt), o[e.name] = e.width;
            else l = c;
            if (d.autoSize)
                for (k = function(a) {
                    return a[e]
                }, f = 0, g = l.length; g > f; f += 1) {
                    for (e = l[f], n[e] = b.map(k), p.push(this.getTextDimensions(m[f] || e).w), i = n[e], j = 0, g = i.length; g > j; j += 1) h = i[j], p.push(this.getTextDimensions(h).w);
                    o[e] = a.arrayMax(p)
                }
            if (d.printHeaders) {
                for (d = this.calculateLineHeight(l, o, m.length ? m : l), f = 0, g = l.length; g > f; f += 1) e = l[f], q.push([13, 13, o[e], d, String(m.length ? m[f] : e)]);
                this.setTableHeaderRow(q), this.printHeaderRow(1)
            }
            for (f = 0, g = b.length; g > f; f += 1)
                for (m = b[f], d = this.calculateLineHeight(l, o, m), j = 0, q = l.length; q > j; j += 1) e = l[j], this.cell(13, 13, o[e], d, m[e], f + 2, c[j].align);
            return this
        }, a.calculateLineHeight = function(a, b, c) {
            for (var d, e = 0, f = 0; f < a.length; f++) d = a[f], c[d] = this.splitTextToSize(String(c[d]), b[d] - 3), d = this.internal.getLineHeight() * c[d].length + 3, d > e && (e = d);
            return e
        }, a.setTableHeaderRow = function(a) {
            this.tableHeaderRow = a
        }, a.printHeaderRow = function(a) {
            if (!this.tableHeaderRow) throw "Property tableHeaderRow does not exist.";
            var b, c, d;
            for (this.printingHeaderRow = !0, void 0 !== e && (c = e(this, g), f = {
                x: c[0],
                y: c[1],
                w: c[2],
                h: c[3],
                ln: -1
            }), this.setFontStyle("bold"), c = 0, d = this.tableHeaderRow.length; d > c; c += 1) this.setFillColor(200, 200, 200), b = this.tableHeaderRow[c], b = [].concat(b), this.cell.apply(this, b.concat(a));
            this.setFontStyle("normal"), this.printingHeaderRow = !1
        }
    }(jsPDF.API),
    function(a) {
        a.putTotalPages = function(a) {
            a = RegExp(a, "g");
            for (var b = 1; b <= this.internal.getNumberOfPages(); b++)
                for (var c = 0; c < this.internal.pages[b].length; c++) this.internal.pages[b][c] = this.internal.pages[b][c].replace(a, this.internal.getNumberOfPages());
            return this
        }
    }(jsPDF.API);
var BlobBuilder = BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder || self.MSBlobBuilder || function(a) {
            var b = function(a) {
                    return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]
                },
                c = function() {
                    this.data = []
                },
                d = function(a, b, c) {
                    this.data = a, this.size = a.length, this.type = b, this.encoding = c
                },
                e = c.prototype,
                f = d.prototype,
                g = a.FileReaderSync,
                h = function(a) {
                    this.code = this[this.name = a]
                },
                i = "NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),
                j = i.length,
                k = a.URL || a.webkitURL || a,
                l = k.createObjectURL,
                m = k.revokeObjectURL,
                n = k,
                o = a.btoa,
                p = a.atob,
                q = !1,
                r = function(a) {
                    q = !a
                },
                s = a.ArrayBuffer,
                t = a.Uint8Array;
            for (c.fake = f.fake = !0; j--;) h.prototype[i[j]] = j + 1;
            try {
                t && r.apply(0, new t(1))
            } catch (u) {}
            return k.createObjectURL || (n = a.URL = {}), n.createObjectURL = function(a) {
                var b = a.type;
                return null === b && (b = "application/octet-stream"), a instanceof d ? (b = "data:" + b, "base64" === a.encoding ? b + ";base64," + a.data : "URI" === a.encoding ? b + "," + decodeURIComponent(a.data) : o ? b + ";base64," + o(a.data) : b + "," + encodeURIComponent(a.data)) : l ? l.call(k, a) : void 0
            }, n.revokeObjectURL = function(a) {
                "data:" !== a.substring(0, 5) && m && m.call(k, a)
            }, e.append = function(a) {
                var c = this.data;
                if (t && a instanceof s)
                    if (q) c.push(String.fromCharCode.apply(String, new t(a)));
                    else {
                        c = "", a = new t(a);
                        for (var e = 0, f = a.length; f > e; e++) c += String.fromCharCode(a[e])
                    } else if ("Blob" === b(a) || "File" === b(a)) {
                    if (!g) throw new h("NOT_READABLE_ERR");
                    e = new g, c.push(e.readAsBinaryString(a))
                } else a instanceof d ? "base64" === a.encoding && p ? c.push(p(a.data)) : "URI" === a.encoding ? c.push(decodeURIComponent(a.data)) : "raw" === a.encoding && c.push(a.data) : ("string" != typeof a && (a += ""), c.push(unescape(encodeURIComponent(a))))
            }, e.getBlob = function(a) {
                return arguments.length || (a = null), new d(this.data.join(""), a, "raw")
            }, e.toString = function() {
                return "[object BlobBuilder]"
            }, f.slice = function(a, b, c) {
                var e = arguments.length;
                return 3 > e && (c = null), new d(this.data.slice(a, e > 1 ? b : this.data.length), c, this.encoding)
            }, f.toString = function() {
                return "[object Blob]"
            }, c
        }(self),
    saveAs = saveAs || navigator.msSaveBlob && navigator.msSaveBlob.bind(navigator) || function(a) {
            var b = a.document,
                c = a.URL || a.webkitURL || a,
                d = b.createElementNS("http://www.w3.org/1999/xhtml", "a"),
                e = "download" in d,
                f = function(c) {
                    var d = b.createEvent("MouseEvents");
                    return d.initMouseEvent("click", !0, !1, a, 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, null), c.dispatchEvent(d)
                },
                g = a.webkitRequestFileSystem,
                h = a.requestFileSystem || g || a.mozRequestFileSystem,
                i = function(b) {
                    (a.setImmediate || a.setTimeout)(function() {
                        throw b
                    }, 0)
                },
                j = 0,
                k = [],
                l = function(a, b, c) {
                    b = [].concat(b);
                    for (var d = b.length; d--;) {
                        var e = a["on" + b[d]];
                        if ("function" == typeof e) try {
                            e.call(a, c || a)
                        } catch (f) {
                            i(f)
                        }
                    }
                },
                m = function(b, c) {
                    var i, m, n, o = this,
                        p = b.type,
                        q = !1,
                        r = function() {
                            var c = (a.URL || a.webkitURL || a).createObjectURL(b);
                            return k.push(c), c
                        },
                        s = function() {
                            l(o, ["writestart", "progress", "write", "writeend"])
                        },
                        t = function() {
                            (q || !i) && (i = r(b)), m && (m.location.href = i), o.readyState = o.DONE, s()
                        },
                        u = function(a) {
                            return function() {
                                return o.readyState !== o.DONE ? a.apply(this, arguments) : void 0
                            }
                        },
                        v = {
                            create: !0,
                            exclusive: !1
                        };
                    return o.readyState = o.INIT, c || (c = "download"), e && (i = r(b), d.href = i, d.download = c, f(d)) ? (o.readyState = o.DONE, void s()) : (a.chrome && p && "application/octet-stream" !== p && (n = b.slice || b.webkitSlice, b = n.call(b, 0, b.size, "application/octet-stream"), q = !0), g && "download" !== c && (c += ".download"), m = "application/octet-stream" === p || g ? a : a.open(), void(h ? (j += b.size, h(a.TEMPORARY, j, u(function(a) {
                        a.root.getDirectory("saved", v, u(function(a) {
                            var d = function() {
                                a.getFile(c, v, u(function(a) {
                                    a.createWriter(u(function(c) {
                                        c.onwriteend = function(b) {
                                            m.location.href = a.toURL(), k.push(a), o.readyState = o.DONE, l(o, "writeend", b)
                                        }, c.onerror = function() {
                                            var a = c.error;
                                            a.code !== a.ABORT_ERR && t()
                                        }, ["writestart", "progress", "write", "abort"].forEach(function(a) {
                                            c["on" + a] = o["on" + a]
                                        }), c.write(b), o.abort = function() {
                                            c.abort(), o.readyState = o.DONE
                                        }, o.readyState = o.WRITING
                                    }), t)
                                }), t)
                            };
                            a.getFile(c, {
                                create: !1
                            }, u(function(a) {
                                a.remove(), d()
                            }), u(function(a) {
                                a.code === a.NOT_FOUND_ERR ? d() : t()
                            }))
                        }), t)
                    }), t)) : t()))
                },
                n = m.prototype;
            return n.abort = function() {
                this.readyState = this.DONE, l(this, "abort")
            }, n.readyState = n.INIT = 0, n.WRITING = 1, n.DONE = 2, n.error = n.onwritestart = n.onprogress = n.onwrite = n.onabort = n.onerror = n.onwriteend = null, a.addEventListener("unload", function() {
                for (var a = k.length; a--;) {
                    var b = k[a];
                    "string" == typeof b ? c.revokeObjectURL(b) : b.remove()
                }
                k.length = 0
            }, !1),
                function(a, b) {
                    return new m(a, b)
                }
        }(self),
    MAX_BITS = 15,
    D_CODES = 30,
    BL_CODES = 19,
    LENGTH_CODES = 29,
    LITERALS = 256,
    L_CODES = LITERALS + 1 + LENGTH_CODES,
    HEAP_SIZE = 2 * L_CODES + 1,
    END_BLOCK = 256,
    MAX_BL_BITS = 7,
    REP_3_6 = 16,
    REPZ_3_10 = 17,
    REPZ_11_138 = 18,
    Buf_size = 16,
    Z_DEFAULT_COMPRESSION = -1,
    Z_FILTERED = 1,
    Z_HUFFMAN_ONLY = 2,
    Z_DEFAULT_STRATEGY = 0,
    Z_NO_FLUSH = 0,
    Z_PARTIAL_FLUSH = 1,
    Z_FULL_FLUSH = 3,
    Z_FINISH = 4,
    Z_OK = 0,
    Z_STREAM_END = 1,
    Z_NEED_DICT = 2,
    Z_STREAM_ERROR = -2,
    Z_DATA_ERROR = -3,
    Z_BUF_ERROR = -5,
    _dist_code = [0, 1, 2, 3, 4, 4, 5, 5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 16, 17, 18, 18, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29];
Tree._length_code = [0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28], Tree.base_length = [0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 16, 20, 24, 28, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 0], Tree.base_dist = [0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64, 96, 128, 192, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096, 6144, 8192, 12288, 16384, 24576], Tree.d_code = function(a) {
    return 256 > a ? _dist_code[a] : _dist_code[256 + (a >>> 7)]
}, Tree.extra_lbits = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0], Tree.extra_dbits = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13], Tree.extra_blbits = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7], Tree.bl_order = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15], StaticTree.static_ltree = [12, 8, 140, 8, 76, 8, 204, 8, 44, 8, 172, 8, 108, 8, 236, 8, 28, 8, 156, 8, 92, 8, 220, 8, 60, 8, 188, 8, 124, 8, 252, 8, 2, 8, 130, 8, 66, 8, 194, 8, 34, 8, 162, 8, 98, 8, 226, 8, 18, 8, 146, 8, 82, 8, 210, 8, 50, 8, 178, 8, 114, 8, 242, 8, 10, 8, 138, 8, 74, 8, 202, 8, 42, 8, 170, 8, 106, 8, 234, 8, 26, 8, 154, 8, 90, 8, 218, 8, 58, 8, 186, 8, 122, 8, 250, 8, 6, 8, 134, 8, 70, 8, 198, 8, 38, 8, 166, 8, 102, 8, 230, 8, 22, 8, 150, 8, 86, 8, 214, 8, 54, 8, 182, 8, 118, 8, 246, 8, 14, 8, 142, 8, 78, 8, 206, 8, 46, 8, 174, 8, 110, 8, 238, 8, 30, 8, 158, 8, 94, 8, 222, 8, 62, 8, 190, 8, 126, 8, 254, 8, 1, 8, 129, 8, 65, 8, 193, 8, 33, 8, 161, 8, 97, 8, 225, 8, 17, 8, 145, 8, 81, 8, 209, 8, 49, 8, 177, 8, 113, 8, 241, 8, 9, 8, 137, 8, 73, 8, 201, 8, 41, 8, 169, 8, 105, 8, 233, 8, 25, 8, 153, 8, 89, 8, 217, 8, 57, 8, 185, 8, 121, 8, 249, 8, 5, 8, 133, 8, 69, 8, 197, 8, 37, 8, 165, 8, 101, 8, 229, 8, 21, 8, 149, 8, 85, 8, 213, 8, 53, 8, 181, 8, 117, 8, 245, 8, 13, 8, 141, 8, 77, 8, 205, 8, 45, 8, 173, 8, 109, 8, 237, 8, 29, 8, 157, 8, 93, 8, 221, 8, 61, 8, 189, 8, 125, 8, 253, 8, 19, 9, 275, 9, 147, 9, 403, 9, 83, 9, 339, 9, 211, 9, 467, 9, 51, 9, 307, 9, 179, 9, 435, 9, 115, 9, 371, 9, 243, 9, 499, 9, 11, 9, 267, 9, 139, 9, 395, 9, 75, 9, 331, 9, 203, 9, 459, 9, 43, 9, 299, 9, 171, 9, 427, 9, 107, 9, 363, 9, 235, 9, 491, 9, 27, 9, 283, 9, 155, 9, 411, 9, 91, 9, 347, 9, 219, 9, 475, 9, 59, 9, 315, 9, 187, 9, 443, 9, 123, 9, 379, 9, 251, 9, 507, 9, 7, 9, 263, 9, 135, 9, 391, 9, 71, 9, 327, 9, 199, 9, 455, 9, 39, 9, 295, 9, 167, 9, 423, 9, 103, 9, 359, 9, 231, 9, 487, 9, 23, 9, 279, 9, 151, 9, 407, 9, 87, 9, 343, 9, 215, 9, 471, 9, 55, 9, 311, 9, 183, 9, 439, 9, 119, 9, 375, 9, 247, 9, 503, 9, 15, 9, 271, 9, 143, 9, 399, 9, 79, 9, 335, 9, 207, 9, 463, 9, 47, 9, 303, 9, 175, 9, 431, 9, 111, 9, 367, 9, 239, 9, 495, 9, 31, 9, 287, 9, 159, 9, 415, 9, 95, 9, 351, 9, 223, 9, 479, 9, 63, 9, 319, 9, 191, 9, 447, 9, 127, 9, 383, 9, 255, 9, 511, 9, 0, 7, 64, 7, 32, 7, 96, 7, 16, 7, 80, 7, 48, 7, 112, 7, 8, 7, 72, 7, 40, 7, 104, 7, 24, 7, 88, 7, 56, 7, 120, 7, 4, 7, 68, 7, 36, 7, 100, 7, 20, 7, 84, 7, 52, 7, 116, 7, 3, 8, 131, 8, 67, 8, 195, 8, 35, 8, 163, 8, 99, 8, 227, 8], StaticTree.static_dtree = [0, 5, 16, 5, 8, 5, 24, 5, 4, 5, 20, 5, 12, 5, 28, 5, 2, 5, 18, 5, 10, 5, 26, 5, 6, 5, 22, 5, 14, 5, 30, 5, 1, 5, 17, 5, 9, 5, 25, 5, 5, 5, 21, 5, 13, 5, 29, 5, 3, 5, 19, 5, 11, 5, 27, 5, 7, 5, 23, 5], StaticTree.static_l_desc = new StaticTree(StaticTree.static_ltree, Tree.extra_lbits, LITERALS + 1, L_CODES, MAX_BITS), StaticTree.static_d_desc = new StaticTree(StaticTree.static_dtree, Tree.extra_dbits, 0, D_CODES, MAX_BITS), StaticTree.static_bl_desc = new StaticTree(null, Tree.extra_blbits, 0, BL_CODES, MAX_BL_BITS);
var MAX_MEM_LEVEL = 9,
    DEF_MEM_LEVEL = 8,
    STORED = 0,
    FAST = 1,
    SLOW = 2,
    config_table = [new Config(0, 0, 0, 0, STORED), new Config(4, 4, 8, 4, FAST), new Config(4, 5, 16, 8, FAST), new Config(4, 6, 32, 32, FAST), new Config(4, 4, 16, 16, SLOW), new Config(8, 16, 32, 32, SLOW), new Config(8, 16, 128, 128, SLOW), new Config(8, 32, 128, 256, SLOW), new Config(32, 128, 258, 1024, SLOW), new Config(32, 258, 258, 4096, SLOW)],
    z_errmsg = "need dictionary;stream end;;;stream error;data error;;buffer error;;".split(";"),
    NeedMore = 0,
    BlockDone = 1,
    FinishStarted = 2,
    FinishDone = 3,
    PRESET_DICT = 32,
    INIT_STATE = 42,
    BUSY_STATE = 113,
    FINISH_STATE = 666,
    Z_DEFLATED = 8,
    STORED_BLOCK = 0,
    STATIC_TREES = 1,
    DYN_TREES = 2,
    MIN_MATCH = 3,
    MAX_MATCH = 258,
    MIN_LOOKAHEAD = MAX_MATCH + MIN_MATCH + 1;
ZStream.prototype = {
    deflateInit: function(a, b) {
        return this.dstate = new Deflate, b || (b = MAX_BITS), this.dstate.deflateInit(this, a, b)
    },
    deflate: function(a) {
        return this.dstate ? this.dstate.deflate(this, a) : Z_STREAM_ERROR
    },
    deflateEnd: function() {
        if (!this.dstate) return Z_STREAM_ERROR;
        var a = this.dstate.deflateEnd();
        return this.dstate = null, a
    },
    deflateParams: function(a, b) {
        return this.dstate ? this.dstate.deflateParams(this, a, b) : Z_STREAM_ERROR
    },
    deflateSetDictionary: function(a, b) {
        return this.dstate ? this.dstate.deflateSetDictionary(this, a, b) : Z_STREAM_ERROR
    },
    read_buf: function(a, b, c) {
        var d = this.avail_in;
        return d > c && (d = c), 0 === d ? 0 : (this.avail_in -= d, a.set(this.next_in.subarray(this.next_in_index, this.next_in_index + d), b), this.next_in_index += d, this.total_in += d, d)
    },
    flush_pending: function() {
        var a = this.dstate.pending;
        a > this.avail_out && (a = this.avail_out), 0 !== a && (this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out, this.dstate.pending_out + a), this.next_out_index), this.next_out_index += a, this.dstate.pending_out += a, this.total_out += a, this.avail_out -= a, this.dstate.pending -= a, 0 === this.dstate.pending && (this.dstate.pending_out = 0))
    }
}, void
    function(a, b) {
        "object" == typeof module ? module.exports = b() : "function" == typeof define ? define(b) : a.adler32cs = b()
    }(this, function() {
        var a = "function" == typeof ArrayBuffer && "function" == typeof Uint8Array,
            b = null,
            c = function() {
                if (!a) return function() {
                    return !1
                };
                try {
                    var c = require("buffer");
                    "function" == typeof c.Buffer && (b = c.Buffer)
                } catch (d) {}
                return function(a) {
                    return a instanceof ArrayBuffer || null !== b && a instanceof b
                }
            }(),
            d = function() {
                return null !== b ? function(a) {
                    return new b(a, "utf8").toString("binary")
                } : function(a) {
                    return unescape(encodeURIComponent(a))
                }
            }(),
            e = function(a, b) {
                for (var c = 65535 & a, d = a >>> 16, e = 0, f = b.length; f > e; e++) c = (c + (255 & b.charCodeAt(e))) % 65521, d = (d + c) % 65521;
                return (d << 16 | c) >>> 0
            },
            f = function(a, b) {
                for (var c = 65535 & a, d = a >>> 16, e = 0, f = b.length; f > e; e++) c = (c + b[e]) % 65521, d = (d + c) % 65521;
                return (d << 16 | c) >>> 0
            },
            g = {},
            h = g.Adler32 = function() {
                var b = function(a) {
                        if (!(this instanceof b)) throw new TypeError("Constructor cannot called be as a function.");
                        if (!isFinite(a = null == a ? 1 : +a)) throw Error("First arguments needs to be a finite number.");
                        this.checksum = a >>> 0
                    },
                    g = b.prototype = {};
                return g.constructor = b, b.from = function(a) {
                    return a.prototype = g, a
                }(function(a) {
                    if (!(this instanceof b)) throw new TypeError("Constructor cannot called be as a function.");
                    if (null == a) throw Error("First argument needs to be a string.");
                    this.checksum = e(1, a.toString())
                }), b.fromUtf8 = function(a) {
                    return a.prototype = g, a
                }(function(a) {
                    if (!(this instanceof b)) throw new TypeError("Constructor cannot called be as a function.");
                    if (null == a) throw Error("First argument needs to be a string.");
                    a = d(a.toString()), this.checksum = e(1, a)
                }), a && (b.fromBuffer = function(a) {
                    return a.prototype = g, a
                }(function(a) {
                    if (!(this instanceof b)) throw new TypeError("Constructor cannot called be as a function.");
                    if (!c(a)) throw Error("First argument needs to be ArrayBuffer.");
                    return a = new Uint8Array(a), this.checksum = f(1, a)
                })), g.update = function(a) {
                    if (null == a) throw Error("First argument needs to be a string.");
                    return a = a.toString(), this.checksum = e(this.checksum, a)
                }, g.updateUtf8 = function(a) {
                    if (null == a) throw Error("First argument needs to be a string.");
                    return a = d(a.toString()), this.checksum = e(this.checksum, a)
                }, a && (g.updateBuffer = function(a) {
                    if (!c(a)) throw Error("First argument needs to be ArrayBuffer.");
                    return a = new Uint8Array(a), this.checksum = f(this.checksum, a)
                }), g.clone = function() {
                    return new h(this.checksum)
                }, b
            }();
        return g.from = function(a) {
            if (null == a) throw Error("First argument needs to be a string.");
            return e(1, a.toString())
        }, g.fromUtf8 = function(a) {
            if (null == a) throw Error("First argument needs to be a string.");
            return a = d(a.toString()), e(1, a)
        }, a && (g.fromBuffer = function(a) {
            if (!c(a)) throw Error("First argument need to be ArrayBuffer.");
            return a = new Uint8Array(a), f(1, a)
        }), g
    });
var QRCode;
! function() {
    function a(a) {
        this.mode = j.MODE_8BIT_BYTE, this.data = a, this.parsedData = [];
        for (var b = 0, c = this.data.length; c > b; b++) {
            var d = [],
                e = this.data.charCodeAt(b);
            e > 65536 ? (d[0] = 240 | (1835008 & e) >>> 18, d[1] = 128 | (258048 & e) >>> 12, d[2] = 128 | (4032 & e) >>> 6, d[3] = 128 | 63 & e) : e > 2048 ? (d[0] = 224 | (61440 & e) >>> 12, d[1] = 128 | (4032 & e) >>> 6, d[2] = 128 | 63 & e) : e > 128 ? (d[0] = 192 | (1984 & e) >>> 6, d[1] = 128 | 63 & e) : d[0] = e, this.parsedData.push(d)
        }
        this.parsedData = Array.prototype.concat.apply([], this.parsedData), this.parsedData.length != this.data.length && (this.parsedData.unshift(191), this.parsedData.unshift(187), this.parsedData.unshift(239))
    }

    function b(a, b) {
        this.typeNumber = a, this.errorCorrectLevel = b, this.modules = null, this.moduleCount = 0, this.dataCache = null, this.dataList = []
    }

    function c(a, b) {
        if (void 0 == a.length) throw new Error(a.length + "/" + b);
        for (var c = 0; c < a.length && 0 == a[c];) c++;
        this.num = new Array(a.length - c + b);
        for (var d = 0; d < a.length - c; d++) this.num[d] = a[d + c]
    }

    function d(a, b) {
        this.totalCount = a, this.dataCount = b
    }

    function e() {
        this.buffer = [], this.length = 0
    }

    function f() {
        return "undefined" != typeof CanvasRenderingContext2D
    }

    function g() {
        var a = !1,
            b = navigator.userAgent;
        if (/android/i.test(b)) {
            a = !0;
            var c = b.toString().match(/android ([0-9]\.[0-9])/i);
            c && c[1] && (a = parseFloat(c[1]))
        }
        return a
    }

    function h(a, b) {
        for (var c = 1, d = i(a), e = 0, f = p.length; f >= e; e++) {
            var g = 0;
            switch (b) {
                case k.L:
                    g = p[e][0];
                    break;
                case k.M:
                    g = p[e][1];
                    break;
                case k.Q:
                    g = p[e][2];
                    break;
                case k.H:
                    g = p[e][3]
            }
            if (g >= d) break;
            c++
        }
        if (c > p.length) throw new Error("Too long data");
        return c
    }

    function i(a) {
        var b = encodeURI(a).toString().replace(/\%[0-9a-fA-F]{2}/g, "a");
        return b.length + (b.length != a ? 3 : 0)
    }
    a.prototype = {
        getLength: function() {
            return this.parsedData.length
        },
        write: function(a) {
            for (var b = 0, c = this.parsedData.length; c > b; b++) a.put(this.parsedData[b], 8)
        }
    }, b.prototype = {
        addData: function(b) {
            var c = new a(b);
            this.dataList.push(c), this.dataCache = null
        },
        isDark: function(a, b) {
            if (0 > a || this.moduleCount <= a || 0 > b || this.moduleCount <= b) throw new Error(a + "," + b);
            return this.modules[a][b]
        },
        getModuleCount: function() {
            return this.moduleCount
        },
        make: function() {
            this.makeImpl(!1, this.getBestMaskPattern())
        },
        makeImpl: function(a, c) {
            this.moduleCount = 4 * this.typeNumber + 17, this.modules = new Array(this.moduleCount);
            for (var d = 0; d < this.moduleCount; d++) {
                this.modules[d] = new Array(this.moduleCount);
                for (var e = 0; e < this.moduleCount; e++) this.modules[d][e] = null
            }
            this.setupPositionProbePattern(0, 0), this.setupPositionProbePattern(this.moduleCount - 7, 0), this.setupPositionProbePattern(0, this.moduleCount - 7), this.setupPositionAdjustPattern(), this.setupTimingPattern(), this.setupTypeInfo(a, c), this.typeNumber >= 7 && this.setupTypeNumber(a), null == this.dataCache && (this.dataCache = b.createData(this.typeNumber, this.errorCorrectLevel, this.dataList)), this.mapData(this.dataCache, c)
        },
        setupPositionProbePattern: function(a, b) {
            for (var c = -1; 7 >= c; c++)
                if (!(-1 >= a + c || this.moduleCount <= a + c))
                    for (var d = -1; 7 >= d; d++) - 1 >= b + d || this.moduleCount <= b + d || (this.modules[a + c][b + d] = c >= 0 && 6 >= c && (0 == d || 6 == d) || d >= 0 && 6 >= d && (0 == c || 6 == c) || c >= 2 && 4 >= c && d >= 2 && 4 >= d ? !0 : !1)
        },
        getBestMaskPattern: function() {
            for (var a = 0, b = 0, c = 0; 8 > c; c++) {
                this.makeImpl(!0, c);
                var d = m.getLostPoint(this);
                (0 == c || a > d) && (a = d, b = c)
            }
            return b
        },
        createMovieClip: function(a, b, c) {
            var d = a.createEmptyMovieClip(b, c),
                e = 1;
            this.make();
            for (var f = 0; f < this.modules.length; f++)
                for (var g = f * e, h = 0; h < this.modules[f].length; h++) {
                    var i = h * e,
                        j = this.modules[f][h];
                    j && (d.beginFill(0, 100), d.moveTo(i, g), d.lineTo(i + e, g), d.lineTo(i + e, g + e), d.lineTo(i, g + e), d.endFill())
                }
            return d
        },
        setupTimingPattern: function() {
            for (var a = 8; a < this.moduleCount - 8; a++) null == this.modules[a][6] && (this.modules[a][6] = a % 2 == 0);
            for (var b = 8; b < this.moduleCount - 8; b++) null == this.modules[6][b] && (this.modules[6][b] = b % 2 == 0)
        },
        setupPositionAdjustPattern: function() {
            for (var a = m.getPatternPosition(this.typeNumber), b = 0; b < a.length; b++)
                for (var c = 0; c < a.length; c++) {
                    var d = a[b],
                        e = a[c];
                    if (null == this.modules[d][e])
                        for (var f = -2; 2 >= f; f++)
                            for (var g = -2; 2 >= g; g++) this.modules[d + f][e + g] = -2 == f || 2 == f || -2 == g || 2 == g || 0 == f && 0 == g ? !0 : !1
                }
        },
        setupTypeNumber: function(a) {
            for (var b = m.getBCHTypeNumber(this.typeNumber), c = 0; 18 > c; c++) {
                var d = !a && 1 == (b >> c & 1);
                this.modules[Math.floor(c / 3)][c % 3 + this.moduleCount - 8 - 3] = d
            }
            for (var c = 0; 18 > c; c++) {
                var d = !a && 1 == (b >> c & 1);
                this.modules[c % 3 + this.moduleCount - 8 - 3][Math.floor(c / 3)] = d
            }
        },
        setupTypeInfo: function(a, b) {
            for (var c = this.errorCorrectLevel << 3 | b, d = m.getBCHTypeInfo(c), e = 0; 15 > e; e++) {
                var f = !a && 1 == (d >> e & 1);
                6 > e ? this.modules[e][8] = f : 8 > e ? this.modules[e + 1][8] = f : this.modules[this.moduleCount - 15 + e][8] = f
            }
            for (var e = 0; 15 > e; e++) {
                var f = !a && 1 == (d >> e & 1);
                8 > e ? this.modules[8][this.moduleCount - e - 1] = f : 9 > e ? this.modules[8][15 - e - 1 + 1] = f : this.modules[8][15 - e - 1] = f
            }
            this.modules[this.moduleCount - 8][8] = !a
        },
        mapData: function(a, b) {
            for (var c = -1, d = this.moduleCount - 1, e = 7, f = 0, g = this.moduleCount - 1; g > 0; g -= 2)
                for (6 == g && g--;;) {
                    for (var h = 0; 2 > h; h++)
                        if (null == this.modules[d][g - h]) {
                            var i = !1;
                            f < a.length && (i = 1 == (a[f] >>> e & 1));
                            var j = m.getMask(b, d, g - h);
                            j && (i = !i), this.modules[d][g - h] = i, e--, -1 == e && (f++, e = 7)
                        }
                    if (d += c, 0 > d || this.moduleCount <= d) {
                        d -= c, c = -c;
                        break
                    }
                }
        }
    }, b.PAD0 = 236, b.PAD1 = 17, b.createData = function(a, c, f) {
        for (var g = d.getRSBlocks(a, c), h = new e, i = 0; i < f.length; i++) {
            var j = f[i];
            h.put(j.mode, 4), h.put(j.getLength(), m.getLengthInBits(j.mode, a)), j.write(h)
        }
        for (var k = 0, i = 0; i < g.length; i++) k += g[i].dataCount;
        if (h.getLengthInBits() > 8 * k) throw new Error("code length overflow. (" + h.getLengthInBits() + ">" + 8 * k + ")");
        for (h.getLengthInBits() + 4 <= 8 * k && h.put(0, 4); h.getLengthInBits() % 8 != 0;) h.putBit(!1);
        for (; !(h.getLengthInBits() >= 8 * k) && (h.put(b.PAD0, 8), !(h.getLengthInBits() >= 8 * k));) h.put(b.PAD1, 8);
        return b.createBytes(h, g)
    }, b.createBytes = function(a, b) {
        for (var d = 0, e = 0, f = 0, g = new Array(b.length), h = new Array(b.length), i = 0; i < b.length; i++) {
            var j = b[i].dataCount,
                k = b[i].totalCount - j;
            e = Math.max(e, j), f = Math.max(f, k), g[i] = new Array(j);
            for (var l = 0; l < g[i].length; l++) g[i][l] = 255 & a.buffer[l + d];
            d += j;
            var n = m.getErrorCorrectPolynomial(k),
                o = new c(g[i], n.getLength() - 1),
                p = o.mod(n);
            h[i] = new Array(n.getLength() - 1);
            for (var l = 0; l < h[i].length; l++) {
                var q = l + p.getLength() - h[i].length;
                h[i][l] = q >= 0 ? p.get(q) : 0
            }
        }
        for (var r = 0, l = 0; l < b.length; l++) r += b[l].totalCount;
        for (var s = new Array(r), t = 0, l = 0; e > l; l++)
            for (var i = 0; i < b.length; i++) l < g[i].length && (s[t++] = g[i][l]);
        for (var l = 0; f > l; l++)
            for (var i = 0; i < b.length; i++) l < h[i].length && (s[t++] = h[i][l]);
        return s
    };
    for (var j = {
        MODE_NUMBER: 1,
        MODE_ALPHA_NUM: 2,
        MODE_8BIT_BYTE: 4,
        MODE_KANJI: 8
    }, k = {
        L: 1,
        M: 0,
        Q: 3,
        H: 2
    }, l = {
        PATTERN000: 0,
        PATTERN001: 1,
        PATTERN010: 2,
        PATTERN011: 3,
        PATTERN100: 4,
        PATTERN101: 5,
        PATTERN110: 6,
        PATTERN111: 7
    }, m = {
        PATTERN_POSITION_TABLE: [
            [],
            [6, 18],
            [6, 22],
            [6, 26],
            [6, 30],
            [6, 34],
            [6, 22, 38],
            [6, 24, 42],
            [6, 26, 46],
            [6, 28, 50],
            [6, 30, 54],
            [6, 32, 58],
            [6, 34, 62],
            [6, 26, 46, 66],
            [6, 26, 48, 70],
            [6, 26, 50, 74],
            [6, 30, 54, 78],
            [6, 30, 56, 82],
            [6, 30, 58, 86],
            [6, 34, 62, 90],
            [6, 28, 50, 72, 94],
            [6, 26, 50, 74, 98],
            [6, 30, 54, 78, 102],
            [6, 28, 54, 80, 106],
            [6, 32, 58, 84, 110],
            [6, 30, 58, 86, 114],
            [6, 34, 62, 90, 118],
            [6, 26, 50, 74, 98, 122],
            [6, 30, 54, 78, 102, 126],
            [6, 26, 52, 78, 104, 130],
            [6, 30, 56, 82, 108, 134],
            [6, 34, 60, 86, 112, 138],
            [6, 30, 58, 86, 114, 142],
            [6, 34, 62, 90, 118, 146],
            [6, 30, 54, 78, 102, 126, 150],
            [6, 24, 50, 76, 102, 128, 154],
            [6, 28, 54, 80, 106, 132, 158],
            [6, 32, 58, 84, 110, 136, 162],
            [6, 26, 54, 82, 110, 138, 166],
            [6, 30, 58, 86, 114, 142, 170]
        ],
        G15: 1335,
        G18: 7973,
        G15_MASK: 21522,
        getBCHTypeInfo: function(a) {
            for (var b = a << 10; m.getBCHDigit(b) - m.getBCHDigit(m.G15) >= 0;) b ^= m.G15 << m.getBCHDigit(b) - m.getBCHDigit(m.G15);
            return (a << 10 | b) ^ m.G15_MASK
        },
        getBCHTypeNumber: function(a) {
            for (var b = a << 12; m.getBCHDigit(b) - m.getBCHDigit(m.G18) >= 0;) b ^= m.G18 << m.getBCHDigit(b) - m.getBCHDigit(m.G18);
            return a << 12 | b
        },
        getBCHDigit: function(a) {
            for (var b = 0; 0 != a;) b++, a >>>= 1;
            return b
        },
        getPatternPosition: function(a) {
            return m.PATTERN_POSITION_TABLE[a - 1]
        },
        getMask: function(a, b, c) {
            switch (a) {
                case l.PATTERN000:
                    return (b + c) % 2 == 0;
                case l.PATTERN001:
                    return b % 2 == 0;
                case l.PATTERN010:
                    return c % 3 == 0;
                case l.PATTERN011:
                    return (b + c) % 3 == 0;
                case l.PATTERN100:
                    return (Math.floor(b / 2) + Math.floor(c / 3)) % 2 == 0;
                case l.PATTERN101:
                    return b * c % 2 + b * c % 3 == 0;
                case l.PATTERN110:
                    return (b * c % 2 + b * c % 3) % 2 == 0;
                case l.PATTERN111:
                    return (b * c % 3 + (b + c) % 2) % 2 == 0;
                default:
                    throw new Error("bad maskPattern:" + a)
            }
        },
        getErrorCorrectPolynomial: function(a) {
            for (var b = new c([1], 0), d = 0; a > d; d++) b = b.multiply(new c([1, n.gexp(d)], 0));
            return b
        },
        getLengthInBits: function(a, b) {
            if (b >= 1 && 10 > b) switch (a) {
                case j.MODE_NUMBER:
                    return 10;
                case j.MODE_ALPHA_NUM:
                    return 9;
                case j.MODE_8BIT_BYTE:
                    return 8;
                case j.MODE_KANJI:
                    return 8;
                default:
                    throw new Error("mode:" + a)
            } else if (27 > b) switch (a) {
                case j.MODE_NUMBER:
                    return 12;
                case j.MODE_ALPHA_NUM:
                    return 11;
                case j.MODE_8BIT_BYTE:
                    return 16;
                case j.MODE_KANJI:
                    return 10;
                default:
                    throw new Error("mode:" + a)
            } else {
                if (!(41 > b)) throw new Error("type:" + b);
                switch (a) {
                    case j.MODE_NUMBER:
                        return 14;
                    case j.MODE_ALPHA_NUM:
                        return 13;
                    case j.MODE_8BIT_BYTE:
                        return 16;
                    case j.MODE_KANJI:
                        return 12;
                    default:
                        throw new Error("mode:" + a)
                }
            }
        },
        getLostPoint: function(a) {
            for (var b = a.getModuleCount(), c = 0, d = 0; b > d; d++)
                for (var e = 0; b > e; e++) {
                    for (var f = 0, g = a.isDark(d, e), h = -1; 1 >= h; h++)
                        if (!(0 > d + h || d + h >= b))
                            for (var i = -1; 1 >= i; i++) 0 > e + i || e + i >= b || (0 != h || 0 != i) && g == a.isDark(d + h, e + i) && f++;
                    f > 5 && (c += 3 + f - 5)
                }
            for (var d = 0; b - 1 > d; d++)
                for (var e = 0; b - 1 > e; e++) {
                    var j = 0;
                    a.isDark(d, e) && j++, a.isDark(d + 1, e) && j++, a.isDark(d, e + 1) && j++, a.isDark(d + 1, e + 1) && j++, (0 == j || 4 == j) && (c += 3)
                }
            for (var d = 0; b > d; d++)
                for (var e = 0; b - 6 > e; e++) a.isDark(d, e) && !a.isDark(d, e + 1) && a.isDark(d, e + 2) && a.isDark(d, e + 3) && a.isDark(d, e + 4) && !a.isDark(d, e + 5) && a.isDark(d, e + 6) && (c += 40);
            for (var e = 0; b > e; e++)
                for (var d = 0; b - 6 > d; d++) a.isDark(d, e) && !a.isDark(d + 1, e) && a.isDark(d + 2, e) && a.isDark(d + 3, e) && a.isDark(d + 4, e) && !a.isDark(d + 5, e) && a.isDark(d + 6, e) && (c += 40);
            for (var k = 0, e = 0; b > e; e++)
                for (var d = 0; b > d; d++) a.isDark(d, e) && k++;
            var l = Math.abs(100 * k / b / b - 50) / 5;
            return c += 10 * l
        }
    }, n = {
        glog: function(a) {
            if (1 > a) throw new Error("glog(" + a + ")");
            return n.LOG_TABLE[a]
        },
        gexp: function(a) {
            for (; 0 > a;) a += 255;
            for (; a >= 256;) a -= 255;
            return n.EXP_TABLE[a]
        },
        EXP_TABLE: new Array(256),
        LOG_TABLE: new Array(256)
    }, o = 0; 8 > o; o++) n.EXP_TABLE[o] = 1 << o;
    for (var o = 8; 256 > o; o++) n.EXP_TABLE[o] = n.EXP_TABLE[o - 4] ^ n.EXP_TABLE[o - 5] ^ n.EXP_TABLE[o - 6] ^ n.EXP_TABLE[o - 8];
    for (var o = 0; 255 > o; o++) n.LOG_TABLE[n.EXP_TABLE[o]] = o;
    c.prototype = {
        get: function(a) {
            return this.num[a]
        },
        getLength: function() {
            return this.num.length
        },
        multiply: function(a) {
            for (var b = new Array(this.getLength() + a.getLength() - 1), d = 0; d < this.getLength(); d++)
                for (var e = 0; e < a.getLength(); e++) b[d + e] ^= n.gexp(n.glog(this.get(d)) + n.glog(a.get(e)));
            return new c(b, 0)
        },
        mod: function(a) {
            if (this.getLength() - a.getLength() < 0) return this;
            for (var b = n.glog(this.get(0)) - n.glog(a.get(0)), d = new Array(this.getLength()), e = 0; e < this.getLength(); e++) d[e] = this.get(e);
            for (var e = 0; e < a.getLength(); e++) d[e] ^= n.gexp(n.glog(a.get(e)) + b);
            return new c(d, 0).mod(a)
        }
    }, d.RS_BLOCK_TABLE = [
        [1, 26, 19],
        [1, 26, 16],
        [1, 26, 13],
        [1, 26, 9],
        [1, 44, 34],
        [1, 44, 28],
        [1, 44, 22],
        [1, 44, 16],
        [1, 70, 55],
        [1, 70, 44],
        [2, 35, 17],
        [2, 35, 13],
        [1, 100, 80],
        [2, 50, 32],
        [2, 50, 24],
        [4, 25, 9],
        [1, 134, 108],
        [2, 67, 43],
        [2, 33, 15, 2, 34, 16],
        [2, 33, 11, 2, 34, 12],
        [2, 86, 68],
        [4, 43, 27],
        [4, 43, 19],
        [4, 43, 15],
        [2, 98, 78],
        [4, 49, 31],
        [2, 32, 14, 4, 33, 15],
        [4, 39, 13, 1, 40, 14],
        [2, 121, 97],
        [2, 60, 38, 2, 61, 39],
        [4, 40, 18, 2, 41, 19],
        [4, 40, 14, 2, 41, 15],
        [2, 146, 116],
        [3, 58, 36, 2, 59, 37],
        [4, 36, 16, 4, 37, 17],
        [4, 36, 12, 4, 37, 13],
        [2, 86, 68, 2, 87, 69],
        [4, 69, 43, 1, 70, 44],
        [6, 43, 19, 2, 44, 20],
        [6, 43, 15, 2, 44, 16],
        [4, 101, 81],
        [1, 80, 50, 4, 81, 51],
        [4, 50, 22, 4, 51, 23],
        [3, 36, 12, 8, 37, 13],
        [2, 116, 92, 2, 117, 93],
        [6, 58, 36, 2, 59, 37],
        [4, 46, 20, 6, 47, 21],
        [7, 42, 14, 4, 43, 15],
        [4, 133, 107],
        [8, 59, 37, 1, 60, 38],
        [8, 44, 20, 4, 45, 21],
        [12, 33, 11, 4, 34, 12],
        [3, 145, 115, 1, 146, 116],
        [4, 64, 40, 5, 65, 41],
        [11, 36, 16, 5, 37, 17],
        [11, 36, 12, 5, 37, 13],
        [5, 109, 87, 1, 110, 88],
        [5, 65, 41, 5, 66, 42],
        [5, 54, 24, 7, 55, 25],
        [11, 36, 12],
        [5, 122, 98, 1, 123, 99],
        [7, 73, 45, 3, 74, 46],
        [15, 43, 19, 2, 44, 20],
        [3, 45, 15, 13, 46, 16],
        [1, 135, 107, 5, 136, 108],
        [10, 74, 46, 1, 75, 47],
        [1, 50, 22, 15, 51, 23],
        [2, 42, 14, 17, 43, 15],
        [5, 150, 120, 1, 151, 121],
        [9, 69, 43, 4, 70, 44],
        [17, 50, 22, 1, 51, 23],
        [2, 42, 14, 19, 43, 15],
        [3, 141, 113, 4, 142, 114],
        [3, 70, 44, 11, 71, 45],
        [17, 47, 21, 4, 48, 22],
        [9, 39, 13, 16, 40, 14],
        [3, 135, 107, 5, 136, 108],
        [3, 67, 41, 13, 68, 42],
        [15, 54, 24, 5, 55, 25],
        [15, 43, 15, 10, 44, 16],
        [4, 144, 116, 4, 145, 117],
        [17, 68, 42],
        [17, 50, 22, 6, 51, 23],
        [19, 46, 16, 6, 47, 17],
        [2, 139, 111, 7, 140, 112],
        [17, 74, 46],
        [7, 54, 24, 16, 55, 25],
        [34, 37, 13],
        [4, 151, 121, 5, 152, 122],
        [4, 75, 47, 14, 76, 48],
        [11, 54, 24, 14, 55, 25],
        [16, 45, 15, 14, 46, 16],
        [6, 147, 117, 4, 148, 118],
        [6, 73, 45, 14, 74, 46],
        [11, 54, 24, 16, 55, 25],
        [30, 46, 16, 2, 47, 17],
        [8, 132, 106, 4, 133, 107],
        [8, 75, 47, 13, 76, 48],
        [7, 54, 24, 22, 55, 25],
        [22, 45, 15, 13, 46, 16],
        [10, 142, 114, 2, 143, 115],
        [19, 74, 46, 4, 75, 47],
        [28, 50, 22, 6, 51, 23],
        [33, 46, 16, 4, 47, 17],
        [8, 152, 122, 4, 153, 123],
        [22, 73, 45, 3, 74, 46],
        [8, 53, 23, 26, 54, 24],
        [12, 45, 15, 28, 46, 16],
        [3, 147, 117, 10, 148, 118],
        [3, 73, 45, 23, 74, 46],
        [4, 54, 24, 31, 55, 25],
        [11, 45, 15, 31, 46, 16],
        [7, 146, 116, 7, 147, 117],
        [21, 73, 45, 7, 74, 46],
        [1, 53, 23, 37, 54, 24],
        [19, 45, 15, 26, 46, 16],
        [5, 145, 115, 10, 146, 116],
        [19, 75, 47, 10, 76, 48],
        [15, 54, 24, 25, 55, 25],
        [23, 45, 15, 25, 46, 16],
        [13, 145, 115, 3, 146, 116],
        [2, 74, 46, 29, 75, 47],
        [42, 54, 24, 1, 55, 25],
        [23, 45, 15, 28, 46, 16],
        [17, 145, 115],
        [10, 74, 46, 23, 75, 47],
        [10, 54, 24, 35, 55, 25],
        [19, 45, 15, 35, 46, 16],
        [17, 145, 115, 1, 146, 116],
        [14, 74, 46, 21, 75, 47],
        [29, 54, 24, 19, 55, 25],
        [11, 45, 15, 46, 46, 16],
        [13, 145, 115, 6, 146, 116],
        [14, 74, 46, 23, 75, 47],
        [44, 54, 24, 7, 55, 25],
        [59, 46, 16, 1, 47, 17],
        [12, 151, 121, 7, 152, 122],
        [12, 75, 47, 26, 76, 48],
        [39, 54, 24, 14, 55, 25],
        [22, 45, 15, 41, 46, 16],
        [6, 151, 121, 14, 152, 122],
        [6, 75, 47, 34, 76, 48],
        [46, 54, 24, 10, 55, 25],
        [2, 45, 15, 64, 46, 16],
        [17, 152, 122, 4, 153, 123],
        [29, 74, 46, 14, 75, 47],
        [49, 54, 24, 10, 55, 25],
        [24, 45, 15, 46, 46, 16],
        [4, 152, 122, 18, 153, 123],
        [13, 74, 46, 32, 75, 47],
        [48, 54, 24, 14, 55, 25],
        [42, 45, 15, 32, 46, 16],
        [20, 147, 117, 4, 148, 118],
        [40, 75, 47, 7, 76, 48],
        [43, 54, 24, 22, 55, 25],
        [10, 45, 15, 67, 46, 16],
        [19, 148, 118, 6, 149, 119],
        [18, 75, 47, 31, 76, 48],
        [34, 54, 24, 34, 55, 25],
        [20, 45, 15, 61, 46, 16]
    ], d.getRSBlocks = function(a, b) {
        var c = d.getRsBlockTable(a, b);
        if (void 0 == c) throw new Error("bad rs block @ typeNumber:" + a + "/errorCorrectLevel:" + b);
        for (var e = c.length / 3, f = [], g = 0; e > g; g++)
            for (var h = c[3 * g + 0], i = c[3 * g + 1], j = c[3 * g + 2], k = 0; h > k; k++) f.push(new d(i, j));
        return f
    }, d.getRsBlockTable = function(a, b) {
        switch (b) {
            case k.L:
                return d.RS_BLOCK_TABLE[4 * (a - 1) + 0];
            case k.M:
                return d.RS_BLOCK_TABLE[4 * (a - 1) + 1];
            case k.Q:
                return d.RS_BLOCK_TABLE[4 * (a - 1) + 2];

            case k.H:
                return d.RS_BLOCK_TABLE[4 * (a - 1) + 3];
            default:
                return
        }
    }, e.prototype = {
        get: function(a) {
            var b = Math.floor(a / 8);
            return 1 == (this.buffer[b] >>> 7 - a % 8 & 1)
        },
        put: function(a, b) {
            for (var c = 0; b > c; c++) this.putBit(1 == (a >>> b - c - 1 & 1))
        },
        getLengthInBits: function() {
            return this.length
        },
        putBit: function(a) {
            var b = Math.floor(this.length / 8);
            this.buffer.length <= b && this.buffer.push(0), a && (this.buffer[b] |= 128 >>> this.length % 8), this.length++
        }
    };
    var p = [
            [17, 14, 11, 7],
            [32, 26, 20, 14],
            [53, 42, 32, 24],
            [78, 62, 46, 34],
            [106, 84, 60, 44],
            [134, 106, 74, 58],
            [154, 122, 86, 64],
            [192, 152, 108, 84],
            [230, 180, 130, 98],
            [271, 213, 151, 119],
            [321, 251, 177, 137],
            [367, 287, 203, 155],
            [425, 331, 241, 177],
            [458, 362, 258, 194],
            [520, 412, 292, 220],
            [586, 450, 322, 250],
            [644, 504, 364, 280],
            [718, 560, 394, 310],
            [792, 624, 442, 338],
            [858, 666, 482, 382],
            [929, 711, 509, 403],
            [1003, 779, 565, 439],
            [1091, 857, 611, 461],
            [1171, 911, 661, 511],
            [1273, 997, 715, 535],
            [1367, 1059, 751, 593],
            [1465, 1125, 805, 625],
            [1528, 1190, 868, 658],
            [1628, 1264, 908, 698],
            [1732, 1370, 982, 742],
            [1840, 1452, 1030, 790],
            [1952, 1538, 1112, 842],
            [2068, 1628, 1168, 898],
            [2188, 1722, 1228, 958],
            [2303, 1809, 1283, 983],
            [2431, 1911, 1351, 1051],
            [2563, 1989, 1423, 1093],
            [2699, 2099, 1499, 1139],
            [2809, 2213, 1579, 1219],
            [2953, 2331, 1663, 1273]
        ],
        q = function() {
            var a = function(a, b) {
                this._el = a, this._htOption = b
            };
            return a.prototype.draw = function(a) {
                function b(a, b) {
                    var c = document.createElementNS("http://www.w3.org/2000/svg", a);
                    for (var d in b) b.hasOwnProperty(d) && c.setAttribute(d, b[d]);
                    return c
                } {
                    var c = this._htOption,
                        d = this._el,
                        e = a.getModuleCount();
                    Math.floor(c.width / e), Math.floor(c.height / e)
                }
                this.clear();
                var f = b("svg", {
                    viewBox: "0 0 " + String(e) + " " + String(e),
                    width: "100%",
                    height: "100%",
                    fill: c.colorLight
                });
                f.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink"), d.appendChild(f), f.appendChild(b("rect", {
                    fill: c.colorLight,
                    width: "100%",
                    height: "100%"
                })), f.appendChild(b("rect", {
                    fill: c.colorDark,
                    width: "1",
                    height: "1",
                    id: "template"
                }));
                for (var g = 0; e > g; g++)
                    for (var h = 0; e > h; h++)
                        if (a.isDark(g, h)) {
                            var i = b("use", {
                                x: String(h),
                                y: String(g)
                            });
                            i.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#template"), f.appendChild(i)
                        }
            }, a.prototype.clear = function() {
                for (; this._el.hasChildNodes();) this._el.removeChild(this._el.lastChild)
            }, a
        }(),
        r = "svg" === document.documentElement.tagName.toLowerCase(),
        s = r ? q : f() ? function() {
            function a() {
                this._elImage.src = this._elCanvas.toDataURL("image/png"), this._elImage.style.display = "block", this._elCanvas.style.display = "none"
            }

            function b(a, b) {
                var c = this;
                if (c._fFail = b, c._fSuccess = a, null === c._bSupportDataURI) {
                    var d = document.createElement("img"),
                        e = function() {
                            c._bSupportDataURI = !1, c._fFail && c._fFail.call(c)
                        },
                        f = function() {
                            c._bSupportDataURI = !0, c._fSuccess && c._fSuccess.call(c)
                        };
                    return d.onabort = e, d.onerror = e, d.onload = f, void(d.src = "data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")
                }
                c._bSupportDataURI === !0 && c._fSuccess ? c._fSuccess.call(c) : c._bSupportDataURI === !1 && c._fFail && c._fFail.call(c)
            }
            if (this._android && this._android <= 2.1) {
                var c = 1 / window.devicePixelRatio,
                    d = CanvasRenderingContext2D.prototype.drawImage;
                CanvasRenderingContext2D.prototype.drawImage = function(a, b, e, f, g, h, i, j) {
                    if ("nodeName" in a && /img/i.test(a.nodeName))
                        for (var k = arguments.length - 1; k >= 1; k--) arguments[k] = arguments[k] * c;
                    else "undefined" == typeof j && (arguments[1] *= c, arguments[2] *= c, arguments[3] *= c, arguments[4] *= c);
                    d.apply(this, arguments)
                }
            }
            var e = function(a, b) {
                this._bIsPainted = !1, this._android = g(), this._htOption = b, this._elCanvas = document.createElement("canvas"), this._elCanvas.width = b.width, this._elCanvas.height = b.height, a.appendChild(this._elCanvas), this._el = a, this._oContext = this._elCanvas.getContext("2d"), this._bIsPainted = !1, this._elImage = document.createElement("img"), this._elImage.alt = "Scan me!", this._elImage.style.display = "none", this._el.appendChild(this._elImage), this._bSupportDataURI = null
            };
            return e.prototype.draw = function(a) {
                var b = this._elImage,
                    c = this._oContext,
                    d = this._htOption,
                    e = a.getModuleCount(),
                    f = d.width / e,
                    g = d.height / e,
                    h = Math.round(f),
                    i = Math.round(g);
                b.style.display = "none", this.clear();
                for (var j = 0; e > j; j++)
                    for (var k = 0; e > k; k++) {
                        var l = a.isDark(j, k),
                            m = k * f,
                            n = j * g;
                        c.strokeStyle = l ? d.colorDark : d.colorLight, c.lineWidth = 1, c.fillStyle = l ? d.colorDark : d.colorLight, c.fillRect(m, n, f, g), c.strokeRect(Math.floor(m) + .5, Math.floor(n) + .5, h, i), c.strokeRect(Math.ceil(m) - .5, Math.ceil(n) - .5, h, i)
                    }
                this._bIsPainted = !0
            }, e.prototype.makeImage = function() {
                this._bIsPainted && b.call(this, a)
            }, e.prototype.isPainted = function() {
                return this._bIsPainted
            }, e.prototype.clear = function() {
                this._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height), this._bIsPainted = !1
            }, e.prototype.round = function(a) {
                return a ? Math.floor(1e3 * a) / 1e3 : a
            }, e
        }() : function() {
            var a = function(a, b) {
                this._el = a, this._htOption = b
            };
            return a.prototype.draw = function(a) {
                for (var b = this._htOption, c = this._el, d = a.getModuleCount(), e = Math.floor(b.width / d), f = Math.floor(b.height / d), g = ['<table style="border:0;border-collapse:collapse;">'], h = 0; d > h; h++) {
                    g.push("<tr>");
                    for (var i = 0; d > i; i++) g.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:' + e + "px;height:" + f + "px;background-color:" + (a.isDark(h, i) ? b.colorDark : b.colorLight) + ';"></td>');
                    g.push("</tr>")
                }
                g.push("</table>"), c.innerHTML = g.join("");
                var j = c.childNodes[0],
                    k = (b.width - j.offsetWidth) / 2,
                    l = (b.height - j.offsetHeight) / 2;
                k > 0 && l > 0 && (j.style.margin = l + "px " + k + "px")
            }, a.prototype.clear = function() {
                this._el.innerHTML = ""
            }, a
        }();
    QRCode = function(a, b) {
        if (this._htOption = {
                width: 256,
                height: 256,
                typeNumber: 4,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: k.H
            }, "string" == typeof b && (b = {
                text: b
            }), b)
            for (var c in b) this._htOption[c] = b[c];
        "string" == typeof a && (a = document.getElementById(a)), this._htOption.useSVG && (s = q), this._android = g(), this._el = a, this._oQRCode = null, this._oDrawing = new s(this._el, this._htOption), this._htOption.text && this.makeCode(this._htOption.text)
    }, QRCode.prototype.makeCode = function(a) {
        this._oQRCode = new b(h(a, this._htOption.correctLevel), this._htOption.correctLevel), this._oQRCode.addData(a), this._oQRCode.make(), this._el.title = a, this._oDrawing.draw(this._oQRCode), this.makeImage()
    }, QRCode.prototype.makeImage = function() {
        "function" == typeof this._oDrawing.makeImage && (!this._android || this._android >= 3) && this._oDrawing.makeImage()
    }, QRCode.prototype.clear = function() {
        this._oDrawing.clear()
    }, QRCode.CorrectLevel = k
}(), ! function(a) {
    "use strict";
    "function" == typeof define && define.amd ? define(["jquery"], a) : "object" == typeof exports ? module.exports = a(require("jquery")) : a(jQuery)
}(function(a) {
    "use strict";

    function b() {
        var a = document.createElement("input");
        return a.setAttribute("type", "range"), "text" !== a.type
    }

    function c(a, b) {
        var c = Array.prototype.slice.call(arguments, 2);
        return setTimeout(function() {
            return a.apply(null, c)
        }, b)
    }

    function d(a, b) {
        return b = b || 100,
            function() {
                if (!a.debouncing) {
                    var c = Array.prototype.slice.apply(arguments);
                    a.lastReturnVal = a.apply(window, c), a.debouncing = !0
                }
                return clearTimeout(a.debounceTimeout), a.debounceTimeout = setTimeout(function() {
                    a.debouncing = !1
                }, b), a.lastReturnVal
            }
    }

    function e(a) {
        return a && (0 === a.offsetWidth || 0 === a.offsetHeight || a.open === !1)
    }

    function f(a) {
        for (var b = [], c = a.parentNode; e(c);) b.push(c), c = c.parentNode;
        return b
    }

    function g(a, b) {
        function c(a) {
            "undefined" != typeof a.open && (a.open = a.open ? !1 : !0)
        }
        var d = f(a),
            e = d.length,
            g = [],
            h = a[b];
        if (e) {
            for (var i = 0; e > i; i++) g[i] = d[i].style.cssText, d[i].style.display = "block", d[i].style.height = "0", d[i].style.overflow = "hidden", d[i].style.visibility = "hidden", c(d[i]);
            h = a[b];
            for (var j = 0; e > j; j++) d[j].style.cssText = g[j], c(d[j])
        }
        return h
    }

    function h(a, b) {
        var c = parseFloat(a);
        return Number.isNaN(c) ? b : c
    }

    function i(a) {
        return a.charAt(0).toUpperCase() + a.substr(1)
    }

    function j(b, e) {
        if (this.$window = a(window), this.$document = a(document), this.$element = a(b), this.options = a.extend({}, n, e), this.polyfill = this.options.polyfill, this.orientation = this.$element[0].getAttribute("data-orientation") || this.options.orientation, this.onInit = this.options.onInit, this.onSlide = this.options.onSlide, this.onSlideEnd = this.options.onSlideEnd, this.DIMENSION = o.orientation[this.orientation].dimension, this.DIRECTION = o.orientation[this.orientation].direction, this.DIRECTION_STYLE = o.orientation[this.orientation].directionStyle, this.COORDINATE = o.orientation[this.orientation].coordinate, this.polyfill && m) return !1;
        this.identifier = "js-" + k + "-" + l++, this.startEvent = this.options.startEvent.join("." + this.identifier + " ") + "." + this.identifier, this.moveEvent = this.options.moveEvent.join("." + this.identifier + " ") + "." + this.identifier, this.endEvent = this.options.endEvent.join("." + this.identifier + " ") + "." + this.identifier, this.toFixed = (this.step + "").replace(".", "").length - 1, this.$fill = a('<div class="' + this.options.fillClass + '" />'), this.$handle = a('<div class="' + this.options.handleClass + '" />'), this.$range = a('<div class="' + this.options.rangeClass + " " + this.options[this.orientation + "Class"] + '" id="' + this.identifier + '" />').insertAfter(this.$element).prepend(this.$fill, this.$handle), this.$element.css({
            position: "absolute",
            width: "1px",
            height: "1px",
            overflow: "hidden",
            opacity: "0"
        }), this.handleDown = a.proxy(this.handleDown, this), this.handleMove = a.proxy(this.handleMove, this), this.handleEnd = a.proxy(this.handleEnd, this), this.init();
        var f = this;
        this.$window.on("resize." + this.identifier, d(function() {
            c(function() {
                f.update()
            }, 300)
        }, 20)), this.$document.on(this.startEvent, "#" + this.identifier + ":not(." + this.options.disabledClass + ")", this.handleDown), this.$element.on("change." + this.identifier, function(a, b) {
            if (!b || b.origin !== f.identifier) {
                var c = a.target.value,
                    d = f.getPositionFromValue(c);
                f.setPosition(d)
            }
        })
    }
    Number.isNaN = Number.isNaN || function(a) {
            return "number" == typeof a && a !== a
        };
    var k = "rangeslider",
        l = 0,
        m = b(),
        n = {
            polyfill: !0,
            orientation: "horizontal",
            rangeClass: "rangeslider",
            disabledClass: "rangeslider--disabled",
            horizontalClass: "rangeslider--horizontal",
            verticalClass: "rangeslider--vertical",
            fillClass: "rangeslider__fill",
            handleClass: "rangeslider__handle",
            startEvent: ["mousedown", "touchstart", "pointerdown"],
            moveEvent: ["mousemove", "touchmove", "pointermove"],
            endEvent: ["mouseup", "touchend", "pointerup"]
        },
        o = {
            orientation: {
                horizontal: {
                    dimension: "width",
                    direction: "left",
                    directionStyle: "left",
                    coordinate: "x"
                },
                vertical: {
                    dimension: "height",
                    direction: "top",
                    directionStyle: "bottom",
                    coordinate: "y"
                }
            }
        };
    j.prototype.init = function() {
        this.update(!0, !1), this.onInit && "function" == typeof this.onInit && this.onInit()
    }, j.prototype.update = function(a, b) {
        a = a || !1, a && (this.min = h(this.$element[0].getAttribute("min"), 0), this.max = h(this.$element[0].getAttribute("max"), 100), this.value = h(this.$element[0].value, Math.round(this.min + (this.max - this.min) / 2)), this.step = h(this.$element[0].getAttribute("step"), 1)), this.handleDimension = g(this.$handle[0], "offset" + i(this.DIMENSION)), this.rangeDimension = g(this.$range[0], "offset" + i(this.DIMENSION)), this.maxHandlePos = this.rangeDimension - this.handleDimension, this.grabPos = this.handleDimension / 2, this.position = this.getPositionFromValue(this.value), this.$element[0].disabled ? this.$range.addClass(this.options.disabledClass) : this.$range.removeClass(this.options.disabledClass), this.setPosition(this.position, b)
    }, j.prototype.handleDown = function(a) {
        if (this.$document.on(this.moveEvent, this.handleMove), this.$document.on(this.endEvent, this.handleEnd), !((" " + a.target.className + " ").replace(/[\n\t]/g, " ").indexOf(this.options.handleClass) > -1)) {
            var b = this.getRelativePosition(a),
                c = this.$range[0].getBoundingClientRect()[this.DIRECTION],
                d = this.getPositionFromNode(this.$handle[0]) - c,
                e = "vertical" === this.orientation ? this.maxHandlePos - (b - this.grabPos) : b - this.grabPos;
            this.setPosition(e), b >= d && b < d + this.handleDimension && (this.grabPos = b - d)
        }
    }, j.prototype.handleMove = function(a) {
        a.preventDefault();
        var b = this.getRelativePosition(a),
            c = "vertical" === this.orientation ? this.maxHandlePos - (b - this.grabPos) : b - this.grabPos;
        this.setPosition(c)
    }, j.prototype.handleEnd = function(a) {
        a.preventDefault(), this.$document.off(this.moveEvent, this.handleMove), this.$document.off(this.endEvent, this.handleEnd), this.$element.trigger("change", {
            origin: this.identifier
        }), this.onSlideEnd && "function" == typeof this.onSlideEnd && this.onSlideEnd(this.position, this.value)
    }, j.prototype.cap = function(a, b, c) {
        return b > a ? b : a > c ? c : a
    }, j.prototype.setPosition = function(a, b) {
        var c, d;
        void 0 === b && (b = !0), c = this.getValueFromPosition(this.cap(a, 0, this.maxHandlePos)), d = this.getPositionFromValue(c), this.$fill[0].style[this.DIMENSION] = d + this.grabPos + "px", this.$handle[0].style[this.DIRECTION_STYLE] = d + "px", this.setValue(c), this.position = d, this.value = c, b && this.onSlide && "function" == typeof this.onSlide && this.onSlide(d, c)
    }, j.prototype.getPositionFromNode = function(a) {
        for (var b = 0; null !== a;) b += a.offsetLeft, a = a.offsetParent;
        return b
    }, j.prototype.getRelativePosition = function(a) {
        var b = i(this.COORDINATE),
            c = this.$range[0].getBoundingClientRect()[this.DIRECTION],
            d = 0;
        return "undefined" != typeof a["page" + b] ? d = a["client" + b] : "undefined" != typeof a.originalEvent["client" + b] ? d = a.originalEvent["client" + b] : a.originalEvent.touches && a.originalEvent.touches[0] && "undefined" != typeof a.originalEvent.touches[0]["client" + b] ? d = a.originalEvent.touches[0]["client" + b] : a.currentPoint && "undefined" != typeof a.currentPoint[this.COORDINATE] && (d = a.currentPoint[this.COORDINATE]), d - c
    }, j.prototype.getPositionFromValue = function(a) {
        var b, c;
        return b = (a - this.min) / (this.max - this.min), c = Number.isNaN(b) ? 0 : b * this.maxHandlePos
    }, j.prototype.getValueFromPosition = function(a) {
        var b, c;
        return b = a / (this.maxHandlePos || 1), c = this.step * Math.round(b * (this.max - this.min) / this.step) + this.min, Number(c.toFixed(this.toFixed))
    }, j.prototype.setValue = function(a) {
        (a !== this.value || "" === this.$element[0].value) && this.$element.val(a).trigger("input", {
            origin: this.identifier
        })
    }, j.prototype.destroy = function() {
        this.$document.off("." + this.identifier), this.$window.off("." + this.identifier), this.$element.off("." + this.identifier).removeAttr("style").removeData("plugin_" + k), this.$range && this.$range.length && this.$range[0].parentNode.removeChild(this.$range[0])
    }, a.fn[k] = function(b) {
        var c = Array.prototype.slice.call(arguments, 1);
        return this.each(function() {
            var d = a(this),
                e = d.data("plugin_" + k);
            e || d.data("plugin_" + k, e = new j(this, b)), "string" == typeof b && e[b].apply(e, c)
        })
    }
}), ! function(a) {
    "use strict";
    "function" == typeof define && define.amd ? define(["jquery"], a) : "object" == typeof exports && "object" == typeof module ? module.exports = a : a(jQuery)
}(function(a, b) {
    "use strict";

    function c(b, c, d, e) {
        for (var f = [], g = 0; g < b.length; g++) {
            var h = b[g];
            if (h) {
                var i = tinycolor(h),
                    j = i.toHsl().l < .5 ? "sp-thumb-el sp-thumb-dark" : "sp-thumb-el sp-thumb-light";
                j += tinycolor.equals(c, h) ? " sp-thumb-active" : "";
                var k = i.toString(e.preferredFormat || "rgb"),
                    l = q ? "background-color:" + i.toRgbString() : "filter:" + i.toFilter();
                f.push('<span title="' + k + '" data-color="' + i.toRgbString() + '" class="' + j + '"><span class="sp-thumb-inner" style="' + l + ';" /></span>')
            } else {
                var m = "sp-clear-display";
                f.push(a("<div />").append(a('<span data-color="" style="background-color:transparent;" class="' + m + '"></span>').attr("title", e.noColorSelectedText)).html())
            }
        }
        return "<div class='sp-cf " + d + "'>" + f.join("") + "</div>"
    }

    function d() {
        for (var a = 0; a < o.length; a++) o[a] && o[a].hide()
    }

    function e(b, c) {
        var d = a.extend({}, n, b);
        return d.callbacks = {
            move: j(d.move, c),
            change: j(d.change, c),
            show: j(d.show, c),
            hide: j(d.hide, c),
            beforeShow: j(d.beforeShow, c)
        }, d
    }

    function f(f, h) {
        function j() {
            if (U.showPaletteOnly && (U.showPalette = !0), Ma.text(U.showPaletteOnly ? U.togglePaletteMoreText : U.togglePaletteLessText), U.palette) {
                na = U.palette.slice(0), oa = a.isArray(na[0]) ? na : [na], pa = {};
                for (var b = 0; b < oa.length; b++)
                    for (var c = 0; c < oa[b].length; c++) {
                        var d = tinycolor(oa[b][c]).toRgbString();
                        pa[d] = !0
                    }
            }
            xa.toggleClass("sp-flat", V), xa.toggleClass("sp-input-disabled", !U.showInput), xa.toggleClass("sp-alpha-enabled", U.showAlpha), xa.toggleClass("sp-clear-enabled", Za), xa.toggleClass("sp-buttons-disabled", !U.showButtons), xa.toggleClass("sp-palette-buttons-disabled", !U.togglePaletteOnly), xa.toggleClass("sp-palette-disabled", !U.showPalette), xa.toggleClass("sp-palette-only", U.showPaletteOnly), xa.toggleClass("sp-initial-disabled", !U.showInitial), xa.addClass(U.className).addClass(U.containerClassName), O()
        }

        function n() {
            function b(b) {
                return b.data && b.data.ignore ? (H(a(b.target).closest(".sp-thumb-el").data("color")), K()) : (H(a(b.target).closest(".sp-thumb-el").data("color")), K(), N(!0), U.hideAfterPaletteSelect && F()), !1
            }
            if (p && xa.find("*:not(input)").attr("unselectable", "on"), j(), Pa && va.after(Qa).hide(), Za || Ka.hide(), V) va.after(xa).hide();
            else {
                var c = "parent" === U.appendTo ? va.parent() : a(U.appendTo);
                1 !== c.length && (c = a("body")), c.append(xa)
            }
            t(), Ra.bind("click.spectrum touchstart.spectrum", function(b) {
                wa || B(), b.stopPropagation(), a(b.target).is("input") || b.preventDefault()
            }), (va.is(":disabled") || U.disabled === !0) && S(), xa.click(i), Ga.change(A), Ga.bind("paste", function() {
                setTimeout(A, 1)
            }), Ga.keydown(function(a) {
                13 == a.keyCode && A()
            }), Ja.text(U.cancelText), Ja.bind("click.spectrum", function(a) {
                a.stopPropagation(), a.preventDefault(), G(), F()
            }), Ka.attr("title", U.clearText), Ka.bind("click.spectrum", function(a) {
                a.stopPropagation(), a.preventDefault(), Ya = !0, K(), V && N(!0)
            }), La.text(U.chooseText), La.bind("click.spectrum", function(a) {
                a.stopPropagation(), a.preventDefault(), p && Ga.is(":focus") && Ga.trigger("change"), J() && (N(!0), F())
            }), Ma.text(U.showPaletteOnly ? U.togglePaletteMoreText : U.togglePaletteLessText), Ma.bind("click.spectrum", function(a) {
                a.stopPropagation(), a.preventDefault(), U.showPaletteOnly = !U.showPaletteOnly, U.showPaletteOnly || V || xa.css("left", "-=" + (ya.outerWidth(!0) + 5)), j()
            }), k(Ea, function(a, b, c) {
                ma = a / ga, Ya = !1, c.shiftKey && (ma = Math.round(10 * ma) / 10), K()
            }, y, z), k(Ba, function(a, b) {
                ja = parseFloat(b / ea), Ya = !1, U.showAlpha || (ma = 1), K()
            }, y, z), k(za, function(a, b, c) {
                if (c.shiftKey) {
                    if (!ta) {
                        var d = ka * ba,
                            e = ca - la * ca,
                            f = Math.abs(a - d) > Math.abs(b - e);
                        ta = f ? "x" : "y"
                    }
                } else ta = null;
                var g = !ta || "x" === ta,
                    h = !ta || "y" === ta;
                g && (ka = parseFloat(a / ba)), h && (la = parseFloat((ca - b) / ca)), Ya = !1, U.showAlpha || (ma = 1), K()
            }, y, z), Ta ? (H(Ta), L(), Wa = Va || tinycolor(Ta).format, u(Ta)) : L(), V && C();
            var d = p ? "mousedown.spectrum" : "click.spectrum touchstart.spectrum";
            Ha.delegate(".sp-thumb-el", d, b), Ia.delegate(".sp-thumb-el:nth-child(1)", d, {
                ignore: !0
            }, b)
        }

        function t() {
            if (X && window.localStorage) {
                try {
                    var b = window.localStorage[X].split(",#");
                    b.length > 1 && (delete window.localStorage[X], a.each(b, function(a, b) {
                        u(b)
                    }))
                } catch (c) {}
                try {
                    qa = window.localStorage[X].split(";")
                } catch (c) {}
            }
        }

        function u(b) {
            if (W) {
                var c = tinycolor(b).toRgbString();
                if (!pa[c] && -1 === a.inArray(c, qa))
                    for (qa.push(c); qa.length > ra;) qa.shift();
                if (X && window.localStorage) try {
                    window.localStorage[X] = qa.join(";")
                } catch (d) {}
            }
        }

        function v() {
            var a = [];
            if (U.showPalette)
                for (var b = 0; b < qa.length; b++) {
                    var c = tinycolor(qa[b]).toRgbString();
                    pa[c] || a.push(qa[b])
                }
            return a.reverse().slice(0, U.maxSelectionSize)
        }

        function w() {
            var b = I(),
                d = a.map(oa, function(a, d) {
                    return c(a, b, "sp-palette-row sp-palette-row-" + d, U)
                });
            t(), qa && d.push(c(v(), b, "sp-palette-row sp-palette-row-selection", U)), Ha.html(d.join(""))
        }

        function x() {
            if (U.showInitial) {
                var a = Ua,
                    b = I();
                Ia.html(c([a, b], b, "sp-palette-row-initial", U))
            }
        }

        function y() {
            (0 >= ca || 0 >= ba || 0 >= ea) && O(), aa = !0, xa.addClass(sa), ta = null, va.trigger("dragstart.spectrum", [I()])
        }

        function z() {
            aa = !1, xa.removeClass(sa), va.trigger("dragstop.spectrum", [I()])
        }

        function A() {
            var a = Ga.val();
            if (null !== a && "" !== a || !Za) {
                var b = tinycolor(a);
                b.isValid() ? (H(b), N(!0)) : Ga.addClass("sp-validation-error")
            } else H(null), N(!0)
        }

        function B() {
            _ ? F() : C()
        }

        function C() {
            var b = a.Event("beforeShow.spectrum");
            return _ ? void O() : (va.trigger(b, [I()]), void(Z.beforeShow(I()) === !1 || b.isDefaultPrevented() || (d(), _ = !0, a(ua).bind("keydown.spectrum", D), a(ua).bind("click.spectrum", E), a(window).bind("resize.spectrum", $), Qa.addClass("sp-active"), xa.removeClass("sp-hidden"), O(), L(), Ua = I(), x(), Z.show(Ua), va.trigger("show.spectrum", [Ua]))))
        }

        function D(a) {
            27 === a.keyCode && F()
        }

        function E(a) {
            2 != a.button && (aa || (Xa ? N(!0) : G(), F()))
        }

        function F() {
            _ && !V && (_ = !1, a(ua).unbind("keydown.spectrum", D), a(ua).unbind("click.spectrum", E), a(window).unbind("resize.spectrum", $), Qa.removeClass("sp-active"), xa.addClass("sp-hidden"), Z.hide(I()), va.trigger("hide.spectrum", [I()]))
        }

        function G() {
            H(Ua, !0)
        }

        function H(a, b) {
            if (tinycolor.equals(a, I())) return void L();
            var c, d;
            !a && Za ? Ya = !0 : (Ya = !1, c = tinycolor(a), d = c.toHsv(), ja = d.h % 360 / 360, ka = d.s, la = d.v, ma = d.a), L(), c && c.isValid() && !b && (Wa = Va || c.getFormat())
        }

        function I(a) {
            return a = a || {}, Za && Ya ? null : tinycolor.fromRatio({
                h: ja,
                s: ka,
                v: la,
                a: Math.round(100 * ma) / 100
            }, {
                format: a.format || Wa
            })
        }

        function J() {
            return !Ga.hasClass("sp-validation-error")
        }

        function K() {
            L(), Z.move(I()), va.trigger("move.spectrum", [I()])
        }

        function L() {
            Ga.removeClass("sp-validation-error"), M();
            var a = tinycolor.fromRatio({
                h: ja,
                s: 1,
                v: 1
            });
            za.css("background-color", a.toHexString());
            var b = Wa;
            1 > ma && (0 !== ma || "name" !== b) && ("hex" === b || "hex3" === b || "hex6" === b || "name" === b) && (b = "rgb");
            var c = I({
                    format: b
                }),
                d = "";
            if (Sa.removeClass("sp-clear-display"), Sa.css("background-color", "transparent"), !c && Za) Sa.addClass("sp-clear-display");
            else {
                var e = c.toHexString(),
                    f = c.toRgbString();
                if (q || 1 === c.alpha ? Sa.css("background-color", f) : (Sa.css("background-color", "transparent"), Sa.css("filter", c.toFilter())), U.showAlpha) {
                    var g = c.toRgb();
                    g.a = 0;
                    var h = tinycolor(g).toRgbString(),
                        i = "linear-gradient(left, " + h + ", " + e + ")";
                    p ? Da.css("filter", tinycolor(h).toFilter({
                        gradientType: 1
                    }, e)) : (Da.css("background", "-webkit-" + i), Da.css("background", "-moz-" + i), Da.css("background", "-ms-" + i), Da.css("background", "linear-gradient(to right, " + h + ", " + e + ")"))
                }
                d = c.toString(b)
            }
            U.showInput && Ga.val(d), U.showPalette && w(), x()
        }

        function M() {
            var a = ka,
                b = la;
            if (Za && Ya) Fa.hide(), Ca.hide(), Aa.hide();
            else {
                Fa.show(), Ca.show(), Aa.show();
                var c = a * ba,
                    d = ca - b * ca;
                c = Math.max(-da, Math.min(ba - da, c - da)), d = Math.max(-da, Math.min(ca - da, d - da)), Aa.css({
                    top: d + "px",
                    left: c + "px"
                });
                var e = ma * ga;
                Fa.css({
                    left: e - ha / 2 + "px"
                });
                var f = ja * ea;
                Ca.css({
                    top: f - ia + "px"
                })
            }
        }

        function N(a) {
            var b = I(),
                c = "",
                d = !tinycolor.equals(b, Ua);
            b && (c = b.toString(Wa), u(b)), Na && va.val(c), a && d && (Z.change(b), va.trigger("change", [b]))
        }

        function O() {
            ba = za.width(), ca = za.height(), da = Aa.height(), fa = Ba.width(), ea = Ba.height(), ia = Ca.height(), ga = Ea.width(), ha = Fa.width(), V || (xa.css("position", "absolute"), xa.offset(U.offset ? U.offset : g(xa, Ra))), M(), U.showPalette && w(), va.trigger("reflow.spectrum")
        }

        function P() {
            va.show(), Ra.unbind("click.spectrum touchstart.spectrum"), xa.remove(), Qa.remove(), o[$a.id] = null
        }

        function Q(c, d) {
            return c === b ? a.extend({}, U) : d === b ? U[c] : (U[c] = d, void j())
        }

        function R() {
            wa = !1, va.attr("disabled", !1), Ra.removeClass("sp-disabled")
        }

        function S() {
            F(), wa = !0, va.attr("disabled", !0), Ra.addClass("sp-disabled")
        }

        function T(a) {
            U.offset = a, O()
        }
        var U = e(h, f),
            V = U.flat,
            W = U.showSelectionPalette,
            X = U.localStorageKey,
            Y = U.theme,
            Z = U.callbacks,
            $ = l(O, 10),
            _ = !1,
            aa = !1,
            ba = 0,
            ca = 0,
            da = 0,
            ea = 0,
            fa = 0,
            ga = 0,
            ha = 0,
            ia = 0,
            ja = 0,
            ka = 0,
            la = 0,
            ma = 1,
            na = [],
            oa = [],
            pa = {},
            qa = U.selectionPalette.slice(0),
            ra = U.maxSelectionSize,
            sa = "sp-dragging",
            ta = null,
            ua = f.ownerDocument,
            va = (ua.body, a(f)),
            wa = !1,
            xa = a(s, ua).addClass(Y),
            ya = xa.find(".sp-picker-container"),
            za = xa.find(".sp-color"),
            Aa = xa.find(".sp-dragger"),
            Ba = xa.find(".sp-hue"),
            Ca = xa.find(".sp-slider"),
            Da = xa.find(".sp-alpha-inner"),
            Ea = xa.find(".sp-alpha"),
            Fa = xa.find(".sp-alpha-handle"),
            Ga = xa.find(".sp-input"),
            Ha = xa.find(".sp-palette"),
            Ia = xa.find(".sp-initial"),
            Ja = xa.find(".sp-cancel"),
            Ka = xa.find(".sp-clear"),
            La = xa.find(".sp-choose"),
            Ma = xa.find(".sp-palette-toggle"),
            Na = va.is("input"),
            Oa = Na && "color" === va.attr("type") && m(),
            Pa = Na && !V,
            Qa = Pa ? a(r).addClass(Y).addClass(U.className).addClass(U.replacerClassName) : a([]),
            Ra = Pa ? Qa : va,
            Sa = Qa.find(".sp-preview-inner"),
            Ta = U.color || Na && va.val(),
            Ua = !1,
            Va = U.preferredFormat,
            Wa = Va,
            Xa = !U.showButtons || U.clickoutFiresChange,
            Ya = !Ta,
            Za = U.allowEmpty && !Oa;
        n();
        var $a = {
            show: C,
            hide: F,
            toggle: B,
            reflow: O,
            option: Q,
            enable: R,
            disable: S,
            offset: T,
            set: function(a) {
                H(a), N()
            },
            get: I,
            destroy: P,
            container: xa
        };
        return $a.id = o.push($a) - 1, $a
    }

    function g(b, c) {
        var d = 0,
            e = b.outerWidth(),
            f = b.outerHeight(),
            g = c.outerHeight(),
            h = b[0].ownerDocument,
            i = h.documentElement,
            j = i.clientWidth + a(h).scrollLeft(),
            k = i.clientHeight + a(h).scrollTop(),
            l = c.offset();
        return l.top += g, l.left -= Math.min(l.left, l.left + e > j && j > e ? Math.abs(l.left + e - j) : 0), l.top -= Math.min(l.top, l.top + f > k && k > f ? Math.abs(f + g - d) : d), l
    }

    function h() {}

    function i(a) {
        a.stopPropagation()
    }

    function j(a, b) {
        var c = Array.prototype.slice,
            d = c.call(arguments, 2);
        return function() {
            return a.apply(b, d.concat(c.call(arguments)))
        }
    }

    function k(b, c, d, e) {
        function f(a) {
            a.stopPropagation && a.stopPropagation(), a.preventDefault && a.preventDefault(), a.returnValue = !1
        }

        function g(a) {
            if (k) {
                if (p && j.documentMode < 9 && !a.button) return i();
                var d = a.originalEvent && a.originalEvent.touches && a.originalEvent.touches[0],
                    e = d && d.pageX || a.pageX,
                    g = d && d.pageY || a.pageY,
                    h = Math.max(0, Math.min(e - l.left, n)),
                    q = Math.max(0, Math.min(g - l.top, m));
                o && f(a), c.apply(b, [h, q, a])
            }
        }

        function h(c) {
            var e = c.which ? 3 == c.which : 2 == c.button;
            e || k || d.apply(b, arguments) !== !1 && (k = !0, m = a(b).height(), n = a(b).width(), l = a(b).offset(), a(j).bind(q), a(j.body).addClass("sp-dragging"), g(c), f(c))
        }

        function i() {
            k && (a(j).unbind(q), a(j.body).removeClass("sp-dragging"), setTimeout(function() {
                e.apply(b, arguments)
            }, 0)), k = !1
        }
        c = c || function() {}, d = d || function() {}, e = e || function() {};
        var j = document,
            k = !1,
            l = {},
            m = 0,
            n = 0,
            o = "ontouchstart" in window,
            q = {};
        q.selectstart = f, q.dragstart = f, q["touchmove mousemove"] = g, q["touchend mouseup"] = i, a(b).bind("touchstart mousedown", h)
    }

    function l(a, b, c) {
        var d;
        return function() {
            var e = this,
                f = arguments,
                g = function() {
                    d = null, a.apply(e, f)
                };
            c && clearTimeout(d), (c || !d) && (d = setTimeout(g, b))
        }
    }

    function m() {
        return a.fn.spectrum.inputTypeColorSupport()
    }
    var n = {
            beforeShow: h,
            move: h,
            change: h,
            show: h,
            hide: h,
            color: !1,
            flat: !1,
            showInput: !1,
            allowEmpty: !1,
            showButtons: !0,
            clickoutFiresChange: !0,
            showInitial: !1,
            showPalette: !1,
            showPaletteOnly: !1,
            hideAfterPaletteSelect: !1,
            togglePaletteOnly: !1,
            showSelectionPalette: !0,
            localStorageKey: !1,
            appendTo: "body",
            maxSelectionSize: 7,
            cancelText: "cancel",
            chooseText: "choose",
            togglePaletteMoreText: "more",
            togglePaletteLessText: "less",
            clearText: "Clear Color Selection",
            noColorSelectedText: "No Color Selected",
            preferredFormat: !1,
            className: "",
            containerClassName: "",
            replacerClassName: "",
            showAlpha: !1,
            theme: "sp-light",
            palette: [
                ["#ffffff", "#000000", "#ff0000", "#ff8000", "#ffff00", "#008000", "#0000ff", "#4b0082", "#9400d3"]
            ],
            selectionPalette: [],
            disabled: !1,
            offset: null
        },
        o = [],
        p = !!/msie/i.exec(window.navigator.userAgent),
        q = function() {
            function a(a, b) {
                return !!~("" + a).indexOf(b)
            }
            var b = document.createElement("div"),
                c = b.style;
            return c.cssText = "background-color:rgba(0,0,0,.5)", a(c.backgroundColor, "rgba") || a(c.backgroundColor, "hsla")
        }(),
        r = ["<div class='sp-replacer'>", "<div class='sp-preview'><div class='sp-preview-inner'></div></div>", "<div class='sp-dd'>&#9660;</div>", "</div>"].join(""),
        s = function() {
            var a = "";
            if (p)
                for (var b = 1; 6 >= b; b++) a += "<div class='sp-" + b + "'></div>";
            return ["<div class='sp-container sp-hidden'>", "<div class='sp-palette-container'>", "<div class='sp-palette sp-thumb sp-cf'></div>", "<div class='sp-palette-button-container sp-cf'>", "<button type='button' class='sp-palette-toggle'></button>", "</div>", "</div>", "<div class='sp-picker-container'>", "<div class='sp-top sp-cf'>", "<div class='sp-fill'></div>", "<div class='sp-top-inner'>", "<div class='sp-color'>", "<div class='sp-sat'>", "<div class='sp-val'>", "<div class='sp-dragger'></div>", "</div>", "</div>", "</div>", "<div class='sp-clear sp-clear-display'>", "</div>", "<div class='sp-hue'>", "<div class='sp-slider'></div>", a, "</div>", "</div>", "<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>", "</div>", "<div class='sp-input-container sp-cf'>", "<input class='sp-input' type='text' spellcheck='false'  />", "</div>", "<div class='sp-initial sp-thumb sp-cf'></div>", "<div class='sp-button-container sp-cf'>", "<a class='sp-cancel' href='#'></a>", "<button type='button' class='sp-choose'></button>", "</div>", "</div>", "</div>"].join("")
        }(),
        t = "spectrum.id";
    a.fn.spectrum = function(b) {
        if ("string" == typeof b) {
            var c = this,
                d = Array.prototype.slice.call(arguments, 1);
            return this.each(function() {
                var e = o[a(this).data(t)];
                if (e) {
                    var f = e[b];
                    if (!f) throw new Error("Spectrum: no such method: '" + b + "'");
                    "get" == b ? c = e.get() : "container" == b ? c = e.container : "option" == b ? c = e.option.apply(e, d) : "destroy" == b ? (e.destroy(), a(this).removeData(t)) : f.apply(e, d)
                }
            }), c
        }
        return this.spectrum("destroy").each(function() {
            var c = a.extend({}, b, a(this).data()),
                d = f(this, c);
            a(this).data(t, d.id)
        })
    }, a.fn.spectrum.load = !0, a.fn.spectrum.loadOpts = {}, a.fn.spectrum.draggable = k, a.fn.spectrum.defaults = n, a.fn.spectrum.inputTypeColorSupport = function u() {
        if ("undefined" == typeof u._cachedResult) {
            var b = a("<input type='color'/>")[0];
            u._cachedResult = "color" === b.type && "" !== b.value
        }
        return u._cachedResult
    }, a.spectrum = {}, a.spectrum.localization = {}, a.spectrum.palettes = {}, a.fn.spectrum.processNativeColorInputs = function() {
        var b = a("input[type=color]");
        b.length && !m() && b.spectrum({
            preferredFormat: "hex6"
        })
    },
        function() {
            function a(a) {
                var c = {
                        r: 0,
                        g: 0,
                        b: 0
                    },
                    e = 1,
                    g = !1,
                    h = !1;
                return "string" == typeof a && (a = G(a)), "object" == typeof a && (a.hasOwnProperty("r") && a.hasOwnProperty("g") && a.hasOwnProperty("b") ? (c = b(a.r, a.g, a.b), g = !0, h = "%" === String(a.r).substr(-1) ? "prgb" : "rgb") : a.hasOwnProperty("h") && a.hasOwnProperty("s") && a.hasOwnProperty("v") ? (a.s = D(a.s), a.v = D(a.v), c = f(a.h, a.s, a.v), g = !0, h = "hsv") : a.hasOwnProperty("h") && a.hasOwnProperty("s") && a.hasOwnProperty("l") && (a.s = D(a.s), a.l = D(a.l), c = d(a.h, a.s, a.l), g = !0, h = "hsl"), a.hasOwnProperty("a") && (e = a.a)), e = w(e), {
                    ok: g,
                    format: a.format || h,
                    r: M(255, N(c.r, 0)),
                    g: M(255, N(c.g, 0)),
                    b: M(255, N(c.b, 0)),
                    a: e
                }
            }

            function b(a, b, c) {
                return {
                    r: 255 * x(a, 255),
                    g: 255 * x(b, 255),
                    b: 255 * x(c, 255)
                }
            }

            function c(a, b, c) {
                a = x(a, 255), b = x(b, 255), c = x(c, 255);
                var d, e, f = N(a, b, c),
                    g = M(a, b, c),
                    h = (f + g) / 2;
                if (f == g) d = e = 0;
                else {
                    var i = f - g;
                    switch (e = h > .5 ? i / (2 - f - g) : i / (f + g), f) {
                        case a:
                            d = (b - c) / i + (c > b ? 6 : 0);
                            break;
                        case b:
                            d = (c - a) / i + 2;
                            break;
                        case c:
                            d = (a - b) / i + 4
                    }
                    d /= 6
                }
                return {
                    h: d,
                    s: e,
                    l: h
                }
            }

            function d(a, b, c) {
                function d(a, b, c) {
                    return 0 > c && (c += 1), c > 1 && (c -= 1), 1 / 6 > c ? a + 6 * (b - a) * c : .5 > c ? b : 2 / 3 > c ? a + (b - a) * (2 / 3 - c) * 6 : a
                }
                var e, f, g;
                if (a = x(a, 360), b = x(b, 100), c = x(c, 100), 0 === b) e = f = g = c;
                else {
                    var h = .5 > c ? c * (1 + b) : c + b - c * b,
                        i = 2 * c - h;
                    e = d(i, h, a + 1 / 3), f = d(i, h, a), g = d(i, h, a - 1 / 3)
                }
                return {
                    r: 255 * e,
                    g: 255 * f,
                    b: 255 * g
                }
            }

            function e(a, b, c) {
                a = x(a, 255), b = x(b, 255), c = x(c, 255);
                var d, e, f = N(a, b, c),
                    g = M(a, b, c),
                    h = f,
                    i = f - g;
                if (e = 0 === f ? 0 : i / f, f == g) d = 0;
                else {
                    switch (f) {
                        case a:
                            d = (b - c) / i + (c > b ? 6 : 0);
                            break;
                        case b:
                            d = (c - a) / i + 2;
                            break;
                        case c:
                            d = (a - b) / i + 4
                    }
                    d /= 6
                }
                return {
                    h: d,
                    s: e,
                    v: h
                }
            }

            function f(a, b, c) {
                a = 6 * x(a, 360), b = x(b, 100), c = x(c, 100);
                var d = K.floor(a),
                    e = a - d,
                    f = c * (1 - b),
                    g = c * (1 - e * b),
                    h = c * (1 - (1 - e) * b),
                    i = d % 6,
                    j = [c, g, f, f, h, c][i],
                    k = [h, c, c, g, f, f][i],
                    l = [f, f, h, c, c, g][i];
                return {
                    r: 255 * j,
                    g: 255 * k,
                    b: 255 * l
                }
            }

            function g(a, b, c, d) {
                var e = [C(L(a).toString(16)), C(L(b).toString(16)), C(L(c).toString(16))];
                return d && e[0].charAt(0) == e[0].charAt(1) && e[1].charAt(0) == e[1].charAt(1) && e[2].charAt(0) == e[2].charAt(1) ? e[0].charAt(0) + e[1].charAt(0) + e[2].charAt(0) : e.join("")
            }

            function h(a, b, c, d) {
                var e = [C(E(d)), C(L(a).toString(16)), C(L(b).toString(16)), C(L(c).toString(16))];
                return e.join("")
            }

            function i(a, b) {
                b = 0 === b ? 0 : b || 10;
                var c = P(a).toHsl();
                return c.s -= b / 100, c.s = y(c.s), P(c)
            }

            function j(a, b) {
                b = 0 === b ? 0 : b || 10;
                var c = P(a).toHsl();
                return c.s += b / 100, c.s = y(c.s), P(c)
            }

            function k(a) {
                return P(a).desaturate(100)
            }

            function l(a, b) {
                b = 0 === b ? 0 : b || 10;
                var c = P(a).toHsl();
                return c.l += b / 100, c.l = y(c.l), P(c)
            }

            function m(a, b) {
                b = 0 === b ? 0 : b || 10;
                var c = P(a).toRgb();
                return c.r = N(0, M(255, c.r - L(255 * -(b / 100)))), c.g = N(0, M(255, c.g - L(255 * -(b / 100)))), c.b = N(0, M(255, c.b - L(255 * -(b / 100)))), P(c)
            }

            function n(a, b) {
                b = 0 === b ? 0 : b || 10;
                var c = P(a).toHsl();
                return c.l -= b / 100, c.l = y(c.l), P(c)
            }

            function o(a, b) {
                var c = P(a).toHsl(),
                    d = (L(c.h) + b) % 360;
                return c.h = 0 > d ? 360 + d : d, P(c)
            }

            function p(a) {
                var b = P(a).toHsl();
                return b.h = (b.h + 180) % 360, P(b)
            }

            function q(a) {
                var b = P(a).toHsl(),
                    c = b.h;
                return [P(a), P({
                    h: (c + 120) % 360,
                    s: b.s,
                    l: b.l
                }), P({
                    h: (c + 240) % 360,
                    s: b.s,
                    l: b.l
                })]
            }

            function r(a) {
                var b = P(a).toHsl(),
                    c = b.h;
                return [P(a), P({
                    h: (c + 90) % 360,
                    s: b.s,
                    l: b.l
                }), P({
                    h: (c + 180) % 360,
                    s: b.s,
                    l: b.l
                }), P({
                    h: (c + 270) % 360,
                    s: b.s,
                    l: b.l
                })]
            }

            function s(a) {
                var b = P(a).toHsl(),
                    c = b.h;
                return [P(a), P({
                    h: (c + 72) % 360,
                    s: b.s,
                    l: b.l
                }), P({
                    h: (c + 216) % 360,
                    s: b.s,
                    l: b.l
                })]
            }

            function t(a, b, c) {
                b = b || 6, c = c || 30;
                var d = P(a).toHsl(),
                    e = 360 / c,
                    f = [P(a)];
                for (d.h = (d.h - (e * b >> 1) + 720) % 360; --b;) d.h = (d.h + e) % 360, f.push(P(d));
                return f
            }

            function u(a, b) {
                b = b || 6;
                for (var c = P(a).toHsv(), d = c.h, e = c.s, f = c.v, g = [], h = 1 / b; b--;) g.push(P({
                    h: d,
                    s: e,
                    v: f
                })), f = (f + h) % 1;
                return g
            }

            function v(a) {
                var b = {};
                for (var c in a) a.hasOwnProperty(c) && (b[a[c]] = c);

                return b
            }

            function w(a) {
                return a = parseFloat(a), (isNaN(a) || 0 > a || a > 1) && (a = 1), a
            }

            function x(a, b) {
                A(a) && (a = "100%");
                var c = B(a);
                return a = M(b, N(0, parseFloat(a))), c && (a = parseInt(a * b, 10) / 100), K.abs(a - b) < 1e-6 ? 1 : a % b / parseFloat(b)
            }

            function y(a) {
                return M(1, N(0, a))
            }

            function z(a) {
                return parseInt(a, 16)
            }

            function A(a) {
                return "string" == typeof a && -1 != a.indexOf(".") && 1 === parseFloat(a)
            }

            function B(a) {
                return "string" == typeof a && -1 != a.indexOf("%")
            }

            function C(a) {
                return 1 == a.length ? "0" + a : "" + a
            }

            function D(a) {
                return 1 >= a && (a = 100 * a + "%"), a
            }

            function E(a) {
                return Math.round(255 * parseFloat(a)).toString(16)
            }

            function F(a) {
                return z(a) / 255
            }

            function G(a) {
                a = a.replace(H, "").replace(I, "").toLowerCase();
                var b = !1;
                if (Q[a]) a = Q[a], b = !0;
                else if ("transparent" == a) return {
                    r: 0,
                    g: 0,
                    b: 0,
                    a: 0,
                    format: "name"
                };
                var c;
                return (c = S.rgb.exec(a)) ? {
                    r: c[1],
                    g: c[2],
                    b: c[3]
                } : (c = S.rgba.exec(a)) ? {
                    r: c[1],
                    g: c[2],
                    b: c[3],
                    a: c[4]
                } : (c = S.hsl.exec(a)) ? {
                    h: c[1],
                    s: c[2],
                    l: c[3]
                } : (c = S.hsla.exec(a)) ? {
                    h: c[1],
                    s: c[2],
                    l: c[3],
                    a: c[4]
                } : (c = S.hsv.exec(a)) ? {
                    h: c[1],
                    s: c[2],
                    v: c[3]
                } : (c = S.hsva.exec(a)) ? {
                    h: c[1],
                    s: c[2],
                    v: c[3],
                    a: c[4]
                } : (c = S.hex8.exec(a)) ? {
                    a: F(c[1]),
                    r: z(c[2]),
                    g: z(c[3]),
                    b: z(c[4]),
                    format: b ? "name" : "hex8"
                } : (c = S.hex6.exec(a)) ? {
                    r: z(c[1]),
                    g: z(c[2]),
                    b: z(c[3]),
                    format: b ? "name" : "hex"
                } : (c = S.hex3.exec(a)) ? {
                    r: z(c[1] + "" + c[1]),
                    g: z(c[2] + "" + c[2]),
                    b: z(c[3] + "" + c[3]),
                    format: b ? "name" : "hex"
                } : !1
            }
            var H = /^[\s,#]+/,
                I = /\s+$/,
                J = 0,
                K = Math,
                L = K.round,
                M = K.min,
                N = K.max,
                O = K.random,
                P = function(b, c) {
                    if (b = b ? b : "", c = c || {}, b instanceof P) return b;
                    if (!(this instanceof P)) return new P(b, c);
                    var d = a(b);
                    this._originalInput = b, this._r = d.r, this._g = d.g, this._b = d.b, this._a = d.a, this._roundA = L(100 * this._a) / 100, this._format = c.format || d.format, this._gradientType = c.gradientType, this._r < 1 && (this._r = L(this._r)), this._g < 1 && (this._g = L(this._g)), this._b < 1 && (this._b = L(this._b)), this._ok = d.ok, this._tc_id = J++
                };
            P.prototype = {
                isDark: function() {
                    return this.getBrightness() < 128
                },
                isLight: function() {
                    return !this.isDark()
                },
                isValid: function() {
                    return this._ok
                },
                getOriginalInput: function() {
                    return this._originalInput
                },
                getFormat: function() {
                    return this._format
                },
                getAlpha: function() {
                    return this._a
                },
                getBrightness: function() {
                    var a = this.toRgb();
                    return (299 * a.r + 587 * a.g + 114 * a.b) / 1e3
                },
                setAlpha: function(a) {
                    return this._a = w(a), this._roundA = L(100 * this._a) / 100, this
                },
                toHsv: function() {
                    var a = e(this._r, this._g, this._b);
                    return {
                        h: 360 * a.h,
                        s: a.s,
                        v: a.v,
                        a: this._a
                    }
                },
                toHsvString: function() {
                    var a = e(this._r, this._g, this._b),
                        b = L(360 * a.h),
                        c = L(100 * a.s),
                        d = L(100 * a.v);
                    return 1 == this._a ? "hsv(" + b + ", " + c + "%, " + d + "%)" : "hsva(" + b + ", " + c + "%, " + d + "%, " + this._roundA + ")"
                },
                toHsl: function() {
                    var a = c(this._r, this._g, this._b);
                    return {
                        h: 360 * a.h,
                        s: a.s,
                        l: a.l,
                        a: this._a
                    }
                },
                toHslString: function() {
                    var a = c(this._r, this._g, this._b),
                        b = L(360 * a.h),
                        d = L(100 * a.s),
                        e = L(100 * a.l);
                    return 1 == this._a ? "hsl(" + b + ", " + d + "%, " + e + "%)" : "hsla(" + b + ", " + d + "%, " + e + "%, " + this._roundA + ")"
                },
                toHex: function(a) {
                    return g(this._r, this._g, this._b, a)
                },
                toHexString: function(a) {
                    return "#" + this.toHex(a)
                },
                toHex8: function() {
                    return h(this._r, this._g, this._b, this._a)
                },
                toHex8String: function() {
                    return "#" + this.toHex8()
                },
                toRgb: function() {
                    return {
                        r: L(this._r),
                        g: L(this._g),
                        b: L(this._b),
                        a: this._a
                    }
                },
                toRgbString: function() {
                    return 1 == this._a ? "rgb(" + L(this._r) + ", " + L(this._g) + ", " + L(this._b) + ")" : "rgba(" + L(this._r) + ", " + L(this._g) + ", " + L(this._b) + ", " + this._roundA + ")"
                },
                toPercentageRgb: function() {
                    return {
                        r: L(100 * x(this._r, 255)) + "%",
                        g: L(100 * x(this._g, 255)) + "%",
                        b: L(100 * x(this._b, 255)) + "%",
                        a: this._a
                    }
                },
                toPercentageRgbString: function() {
                    return 1 == this._a ? "rgb(" + L(100 * x(this._r, 255)) + "%, " + L(100 * x(this._g, 255)) + "%, " + L(100 * x(this._b, 255)) + "%)" : "rgba(" + L(100 * x(this._r, 255)) + "%, " + L(100 * x(this._g, 255)) + "%, " + L(100 * x(this._b, 255)) + "%, " + this._roundA + ")"
                },
                toName: function() {
                    return 0 === this._a ? "transparent" : this._a < 1 ? !1 : R[g(this._r, this._g, this._b, !0)] || !1
                },
                toFilter: function(a) {
                    var b = "#" + h(this._r, this._g, this._b, this._a),
                        c = b,
                        d = this._gradientType ? "GradientType = 1, " : "";
                    if (a) {
                        var e = P(a);
                        c = e.toHex8String()
                    }
                    return "progid:DXImageTransform.Microsoft.gradient(" + d + "startColorstr=" + b + ",endColorstr=" + c + ")"
                },
                toString: function(a) {
                    var b = !!a;
                    a = a || this._format;
                    var c = !1,
                        d = this._a < 1 && this._a >= 0,
                        e = !b && d && ("hex" === a || "hex6" === a || "hex3" === a || "name" === a);
                    return e ? "name" === a && 0 === this._a ? this.toName() : this.toRgbString() : ("rgb" === a && (c = this.toRgbString()), "prgb" === a && (c = this.toPercentageRgbString()), ("hex" === a || "hex6" === a) && (c = this.toHexString()), "hex3" === a && (c = this.toHexString(!0)), "hex8" === a && (c = this.toHex8String()), "name" === a && (c = this.toName()), "hsl" === a && (c = this.toHslString()), "hsv" === a && (c = this.toHsvString()), c || this.toHexString())
                },
                _applyModification: function(a, b) {
                    var c = a.apply(null, [this].concat([].slice.call(b)));
                    return this._r = c._r, this._g = c._g, this._b = c._b, this.setAlpha(c._a), this
                },
                lighten: function() {
                    return this._applyModification(l, arguments)
                },
                brighten: function() {
                    return this._applyModification(m, arguments)
                },
                darken: function() {
                    return this._applyModification(n, arguments)
                },
                desaturate: function() {
                    return this._applyModification(i, arguments)
                },
                saturate: function() {
                    return this._applyModification(j, arguments)
                },
                greyscale: function() {
                    return this._applyModification(k, arguments)
                },
                spin: function() {
                    return this._applyModification(o, arguments)
                },
                _applyCombination: function(a, b) {
                    return a.apply(null, [this].concat([].slice.call(b)))
                },
                analogous: function() {
                    return this._applyCombination(t, arguments)
                },
                complement: function() {
                    return this._applyCombination(p, arguments)
                },
                monochromatic: function() {
                    return this._applyCombination(u, arguments)
                },
                splitcomplement: function() {
                    return this._applyCombination(s, arguments)
                },
                triad: function() {
                    return this._applyCombination(q, arguments)
                },
                tetrad: function() {
                    return this._applyCombination(r, arguments)
                }
            }, P.fromRatio = function(a, b) {
                if ("object" == typeof a) {
                    var c = {};
                    for (var d in a) a.hasOwnProperty(d) && (c[d] = "a" === d ? a[d] : D(a[d]));
                    a = c
                }
                return P(a, b)
            }, P.equals = function(a, b) {
                return a && b ? P(a).toRgbString() == P(b).toRgbString() : !1
            }, P.random = function() {
                return P.fromRatio({
                    r: O(),
                    g: O(),
                    b: O()
                })
            }, P.mix = function(a, b, c) {
                c = 0 === c ? 0 : c || 50;
                var d, e = P(a).toRgb(),
                    f = P(b).toRgb(),
                    g = c / 100,
                    h = 2 * g - 1,
                    i = f.a - e.a;
                d = h * i == -1 ? h : (h + i) / (1 + h * i), d = (d + 1) / 2;
                var j = 1 - d,
                    k = {
                        r: f.r * d + e.r * j,
                        g: f.g * d + e.g * j,
                        b: f.b * d + e.b * j,
                        a: f.a * g + e.a * (1 - g)
                    };
                return P(k)
            }, P.readability = function(a, b) {
                var c = P(a),
                    d = P(b),
                    e = c.toRgb(),
                    f = d.toRgb(),
                    g = c.getBrightness(),
                    h = d.getBrightness(),
                    i = Math.max(e.r, f.r) - Math.min(e.r, f.r) + Math.max(e.g, f.g) - Math.min(e.g, f.g) + Math.max(e.b, f.b) - Math.min(e.b, f.b);
                return {
                    brightness: Math.abs(g - h),
                    color: i
                }
            }, P.isReadable = function(a, b) {
                var c = P.readability(a, b);
                return c.brightness > 125 && c.color > 500
            }, P.mostReadable = function(a, b) {
                for (var c = null, d = 0, e = !1, f = 0; f < b.length; f++) {
                    var g = P.readability(a, b[f]),
                        h = g.brightness > 125 && g.color > 500,
                        i = 3 * (g.brightness / 125) + g.color / 500;
                    (h && !e || h && e && i > d || !h && !e && i > d) && (e = h, d = i, c = P(b[f]))
                }
                return c
            };
            var Q = P.names = {
                    aliceblue: "f0f8ff",
                    antiquewhite: "faebd7",
                    aqua: "0ff",
                    aquamarine: "7fffd4",
                    azure: "f0ffff",
                    beige: "f5f5dc",
                    bisque: "ffe4c4",
                    black: "000",
                    blanchedalmond: "ffebcd",
                    blue: "00f",
                    blueviolet: "8a2be2",
                    brown: "a52a2a",
                    burlywood: "deb887",
                    burntsienna: "ea7e5d",
                    cadetblue: "5f9ea0",
                    chartreuse: "7fff00",
                    chocolate: "d2691e",
                    coral: "ff7f50",
                    cornflowerblue: "6495ed",
                    cornsilk: "fff8dc",
                    crimson: "dc143c",
                    cyan: "0ff",
                    darkblue: "00008b",
                    darkcyan: "008b8b",
                    darkgoldenrod: "b8860b",
                    darkgray: "a9a9a9",
                    darkgreen: "006400",
                    darkgrey: "a9a9a9",
                    darkkhaki: "bdb76b",
                    darkmagenta: "8b008b",
                    darkolivegreen: "556b2f",
                    darkorange: "ff8c00",
                    darkorchid: "9932cc",
                    darkred: "8b0000",
                    darksalmon: "e9967a",
                    darkseagreen: "8fbc8f",
                    darkslateblue: "483d8b",
                    darkslategray: "2f4f4f",
                    darkslategrey: "2f4f4f",
                    darkturquoise: "00ced1",
                    darkviolet: "9400d3",
                    deeppink: "ff1493",
                    deepskyblue: "00bfff",
                    dimgray: "696969",
                    dimgrey: "696969",
                    dodgerblue: "1e90ff",
                    firebrick: "b22222",
                    floralwhite: "fffaf0",
                    forestgreen: "228b22",
                    fuchsia: "f0f",
                    gainsboro: "dcdcdc",
                    ghostwhite: "f8f8ff",
                    gold: "ffd700",
                    goldenrod: "daa520",
                    gray: "808080",
                    green: "008000",
                    greenyellow: "adff2f",
                    grey: "808080",
                    honeydew: "f0fff0",
                    hotpink: "ff69b4",
                    indianred: "cd5c5c",
                    indigo: "4b0082",
                    ivory: "fffff0",
                    khaki: "f0e68c",
                    lavender: "e6e6fa",
                    lavenderblush: "fff0f5",
                    lawngreen: "7cfc00",
                    lemonchiffon: "fffacd",
                    lightblue: "add8e6",
                    lightcoral: "f08080",
                    lightcyan: "e0ffff",
                    lightgoldenrodyellow: "fafad2",
                    lightgray: "d3d3d3",
                    lightgreen: "90ee90",
                    lightgrey: "d3d3d3",
                    lightpink: "ffb6c1",
                    lightsalmon: "ffa07a",
                    lightseagreen: "20b2aa",
                    lightskyblue: "87cefa",
                    lightslategray: "789",
                    lightslategrey: "789",
                    lightsteelblue: "b0c4de",
                    lightyellow: "ffffe0",
                    lime: "0f0",
                    limegreen: "32cd32",
                    linen: "faf0e6",
                    magenta: "f0f",
                    maroon: "800000",
                    mediumaquamarine: "66cdaa",
                    mediumblue: "0000cd",
                    mediumorchid: "ba55d3",
                    mediumpurple: "9370db",
                    mediumseagreen: "3cb371",
                    mediumslateblue: "7b68ee",
                    mediumspringgreen: "00fa9a",
                    mediumturquoise: "48d1cc",
                    mediumvioletred: "c71585",
                    midnightblue: "191970",
                    mintcream: "f5fffa",
                    mistyrose: "ffe4e1",
                    moccasin: "ffe4b5",
                    navajowhite: "ffdead",
                    navy: "000080",
                    oldlace: "fdf5e6",
                    olive: "808000",
                    olivedrab: "6b8e23",
                    orange: "ffa500",
                    orangered: "ff4500",
                    orchid: "da70d6",
                    palegoldenrod: "eee8aa",
                    palegreen: "98fb98",
                    paleturquoise: "afeeee",
                    palevioletred: "db7093",
                    papayawhip: "ffefd5",
                    peachpuff: "ffdab9",
                    peru: "cd853f",
                    pink: "ffc0cb",
                    plum: "dda0dd",
                    powderblue: "b0e0e6",
                    purple: "800080",
                    rebeccapurple: "663399",
                    red: "f00",
                    rosybrown: "bc8f8f",
                    royalblue: "4169e1",
                    saddlebrown: "8b4513",
                    salmon: "fa8072",
                    sandybrown: "f4a460",
                    seagreen: "2e8b57",
                    seashell: "fff5ee",
                    sienna: "a0522d",
                    silver: "c0c0c0",
                    skyblue: "87ceeb",
                    slateblue: "6a5acd",
                    slategray: "708090",
                    slategrey: "708090",
                    snow: "fffafa",
                    springgreen: "00ff7f",
                    steelblue: "4682b4",
                    tan: "d2b48c",
                    teal: "008080",
                    thistle: "d8bfd8",
                    tomato: "ff6347",
                    turquoise: "40e0d0",
                    violet: "ee82ee",
                    wheat: "f5deb3",
                    white: "fff",
                    whitesmoke: "f5f5f5",
                    yellow: "ff0",
                    yellowgreen: "9acd32"
                },
                R = P.hexNames = v(Q),
                S = function() {
                    var a = "[-\\+]?\\d+%?",
                        b = "[-\\+]?\\d*\\.\\d+%?",
                        c = "(?:" + b + ")|(?:" + a + ")",
                        d = "[\\s|\\(]+(" + c + ")[,|\\s]+(" + c + ")[,|\\s]+(" + c + ")\\s*\\)?",
                        e = "[\\s|\\(]+(" + c + ")[,|\\s]+(" + c + ")[,|\\s]+(" + c + ")[,|\\s]+(" + c + ")\\s*\\)?";
                    return {
                        rgb: new RegExp("rgb" + d),
                        rgba: new RegExp("rgba" + e),
                        hsl: new RegExp("hsl" + d),
                        hsla: new RegExp("hsla" + e),
                        hsv: new RegExp("hsv" + d),
                        hsva: new RegExp("hsva" + e),
                        hex3: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
                        hex6: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
                        hex8: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
                    }
                }();
            window.tinycolor = P
        }(), a(function() {
        a.fn.spectrum.load && a.fn.spectrum.processNativeColorInputs()
    })
});